import { __export, __toDynamicImportESM } from "./chunk-C2mXeRLN.js";

//#region node_modules/axios/lib/helpers/bind.js
/**
* Create a bound version of a function with a specified `this` context
*
* @param {Function} fn - The function to bind
* @param {*} thisArg - The value to be passed as the `this` parameter
* @returns {Function} A new function that will call the original function with the specified `this` context
*/
function bind(fn$1, thisArg) {
	return function wrap() {
		return fn$1.apply(thisArg, arguments);
	};
}

//#endregion
//#region node_modules/axios/lib/utils.js
var { toString } = Object.prototype;
var { getPrototypeOf } = Object;
var { iterator, toStringTag } = Symbol;
var kindOf = ((cache) => (thing) => {
	const str = toString.call(thing);
	return cache[str] || (cache[str] = str.slice(8, -1).toLowerCase());
})(Object.create(null));
var kindOfTest = (type) => {
	type = type.toLowerCase();
	return (thing) => kindOf(thing) === type;
};
var typeOfTest = (type) => (thing) => typeof thing === type;
/**
* Determine if a value is an Array
*
* @param {Object} val The value to test
*
* @returns {boolean} True if value is an Array, otherwise false
*/
var { isArray } = Array;
/**
* Determine if a value is undefined
*
* @param {*} val The value to test
*
* @returns {boolean} True if the value is undefined, otherwise false
*/
var isUndefined = typeOfTest("undefined");
/**
* Determine if a value is a Buffer
*
* @param {*} val The value to test
*
* @returns {boolean} True if value is a Buffer, otherwise false
*/
function isBuffer(val) {
	return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor) && isFunction$1(val.constructor.isBuffer) && val.constructor.isBuffer(val);
}
/**
* Determine if a value is an ArrayBuffer
*
* @param {*} val The value to test
*
* @returns {boolean} True if value is an ArrayBuffer, otherwise false
*/
var isArrayBuffer = kindOfTest("ArrayBuffer");
/**
* Determine if a value is a view on an ArrayBuffer
*
* @param {*} val The value to test
*
* @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false
*/
function isArrayBufferView(val) {
	let result;
	if (typeof ArrayBuffer !== "undefined" && ArrayBuffer.isView) result = ArrayBuffer.isView(val);
	else result = val && val.buffer && isArrayBuffer(val.buffer);
	return result;
}
/**
* Determine if a value is a String
*
* @param {*} val The value to test
*
* @returns {boolean} True if value is a String, otherwise false
*/
var isString = typeOfTest("string");
/**
* Determine if a value is a Function
*
* @param {*} val The value to test
* @returns {boolean} True if value is a Function, otherwise false
*/
var isFunction$1 = typeOfTest("function");
/**
* Determine if a value is a Number
*
* @param {*} val The value to test
*
* @returns {boolean} True if value is a Number, otherwise false
*/
var isNumber = typeOfTest("number");
/**
* Determine if a value is an Object
*
* @param {*} thing The value to test
*
* @returns {boolean} True if value is an Object, otherwise false
*/
var isObject = (thing) => thing !== null && typeof thing === "object";
/**
* Determine if a value is a Boolean
*
* @param {*} thing The value to test
* @returns {boolean} True if value is a Boolean, otherwise false
*/
var isBoolean = (thing) => thing === true || thing === false;
/**
* Determine if a value is a plain Object
*
* @param {*} val The value to test
*
* @returns {boolean} True if value is a plain Object, otherwise false
*/
var isPlainObject = (val) => {
	if (kindOf(val) !== "object") return false;
	const prototype$2 = getPrototypeOf(val);
	return (prototype$2 === null || prototype$2 === Object.prototype || Object.getPrototypeOf(prototype$2) === null) && !(toStringTag in val) && !(iterator in val);
};
/**
* Determine if a value is an empty object (safely handles Buffers)
*
* @param {*} val The value to test
*
* @returns {boolean} True if value is an empty object, otherwise false
*/
var isEmptyObject = (val) => {
	if (!isObject(val) || isBuffer(val)) return false;
	try {
		return Object.keys(val).length === 0 && Object.getPrototypeOf(val) === Object.prototype;
	} catch (e$1) {
		return false;
	}
};
/**
* Determine if a value is a Date
*
* @param {*} val The value to test
*
* @returns {boolean} True if value is a Date, otherwise false
*/
var isDate = kindOfTest("Date");
/**
* Determine if a value is a File
*
* @param {*} val The value to test
*
* @returns {boolean} True if value is a File, otherwise false
*/
var isFile = kindOfTest("File");
/**
* Determine if a value is a Blob
*
* @param {*} val The value to test
*
* @returns {boolean} True if value is a Blob, otherwise false
*/
var isBlob = kindOfTest("Blob");
/**
* Determine if a value is a FileList
*
* @param {*} val The value to test
*
* @returns {boolean} True if value is a File, otherwise false
*/
var isFileList = kindOfTest("FileList");
/**
* Determine if a value is a Stream
*
* @param {*} val The value to test
*
* @returns {boolean} True if value is a Stream, otherwise false
*/
var isStream = (val) => isObject(val) && isFunction$1(val.pipe);
/**
* Determine if a value is a FormData
*
* @param {*} thing The value to test
*
* @returns {boolean} True if value is an FormData, otherwise false
*/
var isFormData = (thing) => {
	let kind;
	return thing && (typeof FormData === "function" && thing instanceof FormData || isFunction$1(thing.append) && ((kind = kindOf(thing)) === "formdata" || kind === "object" && isFunction$1(thing.toString) && thing.toString() === "[object FormData]"));
};
/**
* Determine if a value is a URLSearchParams object
*
* @param {*} val The value to test
*
* @returns {boolean} True if value is a URLSearchParams object, otherwise false
*/
var isURLSearchParams = kindOfTest("URLSearchParams");
var [isReadableStream, isRequest, isResponse, isHeaders] = [
	"ReadableStream",
	"Request",
	"Response",
	"Headers"
].map(kindOfTest);
/**
* Trim excess whitespace off the beginning and end of a string
*
* @param {String} str The String to trim
*
* @returns {String} The String freed of excess whitespace
*/
var trim = (str) => str.trim ? str.trim() : str.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, "");
/**
* Iterate over an Array or an Object invoking a function for each item.
*
* If `obj` is an Array callback will be called passing
* the value, index, and complete array for each item.
*
* If 'obj' is an Object callback will be called passing
* the value, key, and complete object for each property.
*
* @param {Object|Array} obj The object to iterate
* @param {Function} fn The callback to invoke for each item
*
* @param {Boolean} [allOwnKeys = false]
* @returns {any}
*/
function forEach(obj, fn$1, { allOwnKeys = false } = {}) {
	if (obj === null || typeof obj === "undefined") return;
	let i$1;
	let l$1;
	if (typeof obj !== "object") obj = [obj];
	if (isArray(obj)) for (i$1 = 0, l$1 = obj.length; i$1 < l$1; i$1++) fn$1.call(null, obj[i$1], i$1, obj);
	else {
		if (isBuffer(obj)) return;
		const keys = allOwnKeys ? Object.getOwnPropertyNames(obj) : Object.keys(obj);
		const len = keys.length;
		let key;
		for (i$1 = 0; i$1 < len; i$1++) {
			key = keys[i$1];
			fn$1.call(null, obj[key], key, obj);
		}
	}
}
function findKey(obj, key) {
	if (isBuffer(obj)) return null;
	key = key.toLowerCase();
	const keys = Object.keys(obj);
	let i$1 = keys.length;
	let _key;
	while (i$1-- > 0) {
		_key = keys[i$1];
		if (key === _key.toLowerCase()) return _key;
	}
	return null;
}
var _global = (() => {
	if (typeof globalThis !== "undefined") return globalThis;
	return typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : global;
})();
var isContextDefined = (context) => !isUndefined(context) && context !== _global;
/**
* Accepts varargs expecting each argument to be an object, then
* immutably merges the properties of each object and returns result.
*
* When multiple objects contain the same key the later object in
* the arguments list will take precedence.
*
* Example:
*
* ```js
* var result = merge({foo: 123}, {foo: 456});
* console.log(result.foo); // outputs 456
* ```
*
* @param {Object} obj1 Object to merge
*
* @returns {Object} Result of all merge properties
*/
function merge() {
	const { caseless, skipUndefined } = isContextDefined(this) && this || {};
	const result = {};
	const assignValue = (val, key) => {
		const targetKey = caseless && findKey(result, key) || key;
		if (isPlainObject(result[targetKey]) && isPlainObject(val)) result[targetKey] = merge(result[targetKey], val);
		else if (isPlainObject(val)) result[targetKey] = merge({}, val);
		else if (isArray(val)) result[targetKey] = val.slice();
		else if (!skipUndefined || !isUndefined(val)) result[targetKey] = val;
	};
	for (let i$1 = 0, l$1 = arguments.length; i$1 < l$1; i$1++) arguments[i$1] && forEach(arguments[i$1], assignValue);
	return result;
}
/**
* Extends object a by mutably adding to it the properties of object b.
*
* @param {Object} a The object to be extended
* @param {Object} b The object to copy properties from
* @param {Object} thisArg The object to bind function to
*
* @param {Boolean} [allOwnKeys]
* @returns {Object} The resulting value of object a
*/
var extend = (a$1, b$1, thisArg, { allOwnKeys } = {}) => {
	forEach(b$1, (val, key) => {
		if (thisArg && isFunction$1(val)) a$1[key] = bind(val, thisArg);
		else a$1[key] = val;
	}, { allOwnKeys });
	return a$1;
};
/**
* Remove byte order marker. This catches EF BB BF (the UTF-8 BOM)
*
* @param {string} content with BOM
*
* @returns {string} content value without BOM
*/
var stripBOM = (content) => {
	if (content.charCodeAt(0) === 65279) content = content.slice(1);
	return content;
};
/**
* Inherit the prototype methods from one constructor into another
* @param {function} constructor
* @param {function} superConstructor
* @param {object} [props]
* @param {object} [descriptors]
*
* @returns {void}
*/
var inherits = (constructor, superConstructor, props, descriptors$1) => {
	constructor.prototype = Object.create(superConstructor.prototype, descriptors$1);
	constructor.prototype.constructor = constructor;
	Object.defineProperty(constructor, "super", { value: superConstructor.prototype });
	props && Object.assign(constructor.prototype, props);
};
/**
* Resolve object with deep prototype chain to a flat object
* @param {Object} sourceObj source object
* @param {Object} [destObj]
* @param {Function|Boolean} [filter]
* @param {Function} [propFilter]
*
* @returns {Object}
*/
var toFlatObject = (sourceObj, destObj, filter, propFilter) => {
	let props;
	let i$1;
	let prop;
	const merged = {};
	destObj = destObj || {};
	if (sourceObj == null) return destObj;
	do {
		props = Object.getOwnPropertyNames(sourceObj);
		i$1 = props.length;
		while (i$1-- > 0) {
			prop = props[i$1];
			if ((!propFilter || propFilter(prop, sourceObj, destObj)) && !merged[prop]) {
				destObj[prop] = sourceObj[prop];
				merged[prop] = true;
			}
		}
		sourceObj = filter !== false && getPrototypeOf(sourceObj);
	} while (sourceObj && (!filter || filter(sourceObj, destObj)) && sourceObj !== Object.prototype);
	return destObj;
};
/**
* Determines whether a string ends with the characters of a specified string
*
* @param {String} str
* @param {String} searchString
* @param {Number} [position= 0]
*
* @returns {boolean}
*/
var endsWith = (str, searchString, position) => {
	str = String(str);
	if (position === void 0 || position > str.length) position = str.length;
	position -= searchString.length;
	const lastIndex = str.indexOf(searchString, position);
	return lastIndex !== -1 && lastIndex === position;
};
/**
* Returns new array from array like object or null if failed
*
* @param {*} [thing]
*
* @returns {?Array}
*/
var toArray = (thing) => {
	if (!thing) return null;
	if (isArray(thing)) return thing;
	let i$1 = thing.length;
	if (!isNumber(i$1)) return null;
	const arr = new Array(i$1);
	while (i$1-- > 0) arr[i$1] = thing[i$1];
	return arr;
};
/**
* Checking if the Uint8Array exists and if it does, it returns a function that checks if the
* thing passed in is an instance of Uint8Array
*
* @param {TypedArray}
*
* @returns {Array}
*/
var isTypedArray = ((TypedArray) => {
	return (thing) => {
		return TypedArray && thing instanceof TypedArray;
	};
})(typeof Uint8Array !== "undefined" && getPrototypeOf(Uint8Array));
/**
* For each entry in the object, call the function with the key and value.
*
* @param {Object<any, any>} obj - The object to iterate over.
* @param {Function} fn - The function to call for each entry.
*
* @returns {void}
*/
var forEachEntry = (obj, fn$1) => {
	const _iterator = (obj && obj[iterator]).call(obj);
	let result;
	while ((result = _iterator.next()) && !result.done) {
		const pair = result.value;
		fn$1.call(obj, pair[0], pair[1]);
	}
};
/**
* It takes a regular expression and a string, and returns an array of all the matches
*
* @param {string} regExp - The regular expression to match against.
* @param {string} str - The string to search.
*
* @returns {Array<boolean>}
*/
var matchAll = (regExp, str) => {
	let matches;
	const arr = [];
	while ((matches = regExp.exec(str)) !== null) arr.push(matches);
	return arr;
};
var isHTMLForm = kindOfTest("HTMLFormElement");
var toCamelCase = (str) => {
	return str.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g, function replacer(m$1, p1, p2) {
		return p1.toUpperCase() + p2;
	});
};
var hasOwnProperty = (({ hasOwnProperty: hasOwnProperty$1 }) => (obj, prop) => hasOwnProperty$1.call(obj, prop))(Object.prototype);
/**
* Determine if a value is a RegExp object
*
* @param {*} val The value to test
*
* @returns {boolean} True if value is a RegExp object, otherwise false
*/
var isRegExp = kindOfTest("RegExp");
var reduceDescriptors = (obj, reducer) => {
	const descriptors$1 = Object.getOwnPropertyDescriptors(obj);
	const reducedDescriptors = {};
	forEach(descriptors$1, (descriptor, name$1) => {
		let ret;
		if ((ret = reducer(descriptor, name$1, obj)) !== false) reducedDescriptors[name$1] = ret || descriptor;
	});
	Object.defineProperties(obj, reducedDescriptors);
};
/**
* Makes all methods read-only
* @param {Object} obj
*/
var freezeMethods = (obj) => {
	reduceDescriptors(obj, (descriptor, name$1) => {
		if (isFunction$1(obj) && [
			"arguments",
			"caller",
			"callee"
		].indexOf(name$1) !== -1) return false;
		const value = obj[name$1];
		if (!isFunction$1(value)) return;
		descriptor.enumerable = false;
		if ("writable" in descriptor) {
			descriptor.writable = false;
			return;
		}
		if (!descriptor.set) descriptor.set = () => {
			throw Error("Can not rewrite read-only method '" + name$1 + "'");
		};
	});
};
var toObjectSet = (arrayOrString, delimiter) => {
	const obj = {};
	const define = (arr) => {
		arr.forEach((value) => {
			obj[value] = true;
		});
	};
	isArray(arrayOrString) ? define(arrayOrString) : define(String(arrayOrString).split(delimiter));
	return obj;
};
var noop = () => {};
var toFiniteNumber = (value, defaultValue) => {
	return value != null && Number.isFinite(value = +value) ? value : defaultValue;
};
/**
* If the thing is a FormData object, return true, otherwise return false.
*
* @param {unknown} thing - The thing to check.
*
* @returns {boolean}
*/
function isSpecCompliantForm(thing) {
	return !!(thing && isFunction$1(thing.append) && thing[toStringTag] === "FormData" && thing[iterator]);
}
var toJSONObject = (obj) => {
	const stack = new Array(10);
	const visit = (source, i$1) => {
		if (isObject(source)) {
			if (stack.indexOf(source) >= 0) return;
			if (isBuffer(source)) return source;
			if (!("toJSON" in source)) {
				stack[i$1] = source;
				const target = isArray(source) ? [] : {};
				forEach(source, (value, key) => {
					const reducedValue = visit(value, i$1 + 1);
					!isUndefined(reducedValue) && (target[key] = reducedValue);
				});
				stack[i$1] = void 0;
				return target;
			}
		}
		return source;
	};
	return visit(obj, 0);
};
var isAsyncFn = kindOfTest("AsyncFunction");
var isThenable = (thing) => thing && (isObject(thing) || isFunction$1(thing)) && isFunction$1(thing.then) && isFunction$1(thing.catch);
var _setImmediate = ((setImmediateSupported, postMessageSupported) => {
	if (setImmediateSupported) return setImmediate;
	return postMessageSupported ? ((token, callbacks) => {
		_global.addEventListener("message", ({ source, data }) => {
			if (source === _global && data === token) callbacks.length && callbacks.shift()();
		}, false);
		return (cb) => {
			callbacks.push(cb);
			_global.postMessage(token, "*");
		};
	})(`axios@${Math.random()}`, []) : (cb) => setTimeout(cb);
})(typeof setImmediate === "function", isFunction$1(_global.postMessage));
var asap = typeof queueMicrotask !== "undefined" ? queueMicrotask.bind(_global) : typeof process !== "undefined" && process.nextTick || _setImmediate;
var isIterable = (thing) => thing != null && isFunction$1(thing[iterator]);
var utils_default = {
	isArray,
	isArrayBuffer,
	isBuffer,
	isFormData,
	isArrayBufferView,
	isString,
	isNumber,
	isBoolean,
	isObject,
	isPlainObject,
	isEmptyObject,
	isReadableStream,
	isRequest,
	isResponse,
	isHeaders,
	isUndefined,
	isDate,
	isFile,
	isBlob,
	isRegExp,
	isFunction: isFunction$1,
	isStream,
	isURLSearchParams,
	isTypedArray,
	isFileList,
	forEach,
	merge,
	extend,
	trim,
	stripBOM,
	inherits,
	toFlatObject,
	kindOf,
	kindOfTest,
	endsWith,
	toArray,
	forEachEntry,
	matchAll,
	isHTMLForm,
	hasOwnProperty,
	hasOwnProp: hasOwnProperty,
	reduceDescriptors,
	freezeMethods,
	toObjectSet,
	toCamelCase,
	noop,
	toFiniteNumber,
	findKey,
	global: _global,
	isContextDefined,
	isSpecCompliantForm,
	toJSONObject,
	isAsyncFn,
	isThenable,
	setImmediate: _setImmediate,
	asap,
	isIterable
};

//#endregion
//#region node_modules/axios/lib/core/AxiosError.js
/**
* Create an Error with the specified message, config, error code, request and response.
*
* @param {string} message The error message.
* @param {string} [code] The error code (for example, 'ECONNABORTED').
* @param {Object} [config] The config.
* @param {Object} [request] The request.
* @param {Object} [response] The response.
*
* @returns {Error} The created error.
*/
function AxiosError$1(message, code, config, request, response) {
	Error.call(this);
	if (Error.captureStackTrace) Error.captureStackTrace(this, this.constructor);
	else this.stack = (/* @__PURE__ */ new Error()).stack;
	this.message = message;
	this.name = "AxiosError";
	code && (this.code = code);
	config && (this.config = config);
	request && (this.request = request);
	if (response) {
		this.response = response;
		this.status = response.status ? response.status : null;
	}
}
utils_default.inherits(AxiosError$1, Error, { toJSON: function toJSON() {
	return {
		message: this.message,
		name: this.name,
		description: this.description,
		number: this.number,
		fileName: this.fileName,
		lineNumber: this.lineNumber,
		columnNumber: this.columnNumber,
		stack: this.stack,
		config: utils_default.toJSONObject(this.config),
		code: this.code,
		status: this.status
	};
} });
var prototype$1 = AxiosError$1.prototype;
var descriptors = {};
[
	"ERR_BAD_OPTION_VALUE",
	"ERR_BAD_OPTION",
	"ECONNABORTED",
	"ETIMEDOUT",
	"ERR_NETWORK",
	"ERR_FR_TOO_MANY_REDIRECTS",
	"ERR_DEPRECATED",
	"ERR_BAD_RESPONSE",
	"ERR_BAD_REQUEST",
	"ERR_CANCELED",
	"ERR_NOT_SUPPORT",
	"ERR_INVALID_URL"
].forEach((code) => {
	descriptors[code] = { value: code };
});
Object.defineProperties(AxiosError$1, descriptors);
Object.defineProperty(prototype$1, "isAxiosError", { value: true });
AxiosError$1.from = (error, code, config, request, response, customProps) => {
	const axiosError = Object.create(prototype$1);
	utils_default.toFlatObject(error, axiosError, function filter(obj) {
		return obj !== Error.prototype;
	}, (prop) => {
		return prop !== "isAxiosError";
	});
	const msg = error && error.message ? error.message : "Error";
	const errCode = code == null && error ? error.code : code;
	AxiosError$1.call(axiosError, msg, errCode, config, request, response);
	if (error && axiosError.cause == null) Object.defineProperty(axiosError, "cause", {
		value: error,
		configurable: true
	});
	axiosError.name = error && error.name || "Error";
	customProps && Object.assign(axiosError, customProps);
	return axiosError;
};
var AxiosError_default = AxiosError$1;

//#endregion
//#region node_modules/axios/lib/helpers/null.js
var null_default = null;

//#endregion
//#region node_modules/axios/lib/helpers/toFormData.js
/**
* Determines if the given thing is a array or js object.
*
* @param {string} thing - The object or array to be visited.
*
* @returns {boolean}
*/
function isVisitable(thing) {
	return utils_default.isPlainObject(thing) || utils_default.isArray(thing);
}
/**
* It removes the brackets from the end of a string
*
* @param {string} key - The key of the parameter.
*
* @returns {string} the key without the brackets.
*/
function removeBrackets(key) {
	return utils_default.endsWith(key, "[]") ? key.slice(0, -2) : key;
}
/**
* It takes a path, a key, and a boolean, and returns a string
*
* @param {string} path - The path to the current key.
* @param {string} key - The key of the current object being iterated over.
* @param {string} dots - If true, the key will be rendered with dots instead of brackets.
*
* @returns {string} The path to the current key.
*/
function renderKey(path, key, dots) {
	if (!path) return key;
	return path.concat(key).map(function each(token, i$1) {
		token = removeBrackets(token);
		return !dots && i$1 ? "[" + token + "]" : token;
	}).join(dots ? "." : "");
}
/**
* If the array is an array and none of its elements are visitable, then it's a flat array.
*
* @param {Array<any>} arr - The array to check
*
* @returns {boolean}
*/
function isFlatArray(arr) {
	return utils_default.isArray(arr) && !arr.some(isVisitable);
}
var predicates = utils_default.toFlatObject(utils_default, {}, null, function filter(prop) {
	return /^is[A-Z]/.test(prop);
});
/**
* Convert a data object to FormData
*
* @param {Object} obj
* @param {?Object} [formData]
* @param {?Object} [options]
* @param {Function} [options.visitor]
* @param {Boolean} [options.metaTokens = true]
* @param {Boolean} [options.dots = false]
* @param {?Boolean} [options.indexes = false]
*
* @returns {Object}
**/
/**
* It converts an object into a FormData object
*
* @param {Object<any, any>} obj - The object to convert to form data.
* @param {string} formData - The FormData object to append to.
* @param {Object<string, any>} options
*
* @returns
*/
function toFormData$1(obj, formData, options) {
	if (!utils_default.isObject(obj)) throw new TypeError("target must be an object");
	formData = formData || new (null_default || FormData)();
	options = utils_default.toFlatObject(options, {
		metaTokens: true,
		dots: false,
		indexes: false
	}, false, function defined(option, source) {
		return !utils_default.isUndefined(source[option]);
	});
	const metaTokens = options.metaTokens;
	const visitor = options.visitor || defaultVisitor;
	const dots = options.dots;
	const indexes = options.indexes;
	const useBlob = (options.Blob || typeof Blob !== "undefined" && Blob) && utils_default.isSpecCompliantForm(formData);
	if (!utils_default.isFunction(visitor)) throw new TypeError("visitor must be a function");
	function convertValue(value) {
		if (value === null) return "";
		if (utils_default.isDate(value)) return value.toISOString();
		if (utils_default.isBoolean(value)) return value.toString();
		if (!useBlob && utils_default.isBlob(value)) throw new AxiosError_default("Blob is not supported. Use a Buffer instead.");
		if (utils_default.isArrayBuffer(value) || utils_default.isTypedArray(value)) return useBlob && typeof Blob === "function" ? new Blob([value]) : Buffer.from(value);
		return value;
	}
	/**
	* Default visitor.
	*
	* @param {*} value
	* @param {String|Number} key
	* @param {Array<String|Number>} path
	* @this {FormData}
	*
	* @returns {boolean} return true to visit the each prop of the value recursively
	*/
	function defaultVisitor(value, key, path) {
		let arr = value;
		if (value && !path && typeof value === "object") {
			if (utils_default.endsWith(key, "{}")) {
				key = metaTokens ? key : key.slice(0, -2);
				value = JSON.stringify(value);
			} else if (utils_default.isArray(value) && isFlatArray(value) || (utils_default.isFileList(value) || utils_default.endsWith(key, "[]")) && (arr = utils_default.toArray(value))) {
				key = removeBrackets(key);
				arr.forEach(function each(el, index) {
					!(utils_default.isUndefined(el) || el === null) && formData.append(indexes === true ? renderKey([key], index, dots) : indexes === null ? key : key + "[]", convertValue(el));
				});
				return false;
			}
		}
		if (isVisitable(value)) return true;
		formData.append(renderKey(path, key, dots), convertValue(value));
		return false;
	}
	const stack = [];
	const exposedHelpers = Object.assign(predicates, {
		defaultVisitor,
		convertValue,
		isVisitable
	});
	function build(value, path) {
		if (utils_default.isUndefined(value)) return;
		if (stack.indexOf(value) !== -1) throw Error("Circular reference detected in " + path.join("."));
		stack.push(value);
		utils_default.forEach(value, function each(el, key) {
			if ((!(utils_default.isUndefined(el) || el === null) && visitor.call(formData, el, utils_default.isString(key) ? key.trim() : key, path, exposedHelpers)) === true) build(el, path ? path.concat(key) : [key]);
		});
		stack.pop();
	}
	if (!utils_default.isObject(obj)) throw new TypeError("data must be an object");
	build(obj);
	return formData;
}
var toFormData_default = toFormData$1;

//#endregion
//#region node_modules/axios/lib/helpers/AxiosURLSearchParams.js
/**
* It encodes a string by replacing all characters that are not in the unreserved set with
* their percent-encoded equivalents
*
* @param {string} str - The string to encode.
*
* @returns {string} The encoded string.
*/
function encode$1(str) {
	const charMap = {
		"!": "%21",
		"'": "%27",
		"(": "%28",
		")": "%29",
		"~": "%7E",
		"%20": "+",
		"%00": "\0"
	};
	return encodeURIComponent(str).replace(/[!'()~]|%20|%00/g, function replacer(match) {
		return charMap[match];
	});
}
/**
* It takes a params object and converts it to a FormData object
*
* @param {Object<string, any>} params - The parameters to be converted to a FormData object.
* @param {Object<string, any>} options - The options object passed to the Axios constructor.
*
* @returns {void}
*/
function AxiosURLSearchParams(params, options) {
	this._pairs = [];
	params && toFormData_default(params, this, options);
}
var prototype = AxiosURLSearchParams.prototype;
prototype.append = function append(name$1, value) {
	this._pairs.push([name$1, value]);
};
prototype.toString = function toString$1(encoder) {
	const _encode = encoder ? function(value) {
		return encoder.call(this, value, encode$1);
	} : encode$1;
	return this._pairs.map(function each(pair) {
		return _encode(pair[0]) + "=" + _encode(pair[1]);
	}, "").join("&");
};
var AxiosURLSearchParams_default = AxiosURLSearchParams;

//#endregion
//#region node_modules/axios/lib/helpers/buildURL.js
/**
* It replaces all instances of the characters `:`, `$`, `,`, `+`, `[`, and `]` with their
* URI encoded counterparts
*
* @param {string} val The value to be encoded.
*
* @returns {string} The encoded value.
*/
function encode(val) {
	return encodeURIComponent(val).replace(/%3A/gi, ":").replace(/%24/g, "$").replace(/%2C/gi, ",").replace(/%20/g, "+");
}
/**
* Build a URL by appending params to the end
*
* @param {string} url The base of the url (e.g., http://www.google.com)
* @param {object} [params] The params to be appended
* @param {?(object|Function)} options
*
* @returns {string} The formatted url
*/
function buildURL(url, params, options) {
	if (!params) return url;
	const _encode = options && options.encode || encode;
	if (utils_default.isFunction(options)) options = { serialize: options };
	const serializeFn = options && options.serialize;
	let serializedParams;
	if (serializeFn) serializedParams = serializeFn(params, options);
	else serializedParams = utils_default.isURLSearchParams(params) ? params.toString() : new AxiosURLSearchParams_default(params, options).toString(_encode);
	if (serializedParams) {
		const hashmarkIndex = url.indexOf("#");
		if (hashmarkIndex !== -1) url = url.slice(0, hashmarkIndex);
		url += (url.indexOf("?") === -1 ? "?" : "&") + serializedParams;
	}
	return url;
}

//#endregion
//#region node_modules/axios/lib/core/InterceptorManager.js
var InterceptorManager = class {
	constructor() {
		this.handlers = [];
	}
	/**
	* Add a new interceptor to the stack
	*
	* @param {Function} fulfilled The function to handle `then` for a `Promise`
	* @param {Function} rejected The function to handle `reject` for a `Promise`
	*
	* @return {Number} An ID used to remove interceptor later
	*/
	use(fulfilled, rejected, options) {
		this.handlers.push({
			fulfilled,
			rejected,
			synchronous: options ? options.synchronous : false,
			runWhen: options ? options.runWhen : null
		});
		return this.handlers.length - 1;
	}
	/**
	* Remove an interceptor from the stack
	*
	* @param {Number} id The ID that was returned by `use`
	*
	* @returns {void}
	*/
	eject(id) {
		if (this.handlers[id]) this.handlers[id] = null;
	}
	/**
	* Clear all interceptors from the stack
	*
	* @returns {void}
	*/
	clear() {
		if (this.handlers) this.handlers = [];
	}
	/**
	* Iterate over all the registered interceptors
	*
	* This method is particularly useful for skipping over any
	* interceptors that may have become `null` calling `eject`.
	*
	* @param {Function} fn The function to call for each interceptor
	*
	* @returns {void}
	*/
	forEach(fn$1) {
		utils_default.forEach(this.handlers, function forEachHandler(h$1) {
			if (h$1 !== null) fn$1(h$1);
		});
	}
};
var InterceptorManager_default = InterceptorManager;

//#endregion
//#region node_modules/axios/lib/defaults/transitional.js
var transitional_default = {
	silentJSONParsing: true,
	forcedJSONParsing: true,
	clarifyTimeoutError: false
};

//#endregion
//#region node_modules/axios/lib/platform/browser/classes/URLSearchParams.js
var URLSearchParams_default = typeof URLSearchParams !== "undefined" ? URLSearchParams : AxiosURLSearchParams_default;

//#endregion
//#region node_modules/axios/lib/platform/browser/classes/FormData.js
var FormData_default = typeof FormData !== "undefined" ? FormData : null;

//#endregion
//#region node_modules/axios/lib/platform/browser/classes/Blob.js
var Blob_default = typeof Blob !== "undefined" ? Blob : null;

//#endregion
//#region node_modules/axios/lib/platform/browser/index.js
var browser_default = {
	isBrowser: true,
	classes: {
		URLSearchParams: URLSearchParams_default,
		FormData: FormData_default,
		Blob: Blob_default
	},
	protocols: [
		"http",
		"https",
		"file",
		"blob",
		"url",
		"data"
	]
};

//#endregion
//#region node_modules/axios/lib/platform/common/utils.js
var utils_exports = /* @__PURE__ */ __export({
	hasBrowserEnv: () => hasBrowserEnv,
	hasStandardBrowserEnv: () => hasStandardBrowserEnv,
	hasStandardBrowserWebWorkerEnv: () => hasStandardBrowserWebWorkerEnv,
	navigator: () => _navigator,
	origin: () => origin
});
var hasBrowserEnv = typeof window !== "undefined" && typeof document !== "undefined";
var _navigator = typeof navigator === "object" && navigator || void 0;
/**
* Determine if we're running in a standard browser environment
*
* This allows axios to run in a web worker, and react-native.
* Both environments support XMLHttpRequest, but not fully standard globals.
*
* web workers:
*  typeof window -> undefined
*  typeof document -> undefined
*
* react-native:
*  navigator.product -> 'ReactNative'
* nativescript
*  navigator.product -> 'NativeScript' or 'NS'
*
* @returns {boolean}
*/
var hasStandardBrowserEnv = hasBrowserEnv && (!_navigator || [
	"ReactNative",
	"NativeScript",
	"NS"
].indexOf(_navigator.product) < 0);
/**
* Determine if we're running in a standard browser webWorker environment
*
* Although the `isStandardBrowserEnv` method indicates that
* `allows axios to run in a web worker`, the WebWorker will still be
* filtered out due to its judgment standard
* `typeof window !== 'undefined' && typeof document !== 'undefined'`.
* This leads to a problem when axios post `FormData` in webWorker
*/
var hasStandardBrowserWebWorkerEnv = (() => {
	return typeof WorkerGlobalScope !== "undefined" && self instanceof WorkerGlobalScope && typeof self.importScripts === "function";
})();
var origin = hasBrowserEnv && window.location.href || "http://localhost";

//#endregion
//#region node_modules/axios/lib/platform/index.js
var platform_default = {
	...utils_exports,
	...browser_default
};

//#endregion
//#region node_modules/axios/lib/helpers/toURLEncodedForm.js
function toURLEncodedForm(data, options) {
	return toFormData_default(data, new platform_default.classes.URLSearchParams(), {
		visitor: function(value, key, path, helpers) {
			if (platform_default.isNode && utils_default.isBuffer(value)) {
				this.append(key, value.toString("base64"));
				return false;
			}
			return helpers.defaultVisitor.apply(this, arguments);
		},
		...options
	});
}

//#endregion
//#region node_modules/axios/lib/helpers/formDataToJSON.js
/**
* It takes a string like `foo[x][y][z]` and returns an array like `['foo', 'x', 'y', 'z']
*
* @param {string} name - The name of the property to get.
*
* @returns An array of strings.
*/
function parsePropPath(name$1) {
	return utils_default.matchAll(/\w+|\[(\w*)]/g, name$1).map((match) => {
		return match[0] === "[]" ? "" : match[1] || match[0];
	});
}
/**
* Convert an array to an object.
*
* @param {Array<any>} arr - The array to convert to an object.
*
* @returns An object with the same keys and values as the array.
*/
function arrayToObject(arr) {
	const obj = {};
	const keys = Object.keys(arr);
	let i$1;
	const len = keys.length;
	let key;
	for (i$1 = 0; i$1 < len; i$1++) {
		key = keys[i$1];
		obj[key] = arr[key];
	}
	return obj;
}
/**
* It takes a FormData object and returns a JavaScript object
*
* @param {string} formData The FormData object to convert to JSON.
*
* @returns {Object<string, any> | null} The converted object.
*/
function formDataToJSON(formData) {
	function buildPath(path, value, target, index) {
		let name$1 = path[index++];
		if (name$1 === "__proto__") return true;
		const isNumericKey = Number.isFinite(+name$1);
		const isLast = index >= path.length;
		name$1 = !name$1 && utils_default.isArray(target) ? target.length : name$1;
		if (isLast) {
			if (utils_default.hasOwnProp(target, name$1)) target[name$1] = [target[name$1], value];
			else target[name$1] = value;
			return !isNumericKey;
		}
		if (!target[name$1] || !utils_default.isObject(target[name$1])) target[name$1] = [];
		if (buildPath(path, value, target[name$1], index) && utils_default.isArray(target[name$1])) target[name$1] = arrayToObject(target[name$1]);
		return !isNumericKey;
	}
	if (utils_default.isFormData(formData) && utils_default.isFunction(formData.entries)) {
		const obj = {};
		utils_default.forEachEntry(formData, (name$1, value) => {
			buildPath(parsePropPath(name$1), value, obj, 0);
		});
		return obj;
	}
	return null;
}
var formDataToJSON_default = formDataToJSON;

//#endregion
//#region node_modules/axios/lib/defaults/index.js
/**
* It takes a string, tries to parse it, and if it fails, it returns the stringified version
* of the input
*
* @param {any} rawValue - The value to be stringified.
* @param {Function} parser - A function that parses a string into a JavaScript object.
* @param {Function} encoder - A function that takes a value and returns a string.
*
* @returns {string} A stringified version of the rawValue.
*/
function stringifySafely(rawValue, parser, encoder) {
	if (utils_default.isString(rawValue)) try {
		(parser || JSON.parse)(rawValue);
		return utils_default.trim(rawValue);
	} catch (e$1) {
		if (e$1.name !== "SyntaxError") throw e$1;
	}
	return (encoder || JSON.stringify)(rawValue);
}
var defaults = {
	transitional: transitional_default,
	adapter: [
		"xhr",
		"http",
		"fetch"
	],
	transformRequest: [function transformRequest(data, headers) {
		const contentType = headers.getContentType() || "";
		const hasJSONContentType = contentType.indexOf("application/json") > -1;
		const isObjectPayload = utils_default.isObject(data);
		if (isObjectPayload && utils_default.isHTMLForm(data)) data = new FormData(data);
		if (utils_default.isFormData(data)) return hasJSONContentType ? JSON.stringify(formDataToJSON_default(data)) : data;
		if (utils_default.isArrayBuffer(data) || utils_default.isBuffer(data) || utils_default.isStream(data) || utils_default.isFile(data) || utils_default.isBlob(data) || utils_default.isReadableStream(data)) return data;
		if (utils_default.isArrayBufferView(data)) return data.buffer;
		if (utils_default.isURLSearchParams(data)) {
			headers.setContentType("application/x-www-form-urlencoded;charset=utf-8", false);
			return data.toString();
		}
		let isFileList$1;
		if (isObjectPayload) {
			if (contentType.indexOf("application/x-www-form-urlencoded") > -1) return toURLEncodedForm(data, this.formSerializer).toString();
			if ((isFileList$1 = utils_default.isFileList(data)) || contentType.indexOf("multipart/form-data") > -1) {
				const _FormData = this.env && this.env.FormData;
				return toFormData_default(isFileList$1 ? { "files[]": data } : data, _FormData && new _FormData(), this.formSerializer);
			}
		}
		if (isObjectPayload || hasJSONContentType) {
			headers.setContentType("application/json", false);
			return stringifySafely(data);
		}
		return data;
	}],
	transformResponse: [function transformResponse(data) {
		const transitional = this.transitional || defaults.transitional;
		const forcedJSONParsing = transitional && transitional.forcedJSONParsing;
		const JSONRequested = this.responseType === "json";
		if (utils_default.isResponse(data) || utils_default.isReadableStream(data)) return data;
		if (data && utils_default.isString(data) && (forcedJSONParsing && !this.responseType || JSONRequested)) {
			const strictJSONParsing = !(transitional && transitional.silentJSONParsing) && JSONRequested;
			try {
				return JSON.parse(data, this.parseReviver);
			} catch (e$1) {
				if (strictJSONParsing) {
					if (e$1.name === "SyntaxError") throw AxiosError_default.from(e$1, AxiosError_default.ERR_BAD_RESPONSE, this, null, this.response);
					throw e$1;
				}
			}
		}
		return data;
	}],
	timeout: 0,
	xsrfCookieName: "XSRF-TOKEN",
	xsrfHeaderName: "X-XSRF-TOKEN",
	maxContentLength: -1,
	maxBodyLength: -1,
	env: {
		FormData: platform_default.classes.FormData,
		Blob: platform_default.classes.Blob
	},
	validateStatus: function validateStatus(status) {
		return status >= 200 && status < 300;
	},
	headers: { common: {
		"Accept": "application/json, text/plain, */*",
		"Content-Type": void 0
	} }
};
utils_default.forEach([
	"delete",
	"get",
	"head",
	"post",
	"put",
	"patch"
], (method) => {
	defaults.headers[method] = {};
});
var defaults_default = defaults;

//#endregion
//#region node_modules/axios/lib/helpers/parseHeaders.js
var ignoreDuplicateOf = utils_default.toObjectSet([
	"age",
	"authorization",
	"content-length",
	"content-type",
	"etag",
	"expires",
	"from",
	"host",
	"if-modified-since",
	"if-unmodified-since",
	"last-modified",
	"location",
	"max-forwards",
	"proxy-authorization",
	"referer",
	"retry-after",
	"user-agent"
]);
/**
* Parse headers into an object
*
* ```
* Date: Wed, 27 Aug 2014 08:58:49 GMT
* Content-Type: application/json
* Connection: keep-alive
* Transfer-Encoding: chunked
* ```
*
* @param {String} rawHeaders Headers needing to be parsed
*
* @returns {Object} Headers parsed into an object
*/
var parseHeaders_default = (rawHeaders) => {
	const parsed = {};
	let key;
	let val;
	let i$1;
	rawHeaders && rawHeaders.split("\n").forEach(function parser(line) {
		i$1 = line.indexOf(":");
		key = line.substring(0, i$1).trim().toLowerCase();
		val = line.substring(i$1 + 1).trim();
		if (!key || parsed[key] && ignoreDuplicateOf[key]) return;
		if (key === "set-cookie") if (parsed[key]) parsed[key].push(val);
		else parsed[key] = [val];
		else parsed[key] = parsed[key] ? parsed[key] + ", " + val : val;
	});
	return parsed;
};

//#endregion
//#region node_modules/axios/lib/core/AxiosHeaders.js
var $internals = Symbol("internals");
function normalizeHeader(header) {
	return header && String(header).trim().toLowerCase();
}
function normalizeValue(value) {
	if (value === false || value == null) return value;
	return utils_default.isArray(value) ? value.map(normalizeValue) : String(value);
}
function parseTokens(str) {
	const tokens = Object.create(null);
	const tokensRE = /([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;
	let match;
	while (match = tokensRE.exec(str)) tokens[match[1]] = match[2];
	return tokens;
}
var isValidHeaderName = (str) => /^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(str.trim());
function matchHeaderValue(context, value, header, filter, isHeaderNameFilter) {
	if (utils_default.isFunction(filter)) return filter.call(this, value, header);
	if (isHeaderNameFilter) value = header;
	if (!utils_default.isString(value)) return;
	if (utils_default.isString(filter)) return value.indexOf(filter) !== -1;
	if (utils_default.isRegExp(filter)) return filter.test(value);
}
function formatHeader(header) {
	return header.trim().toLowerCase().replace(/([a-z\d])(\w*)/g, (w$1, char, str) => {
		return char.toUpperCase() + str;
	});
}
function buildAccessors(obj, header) {
	const accessorName = utils_default.toCamelCase(" " + header);
	[
		"get",
		"set",
		"has"
	].forEach((methodName) => {
		Object.defineProperty(obj, methodName + accessorName, {
			value: function(arg1, arg2, arg3) {
				return this[methodName].call(this, header, arg1, arg2, arg3);
			},
			configurable: true
		});
	});
}
var AxiosHeaders$1 = class {
	constructor(headers) {
		headers && this.set(headers);
	}
	set(header, valueOrRewrite, rewrite) {
		const self$1 = this;
		function setHeader(_value, _header, _rewrite) {
			const lHeader = normalizeHeader(_header);
			if (!lHeader) throw new Error("header name must be a non-empty string");
			const key = utils_default.findKey(self$1, lHeader);
			if (!key || self$1[key] === void 0 || _rewrite === true || _rewrite === void 0 && self$1[key] !== false) self$1[key || _header] = normalizeValue(_value);
		}
		const setHeaders = (headers, _rewrite) => utils_default.forEach(headers, (_value, _header) => setHeader(_value, _header, _rewrite));
		if (utils_default.isPlainObject(header) || header instanceof this.constructor) setHeaders(header, valueOrRewrite);
		else if (utils_default.isString(header) && (header = header.trim()) && !isValidHeaderName(header)) setHeaders(parseHeaders_default(header), valueOrRewrite);
		else if (utils_default.isObject(header) && utils_default.isIterable(header)) {
			let obj = {}, dest, key;
			for (const entry of header) {
				if (!utils_default.isArray(entry)) throw TypeError("Object iterator must return a key-value pair");
				obj[key = entry[0]] = (dest = obj[key]) ? utils_default.isArray(dest) ? [...dest, entry[1]] : [dest, entry[1]] : entry[1];
			}
			setHeaders(obj, valueOrRewrite);
		} else header != null && setHeader(valueOrRewrite, header, rewrite);
		return this;
	}
	get(header, parser) {
		header = normalizeHeader(header);
		if (header) {
			const key = utils_default.findKey(this, header);
			if (key) {
				const value = this[key];
				if (!parser) return value;
				if (parser === true) return parseTokens(value);
				if (utils_default.isFunction(parser)) return parser.call(this, value, key);
				if (utils_default.isRegExp(parser)) return parser.exec(value);
				throw new TypeError("parser must be boolean|regexp|function");
			}
		}
	}
	has(header, matcher) {
		header = normalizeHeader(header);
		if (header) {
			const key = utils_default.findKey(this, header);
			return !!(key && this[key] !== void 0 && (!matcher || matchHeaderValue(this, this[key], key, matcher)));
		}
		return false;
	}
	delete(header, matcher) {
		const self$1 = this;
		let deleted = false;
		function deleteHeader(_header) {
			_header = normalizeHeader(_header);
			if (_header) {
				const key = utils_default.findKey(self$1, _header);
				if (key && (!matcher || matchHeaderValue(self$1, self$1[key], key, matcher))) {
					delete self$1[key];
					deleted = true;
				}
			}
		}
		if (utils_default.isArray(header)) header.forEach(deleteHeader);
		else deleteHeader(header);
		return deleted;
	}
	clear(matcher) {
		const keys = Object.keys(this);
		let i$1 = keys.length;
		let deleted = false;
		while (i$1--) {
			const key = keys[i$1];
			if (!matcher || matchHeaderValue(this, this[key], key, matcher, true)) {
				delete this[key];
				deleted = true;
			}
		}
		return deleted;
	}
	normalize(format) {
		const self$1 = this;
		const headers = {};
		utils_default.forEach(this, (value, header) => {
			const key = utils_default.findKey(headers, header);
			if (key) {
				self$1[key] = normalizeValue(value);
				delete self$1[header];
				return;
			}
			const normalized = format ? formatHeader(header) : String(header).trim();
			if (normalized !== header) delete self$1[header];
			self$1[normalized] = normalizeValue(value);
			headers[normalized] = true;
		});
		return this;
	}
	concat(...targets) {
		return this.constructor.concat(this, ...targets);
	}
	toJSON(asStrings) {
		const obj = Object.create(null);
		utils_default.forEach(this, (value, header) => {
			value != null && value !== false && (obj[header] = asStrings && utils_default.isArray(value) ? value.join(", ") : value);
		});
		return obj;
	}
	[Symbol.iterator]() {
		return Object.entries(this.toJSON())[Symbol.iterator]();
	}
	toString() {
		return Object.entries(this.toJSON()).map(([header, value]) => header + ": " + value).join("\n");
	}
	getSetCookie() {
		return this.get("set-cookie") || [];
	}
	get [Symbol.toStringTag]() {
		return "AxiosHeaders";
	}
	static from(thing) {
		return thing instanceof this ? thing : new this(thing);
	}
	static concat(first, ...targets) {
		const computed = new this(first);
		targets.forEach((target) => computed.set(target));
		return computed;
	}
	static accessor(header) {
		const accessors = (this[$internals] = this[$internals] = { accessors: {} }).accessors;
		const prototype$2 = this.prototype;
		function defineAccessor(_header) {
			const lHeader = normalizeHeader(_header);
			if (!accessors[lHeader]) {
				buildAccessors(prototype$2, _header);
				accessors[lHeader] = true;
			}
		}
		utils_default.isArray(header) ? header.forEach(defineAccessor) : defineAccessor(header);
		return this;
	}
};
AxiosHeaders$1.accessor([
	"Content-Type",
	"Content-Length",
	"Accept",
	"Accept-Encoding",
	"User-Agent",
	"Authorization"
]);
utils_default.reduceDescriptors(AxiosHeaders$1.prototype, ({ value }, key) => {
	let mapped = key[0].toUpperCase() + key.slice(1);
	return {
		get: () => value,
		set(headerValue) {
			this[mapped] = headerValue;
		}
	};
});
utils_default.freezeMethods(AxiosHeaders$1);
var AxiosHeaders_default = AxiosHeaders$1;

//#endregion
//#region node_modules/axios/lib/core/transformData.js
/**
* Transform the data for a request or a response
*
* @param {Array|Function} fns A single function or Array of functions
* @param {?Object} response The response object
*
* @returns {*} The resulting transformed data
*/
function transformData(fns, response) {
	const config = this || defaults_default;
	const context = response || config;
	const headers = AxiosHeaders_default.from(context.headers);
	let data = context.data;
	utils_default.forEach(fns, function transform(fn$1) {
		data = fn$1.call(config, data, headers.normalize(), response ? response.status : void 0);
	});
	headers.normalize();
	return data;
}

//#endregion
//#region node_modules/axios/lib/cancel/isCancel.js
function isCancel$1(value) {
	return !!(value && value.__CANCEL__);
}

//#endregion
//#region node_modules/axios/lib/cancel/CanceledError.js
/**
* A `CanceledError` is an object that is thrown when an operation is canceled.
*
* @param {string=} message The message.
* @param {Object=} config The config.
* @param {Object=} request The request.
*
* @returns {CanceledError} The created error.
*/
function CanceledError$1(message, config, request) {
	AxiosError_default.call(this, message == null ? "canceled" : message, AxiosError_default.ERR_CANCELED, config, request);
	this.name = "CanceledError";
}
utils_default.inherits(CanceledError$1, AxiosError_default, { __CANCEL__: true });
var CanceledError_default = CanceledError$1;

//#endregion
//#region node_modules/axios/lib/core/settle.js
/**
* Resolve or reject a Promise based on response status.
*
* @param {Function} resolve A function that resolves the promise.
* @param {Function} reject A function that rejects the promise.
* @param {object} response The response.
*
* @returns {object} The response.
*/
function settle(resolve, reject, response) {
	const validateStatus = response.config.validateStatus;
	if (!response.status || !validateStatus || validateStatus(response.status)) resolve(response);
	else reject(new AxiosError_default("Request failed with status code " + response.status, [AxiosError_default.ERR_BAD_REQUEST, AxiosError_default.ERR_BAD_RESPONSE][Math.floor(response.status / 100) - 4], response.config, response.request, response));
}

//#endregion
//#region node_modules/axios/lib/helpers/parseProtocol.js
function parseProtocol(url) {
	const match = /^([-+\w]{1,25})(:?\/\/|:)/.exec(url);
	return match && match[1] || "";
}

//#endregion
//#region node_modules/axios/lib/helpers/speedometer.js
/**
* Calculate data maxRate
* @param {Number} [samplesCount= 10]
* @param {Number} [min= 1000]
* @returns {Function}
*/
function speedometer(samplesCount, min) {
	samplesCount = samplesCount || 10;
	const bytes = new Array(samplesCount);
	const timestamps = new Array(samplesCount);
	let head = 0;
	let tail = 0;
	let firstSampleTS;
	min = min !== void 0 ? min : 1e3;
	return function push(chunkLength) {
		const now = Date.now();
		const startedAt = timestamps[tail];
		if (!firstSampleTS) firstSampleTS = now;
		bytes[head] = chunkLength;
		timestamps[head] = now;
		let i$1 = tail;
		let bytesCount = 0;
		while (i$1 !== head) {
			bytesCount += bytes[i$1++];
			i$1 = i$1 % samplesCount;
		}
		head = (head + 1) % samplesCount;
		if (head === tail) tail = (tail + 1) % samplesCount;
		if (now - firstSampleTS < min) return;
		const passed = startedAt && now - startedAt;
		return passed ? Math.round(bytesCount * 1e3 / passed) : void 0;
	};
}
var speedometer_default = speedometer;

//#endregion
//#region node_modules/axios/lib/helpers/throttle.js
/**
* Throttle decorator
* @param {Function} fn
* @param {Number} freq
* @return {Function}
*/
function throttle(fn$1, freq) {
	let timestamp = 0;
	let threshold = 1e3 / freq;
	let lastArgs;
	let timer;
	const invoke = (args, now = Date.now()) => {
		timestamp = now;
		lastArgs = null;
		if (timer) {
			clearTimeout(timer);
			timer = null;
		}
		fn$1(...args);
	};
	const throttled = (...args) => {
		const now = Date.now();
		const passed = now - timestamp;
		if (passed >= threshold) invoke(args, now);
		else {
			lastArgs = args;
			if (!timer) timer = setTimeout(() => {
				timer = null;
				invoke(lastArgs);
			}, threshold - passed);
		}
	};
	const flush = () => lastArgs && invoke(lastArgs);
	return [throttled, flush];
}
var throttle_default = throttle;

//#endregion
//#region node_modules/axios/lib/helpers/progressEventReducer.js
const progressEventReducer = (listener, isDownloadStream, freq = 3) => {
	let bytesNotified = 0;
	const _speedometer = speedometer_default(50, 250);
	return throttle_default((e$1) => {
		const loaded = e$1.loaded;
		const total = e$1.lengthComputable ? e$1.total : void 0;
		const progressBytes = loaded - bytesNotified;
		const rate = _speedometer(progressBytes);
		const inRange = loaded <= total;
		bytesNotified = loaded;
		const data = {
			loaded,
			total,
			progress: total ? loaded / total : void 0,
			bytes: progressBytes,
			rate: rate ? rate : void 0,
			estimated: rate && total && inRange ? (total - loaded) / rate : void 0,
			event: e$1,
			lengthComputable: total != null,
			[isDownloadStream ? "download" : "upload"]: true
		};
		listener(data);
	}, freq);
};
const progressEventDecorator = (total, throttled) => {
	const lengthComputable = total != null;
	return [(loaded) => throttled[0]({
		lengthComputable,
		total,
		loaded
	}), throttled[1]];
};
const asyncDecorator = (fn$1) => (...args) => utils_default.asap(() => fn$1(...args));

//#endregion
//#region node_modules/axios/lib/helpers/isURLSameOrigin.js
var isURLSameOrigin_default = platform_default.hasStandardBrowserEnv ? ((origin$1, isMSIE) => (url) => {
	url = new URL(url, platform_default.origin);
	return origin$1.protocol === url.protocol && origin$1.host === url.host && (isMSIE || origin$1.port === url.port);
})(new URL(platform_default.origin), platform_default.navigator && /(msie|trident)/i.test(platform_default.navigator.userAgent)) : () => true;

//#endregion
//#region node_modules/axios/lib/helpers/cookies.js
var cookies_default = platform_default.hasStandardBrowserEnv ? {
	write(name$1, value, expires, path, domain, secure, sameSite) {
		if (typeof document === "undefined") return;
		const cookie = [`${name$1}=${encodeURIComponent(value)}`];
		if (utils_default.isNumber(expires)) cookie.push(`expires=${new Date(expires).toUTCString()}`);
		if (utils_default.isString(path)) cookie.push(`path=${path}`);
		if (utils_default.isString(domain)) cookie.push(`domain=${domain}`);
		if (secure === true) cookie.push("secure");
		if (utils_default.isString(sameSite)) cookie.push(`SameSite=${sameSite}`);
		document.cookie = cookie.join("; ");
	},
	read(name$1) {
		if (typeof document === "undefined") return null;
		const match = document.cookie.match(/* @__PURE__ */ new RegExp("(?:^|; )" + name$1 + "=([^;]*)"));
		return match ? decodeURIComponent(match[1]) : null;
	},
	remove(name$1) {
		this.write(name$1, "", Date.now() - 864e5, "/");
	}
} : {
	write() {},
	read() {
		return null;
	},
	remove() {}
};

//#endregion
//#region node_modules/axios/lib/helpers/isAbsoluteURL.js
/**
* Determines whether the specified URL is absolute
*
* @param {string} url The URL to test
*
* @returns {boolean} True if the specified URL is absolute, otherwise false
*/
function isAbsoluteURL(url) {
	return /^([a-z][a-z\d+\-.]*:)?\/\//i.test(url);
}

//#endregion
//#region node_modules/axios/lib/helpers/combineURLs.js
/**
* Creates a new URL by combining the specified URLs
*
* @param {string} baseURL The base URL
* @param {string} relativeURL The relative URL
*
* @returns {string} The combined URL
*/
function combineURLs(baseURL, relativeURL) {
	return relativeURL ? baseURL.replace(/\/?\/$/, "") + "/" + relativeURL.replace(/^\/+/, "") : baseURL;
}

//#endregion
//#region node_modules/axios/lib/core/buildFullPath.js
/**
* Creates a new URL by combining the baseURL with the requestedURL,
* only when the requestedURL is not already an absolute URL.
* If the requestURL is absolute, this function returns the requestedURL untouched.
*
* @param {string} baseURL The base URL
* @param {string} requestedURL Absolute or relative URL to combine
*
* @returns {string} The combined full path
*/
function buildFullPath(baseURL, requestedURL, allowAbsoluteUrls) {
	let isRelativeUrl = !isAbsoluteURL(requestedURL);
	if (baseURL && (isRelativeUrl || allowAbsoluteUrls == false)) return combineURLs(baseURL, requestedURL);
	return requestedURL;
}

//#endregion
//#region node_modules/axios/lib/core/mergeConfig.js
var headersToObject = (thing) => thing instanceof AxiosHeaders_default ? { ...thing } : thing;
/**
* Config-specific merge-function which creates a new config-object
* by merging two configuration objects together.
*
* @param {Object} config1
* @param {Object} config2
*
* @returns {Object} New object resulting from merging config2 to config1
*/
function mergeConfig$1(config1, config2) {
	config2 = config2 || {};
	const config = {};
	function getMergedValue(target, source, prop, caseless) {
		if (utils_default.isPlainObject(target) && utils_default.isPlainObject(source)) return utils_default.merge.call({ caseless }, target, source);
		else if (utils_default.isPlainObject(source)) return utils_default.merge({}, source);
		else if (utils_default.isArray(source)) return source.slice();
		return source;
	}
	function mergeDeepProperties(a$1, b$1, prop, caseless) {
		if (!utils_default.isUndefined(b$1)) return getMergedValue(a$1, b$1, prop, caseless);
		else if (!utils_default.isUndefined(a$1)) return getMergedValue(void 0, a$1, prop, caseless);
	}
	function valueFromConfig2(a$1, b$1) {
		if (!utils_default.isUndefined(b$1)) return getMergedValue(void 0, b$1);
	}
	function defaultToConfig2(a$1, b$1) {
		if (!utils_default.isUndefined(b$1)) return getMergedValue(void 0, b$1);
		else if (!utils_default.isUndefined(a$1)) return getMergedValue(void 0, a$1);
	}
	function mergeDirectKeys(a$1, b$1, prop) {
		if (prop in config2) return getMergedValue(a$1, b$1);
		else if (prop in config1) return getMergedValue(void 0, a$1);
	}
	const mergeMap = {
		url: valueFromConfig2,
		method: valueFromConfig2,
		data: valueFromConfig2,
		baseURL: defaultToConfig2,
		transformRequest: defaultToConfig2,
		transformResponse: defaultToConfig2,
		paramsSerializer: defaultToConfig2,
		timeout: defaultToConfig2,
		timeoutMessage: defaultToConfig2,
		withCredentials: defaultToConfig2,
		withXSRFToken: defaultToConfig2,
		adapter: defaultToConfig2,
		responseType: defaultToConfig2,
		xsrfCookieName: defaultToConfig2,
		xsrfHeaderName: defaultToConfig2,
		onUploadProgress: defaultToConfig2,
		onDownloadProgress: defaultToConfig2,
		decompress: defaultToConfig2,
		maxContentLength: defaultToConfig2,
		maxBodyLength: defaultToConfig2,
		beforeRedirect: defaultToConfig2,
		transport: defaultToConfig2,
		httpAgent: defaultToConfig2,
		httpsAgent: defaultToConfig2,
		cancelToken: defaultToConfig2,
		socketPath: defaultToConfig2,
		responseEncoding: defaultToConfig2,
		validateStatus: mergeDirectKeys,
		headers: (a$1, b$1, prop) => mergeDeepProperties(headersToObject(a$1), headersToObject(b$1), prop, true)
	};
	utils_default.forEach(Object.keys({
		...config1,
		...config2
	}), function computeConfigValue(prop) {
		const merge$1 = mergeMap[prop] || mergeDeepProperties;
		const configValue = merge$1(config1[prop], config2[prop], prop);
		utils_default.isUndefined(configValue) && merge$1 !== mergeDirectKeys || (config[prop] = configValue);
	});
	return config;
}

//#endregion
//#region node_modules/axios/lib/helpers/resolveConfig.js
var resolveConfig_default = (config) => {
	const newConfig = mergeConfig$1({}, config);
	let { data, withXSRFToken, xsrfHeaderName, xsrfCookieName, headers, auth } = newConfig;
	newConfig.headers = headers = AxiosHeaders_default.from(headers);
	newConfig.url = buildURL(buildFullPath(newConfig.baseURL, newConfig.url, newConfig.allowAbsoluteUrls), config.params, config.paramsSerializer);
	if (auth) headers.set("Authorization", "Basic " + btoa((auth.username || "") + ":" + (auth.password ? unescape(encodeURIComponent(auth.password)) : "")));
	if (utils_default.isFormData(data)) {
		if (platform_default.hasStandardBrowserEnv || platform_default.hasStandardBrowserWebWorkerEnv) headers.setContentType(void 0);
		else if (utils_default.isFunction(data.getHeaders)) {
			const formHeaders = data.getHeaders();
			const allowedHeaders = ["content-type", "content-length"];
			Object.entries(formHeaders).forEach(([key, val]) => {
				if (allowedHeaders.includes(key.toLowerCase())) headers.set(key, val);
			});
		}
	}
	if (platform_default.hasStandardBrowserEnv) {
		withXSRFToken && utils_default.isFunction(withXSRFToken) && (withXSRFToken = withXSRFToken(newConfig));
		if (withXSRFToken || withXSRFToken !== false && isURLSameOrigin_default(newConfig.url)) {
			const xsrfValue = xsrfHeaderName && xsrfCookieName && cookies_default.read(xsrfCookieName);
			if (xsrfValue) headers.set(xsrfHeaderName, xsrfValue);
		}
	}
	return newConfig;
};

//#endregion
//#region node_modules/axios/lib/adapters/xhr.js
var isXHRAdapterSupported = typeof XMLHttpRequest !== "undefined";
var xhr_default = isXHRAdapterSupported && function(config) {
	return new Promise(function dispatchXhrRequest(resolve, reject) {
		const _config = resolveConfig_default(config);
		let requestData = _config.data;
		const requestHeaders = AxiosHeaders_default.from(_config.headers).normalize();
		let { responseType, onUploadProgress, onDownloadProgress } = _config;
		let onCanceled;
		let uploadThrottled, downloadThrottled;
		let flushUpload, flushDownload;
		function done() {
			flushUpload && flushUpload();
			flushDownload && flushDownload();
			_config.cancelToken && _config.cancelToken.unsubscribe(onCanceled);
			_config.signal && _config.signal.removeEventListener("abort", onCanceled);
		}
		let request = new XMLHttpRequest();
		request.open(_config.method.toUpperCase(), _config.url, true);
		request.timeout = _config.timeout;
		function onloadend() {
			if (!request) return;
			const responseHeaders = AxiosHeaders_default.from("getAllResponseHeaders" in request && request.getAllResponseHeaders());
			const response = {
				data: !responseType || responseType === "text" || responseType === "json" ? request.responseText : request.response,
				status: request.status,
				statusText: request.statusText,
				headers: responseHeaders,
				config,
				request
			};
			settle(function _resolve(value) {
				resolve(value);
				done();
			}, function _reject(err) {
				reject(err);
				done();
			}, response);
			request = null;
		}
		if ("onloadend" in request) request.onloadend = onloadend;
		else request.onreadystatechange = function handleLoad() {
			if (!request || request.readyState !== 4) return;
			if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf("file:") === 0)) return;
			setTimeout(onloadend);
		};
		request.onabort = function handleAbort() {
			if (!request) return;
			reject(new AxiosError_default("Request aborted", AxiosError_default.ECONNABORTED, config, request));
			request = null;
		};
		request.onerror = function handleError(event) {
			const msg = event && event.message ? event.message : "Network Error";
			const err = new AxiosError_default(msg, AxiosError_default.ERR_NETWORK, config, request);
			err.event = event || null;
			reject(err);
			request = null;
		};
		request.ontimeout = function handleTimeout() {
			let timeoutErrorMessage = _config.timeout ? "timeout of " + _config.timeout + "ms exceeded" : "timeout exceeded";
			const transitional = _config.transitional || transitional_default;
			if (_config.timeoutErrorMessage) timeoutErrorMessage = _config.timeoutErrorMessage;
			reject(new AxiosError_default(timeoutErrorMessage, transitional.clarifyTimeoutError ? AxiosError_default.ETIMEDOUT : AxiosError_default.ECONNABORTED, config, request));
			request = null;
		};
		requestData === void 0 && requestHeaders.setContentType(null);
		if ("setRequestHeader" in request) utils_default.forEach(requestHeaders.toJSON(), function setRequestHeader(val, key) {
			request.setRequestHeader(key, val);
		});
		if (!utils_default.isUndefined(_config.withCredentials)) request.withCredentials = !!_config.withCredentials;
		if (responseType && responseType !== "json") request.responseType = _config.responseType;
		if (onDownloadProgress) {
			[downloadThrottled, flushDownload] = progressEventReducer(onDownloadProgress, true);
			request.addEventListener("progress", downloadThrottled);
		}
		if (onUploadProgress && request.upload) {
			[uploadThrottled, flushUpload] = progressEventReducer(onUploadProgress);
			request.upload.addEventListener("progress", uploadThrottled);
			request.upload.addEventListener("loadend", flushUpload);
		}
		if (_config.cancelToken || _config.signal) {
			onCanceled = (cancel) => {
				if (!request) return;
				reject(!cancel || cancel.type ? new CanceledError_default(null, config, request) : cancel);
				request.abort();
				request = null;
			};
			_config.cancelToken && _config.cancelToken.subscribe(onCanceled);
			if (_config.signal) _config.signal.aborted ? onCanceled() : _config.signal.addEventListener("abort", onCanceled);
		}
		const protocol = parseProtocol(_config.url);
		if (protocol && platform_default.protocols.indexOf(protocol) === -1) {
			reject(new AxiosError_default("Unsupported protocol " + protocol + ":", AxiosError_default.ERR_BAD_REQUEST, config));
			return;
		}
		request.send(requestData || null);
	});
};

//#endregion
//#region node_modules/axios/lib/helpers/composeSignals.js
var composeSignals = (signals, timeout) => {
	const { length } = signals = signals ? signals.filter(Boolean) : [];
	if (timeout || length) {
		let controller = new AbortController();
		let aborted;
		const onabort = function(reason) {
			if (!aborted) {
				aborted = true;
				unsubscribe();
				const err = reason instanceof Error ? reason : this.reason;
				controller.abort(err instanceof AxiosError_default ? err : new CanceledError_default(err instanceof Error ? err.message : err));
			}
		};
		let timer = timeout && setTimeout(() => {
			timer = null;
			onabort(new AxiosError_default(`timeout ${timeout} of ms exceeded`, AxiosError_default.ETIMEDOUT));
		}, timeout);
		const unsubscribe = () => {
			if (signals) {
				timer && clearTimeout(timer);
				timer = null;
				signals.forEach((signal$1) => {
					signal$1.unsubscribe ? signal$1.unsubscribe(onabort) : signal$1.removeEventListener("abort", onabort);
				});
				signals = null;
			}
		};
		signals.forEach((signal$1) => signal$1.addEventListener("abort", onabort));
		const { signal } = controller;
		signal.unsubscribe = () => utils_default.asap(unsubscribe);
		return signal;
	}
};
var composeSignals_default = composeSignals;

//#endregion
//#region node_modules/axios/lib/helpers/trackStream.js
const streamChunk = function* (chunk, chunkSize) {
	let len = chunk.byteLength;
	if (!chunkSize || len < chunkSize) {
		yield chunk;
		return;
	}
	let pos = 0;
	let end;
	while (pos < len) {
		end = pos + chunkSize;
		yield chunk.slice(pos, end);
		pos = end;
	}
};
const readBytes = async function* (iterable, chunkSize) {
	for await (const chunk of readStream(iterable)) yield* streamChunk(chunk, chunkSize);
};
var readStream = async function* (stream) {
	if (stream[Symbol.asyncIterator]) {
		yield* stream;
		return;
	}
	const reader = stream.getReader();
	try {
		for (;;) {
			const { done, value } = await reader.read();
			if (done) break;
			yield value;
		}
	} finally {
		await reader.cancel();
	}
};
const trackStream = (stream, chunkSize, onProgress, onFinish) => {
	const iterator$1 = readBytes(stream, chunkSize);
	let bytes = 0;
	let done;
	let _onFinish = (e$1) => {
		if (!done) {
			done = true;
			onFinish && onFinish(e$1);
		}
	};
	return new ReadableStream({
		async pull(controller) {
			try {
				const { done: done$1, value } = await iterator$1.next();
				if (done$1) {
					_onFinish();
					controller.close();
					return;
				}
				let len = value.byteLength;
				if (onProgress) {
					let loadedBytes = bytes += len;
					onProgress(loadedBytes);
				}
				controller.enqueue(new Uint8Array(value));
			} catch (err) {
				_onFinish(err);
				throw err;
			}
		},
		cancel(reason) {
			_onFinish(reason);
			return iterator$1.return();
		}
	}, { highWaterMark: 2 });
};

//#endregion
//#region node_modules/axios/lib/adapters/fetch.js
var DEFAULT_CHUNK_SIZE = 64 * 1024;
var { isFunction } = utils_default;
var globalFetchAPI = (({ Request, Response }) => ({
	Request,
	Response
}))(utils_default.global);
var { ReadableStream: ReadableStream$1, TextEncoder } = utils_default.global;
var test = (fn$1, ...args) => {
	try {
		return !!fn$1(...args);
	} catch (e$1) {
		return false;
	}
};
var factory = (env) => {
	env = utils_default.merge.call({ skipUndefined: true }, globalFetchAPI, env);
	const { fetch: envFetch, Request, Response } = env;
	const isFetchSupported = envFetch ? isFunction(envFetch) : typeof fetch === "function";
	const isRequestSupported = isFunction(Request);
	const isResponseSupported = isFunction(Response);
	if (!isFetchSupported) return false;
	const isReadableStreamSupported = isFetchSupported && isFunction(ReadableStream$1);
	const encodeText = isFetchSupported && (typeof TextEncoder === "function" ? ((encoder) => (str) => encoder.encode(str))(new TextEncoder()) : async (str) => new Uint8Array(await new Request(str).arrayBuffer()));
	const supportsRequestStream = isRequestSupported && isReadableStreamSupported && test(() => {
		let duplexAccessed = false;
		const hasContentType = new Request(platform_default.origin, {
			body: new ReadableStream$1(),
			method: "POST",
			get duplex() {
				duplexAccessed = true;
				return "half";
			}
		}).headers.has("Content-Type");
		return duplexAccessed && !hasContentType;
	});
	const supportsResponseStream = isResponseSupported && isReadableStreamSupported && test(() => utils_default.isReadableStream(new Response("").body));
	const resolvers = { stream: supportsResponseStream && ((res) => res.body) };
	isFetchSupported && [
		"text",
		"arrayBuffer",
		"blob",
		"formData",
		"stream"
	].forEach((type) => {
		!resolvers[type] && (resolvers[type] = (res, config) => {
			let method = res && res[type];
			if (method) return method.call(res);
			throw new AxiosError_default(`Response type '${type}' is not supported`, AxiosError_default.ERR_NOT_SUPPORT, config);
		});
	});
	const getBodyLength = async (body) => {
		if (body == null) return 0;
		if (utils_default.isBlob(body)) return body.size;
		if (utils_default.isSpecCompliantForm(body)) return (await new Request(platform_default.origin, {
			method: "POST",
			body
		}).arrayBuffer()).byteLength;
		if (utils_default.isArrayBufferView(body) || utils_default.isArrayBuffer(body)) return body.byteLength;
		if (utils_default.isURLSearchParams(body)) body = body + "";
		if (utils_default.isString(body)) return (await encodeText(body)).byteLength;
	};
	const resolveBodyLength = async (headers, body) => {
		const length = utils_default.toFiniteNumber(headers.getContentLength());
		return length == null ? getBodyLength(body) : length;
	};
	return async (config) => {
		let { url, method, data, signal, cancelToken, timeout, onDownloadProgress, onUploadProgress, responseType, headers, withCredentials = "same-origin", fetchOptions } = resolveConfig_default(config);
		let _fetch = envFetch || fetch;
		responseType = responseType ? (responseType + "").toLowerCase() : "text";
		let composedSignal = composeSignals_default([signal, cancelToken && cancelToken.toAbortSignal()], timeout);
		let request = null;
		const unsubscribe = composedSignal && composedSignal.unsubscribe && (() => {
			composedSignal.unsubscribe();
		});
		let requestContentLength;
		try {
			if (onUploadProgress && supportsRequestStream && method !== "get" && method !== "head" && (requestContentLength = await resolveBodyLength(headers, data)) !== 0) {
				let _request = new Request(url, {
					method: "POST",
					body: data,
					duplex: "half"
				});
				let contentTypeHeader;
				if (utils_default.isFormData(data) && (contentTypeHeader = _request.headers.get("content-type"))) headers.setContentType(contentTypeHeader);
				if (_request.body) {
					const [onProgress, flush] = progressEventDecorator(requestContentLength, progressEventReducer(asyncDecorator(onUploadProgress)));
					data = trackStream(_request.body, DEFAULT_CHUNK_SIZE, onProgress, flush);
				}
			}
			if (!utils_default.isString(withCredentials)) withCredentials = withCredentials ? "include" : "omit";
			const isCredentialsSupported = isRequestSupported && "credentials" in Request.prototype;
			const resolvedOptions = {
				...fetchOptions,
				signal: composedSignal,
				method: method.toUpperCase(),
				headers: headers.normalize().toJSON(),
				body: data,
				duplex: "half",
				credentials: isCredentialsSupported ? withCredentials : void 0
			};
			request = isRequestSupported && new Request(url, resolvedOptions);
			let response = await (isRequestSupported ? _fetch(request, fetchOptions) : _fetch(url, resolvedOptions));
			const isStreamResponse = supportsResponseStream && (responseType === "stream" || responseType === "response");
			if (supportsResponseStream && (onDownloadProgress || isStreamResponse && unsubscribe)) {
				const options = {};
				[
					"status",
					"statusText",
					"headers"
				].forEach((prop) => {
					options[prop] = response[prop];
				});
				const responseContentLength = utils_default.toFiniteNumber(response.headers.get("content-length"));
				const [onProgress, flush] = onDownloadProgress && progressEventDecorator(responseContentLength, progressEventReducer(asyncDecorator(onDownloadProgress), true)) || [];
				response = new Response(trackStream(response.body, DEFAULT_CHUNK_SIZE, onProgress, () => {
					flush && flush();
					unsubscribe && unsubscribe();
				}), options);
			}
			responseType = responseType || "text";
			let responseData = await resolvers[utils_default.findKey(resolvers, responseType) || "text"](response, config);
			!isStreamResponse && unsubscribe && unsubscribe();
			return await new Promise((resolve, reject) => {
				settle(resolve, reject, {
					data: responseData,
					headers: AxiosHeaders_default.from(response.headers),
					status: response.status,
					statusText: response.statusText,
					config,
					request
				});
			});
		} catch (err) {
			unsubscribe && unsubscribe();
			if (err && err.name === "TypeError" && /Load failed|fetch/i.test(err.message)) throw Object.assign(new AxiosError_default("Network Error", AxiosError_default.ERR_NETWORK, config, request), { cause: err.cause || err });
			throw AxiosError_default.from(err, err && err.code, config, request);
		}
	};
};
var seedCache = /* @__PURE__ */ new Map();
const getFetch = (config) => {
	let env = config && config.env || {};
	const { fetch: fetch$1, Request, Response } = env;
	const seeds = [
		Request,
		Response,
		fetch$1
	];
	let i$1 = seeds.length, seed, target, map = seedCache;
	while (i$1--) {
		seed = seeds[i$1];
		target = map.get(seed);
		target === void 0 && map.set(seed, target = i$1 ? /* @__PURE__ */ new Map() : factory(env));
		map = target;
	}
	return target;
};
var adapter = getFetch();

//#endregion
//#region node_modules/axios/lib/adapters/adapters.js
/**
* Known adapters mapping.
* Provides environment-specific adapters for Axios:
* - `http` for Node.js
* - `xhr` for browsers
* - `fetch` for fetch API-based requests
* 
* @type {Object<string, Function|Object>}
*/
var knownAdapters = {
	http: null_default,
	xhr: xhr_default,
	fetch: { get: getFetch }
};
utils_default.forEach(knownAdapters, (fn$1, value) => {
	if (fn$1) {
		try {
			Object.defineProperty(fn$1, "name", { value });
		} catch (e$1) {}
		Object.defineProperty(fn$1, "adapterName", { value });
	}
});
/**
* Render a rejection reason string for unknown or unsupported adapters
* 
* @param {string} reason
* @returns {string}
*/
var renderReason = (reason) => `- ${reason}`;
/**
* Check if the adapter is resolved (function, null, or false)
* 
* @param {Function|null|false} adapter
* @returns {boolean}
*/
var isResolvedHandle = (adapter$1) => utils_default.isFunction(adapter$1) || adapter$1 === null || adapter$1 === false;
/**
* Get the first suitable adapter from the provided list.
* Tries each adapter in order until a supported one is found.
* Throws an AxiosError if no adapter is suitable.
* 
* @param {Array<string|Function>|string|Function} adapters - Adapter(s) by name or function.
* @param {Object} config - Axios request configuration
* @throws {AxiosError} If no suitable adapter is available
* @returns {Function} The resolved adapter function
*/
function getAdapter$1(adapters, config) {
	adapters = utils_default.isArray(adapters) ? adapters : [adapters];
	const { length } = adapters;
	let nameOrAdapter;
	let adapter$1;
	const rejectedReasons = {};
	for (let i$1 = 0; i$1 < length; i$1++) {
		nameOrAdapter = adapters[i$1];
		let id;
		adapter$1 = nameOrAdapter;
		if (!isResolvedHandle(nameOrAdapter)) {
			adapter$1 = knownAdapters[(id = String(nameOrAdapter)).toLowerCase()];
			if (adapter$1 === void 0) throw new AxiosError_default(`Unknown adapter '${id}'`);
		}
		if (adapter$1 && (utils_default.isFunction(adapter$1) || (adapter$1 = adapter$1.get(config)))) break;
		rejectedReasons[id || "#" + i$1] = adapter$1;
	}
	if (!adapter$1) {
		const reasons = Object.entries(rejectedReasons).map(([id, state]) => `adapter ${id} ` + (state === false ? "is not supported by the environment" : "is not available in the build"));
		let s$1 = length ? reasons.length > 1 ? "since :\n" + reasons.map(renderReason).join("\n") : " " + renderReason(reasons[0]) : "as no adapter specified";
		throw new AxiosError_default(`There is no suitable adapter to dispatch the request ` + s$1, "ERR_NOT_SUPPORT");
	}
	return adapter$1;
}
/**
* Exports Axios adapters and utility to resolve an adapter
*/
var adapters_default = {
	getAdapter: getAdapter$1,
	adapters: knownAdapters
};

//#endregion
//#region node_modules/axios/lib/core/dispatchRequest.js
/**
* Throws a `CanceledError` if cancellation has been requested.
*
* @param {Object} config The config that is to be used for the request
*
* @returns {void}
*/
function throwIfCancellationRequested(config) {
	if (config.cancelToken) config.cancelToken.throwIfRequested();
	if (config.signal && config.signal.aborted) throw new CanceledError_default(null, config);
}
/**
* Dispatch a request to the server using the configured adapter.
*
* @param {object} config The config that is to be used for the request
*
* @returns {Promise} The Promise to be fulfilled
*/
function dispatchRequest(config) {
	throwIfCancellationRequested(config);
	config.headers = AxiosHeaders_default.from(config.headers);
	config.data = transformData.call(config, config.transformRequest);
	if ([
		"post",
		"put",
		"patch"
	].indexOf(config.method) !== -1) config.headers.setContentType("application/x-www-form-urlencoded", false);
	return adapters_default.getAdapter(config.adapter || defaults_default.adapter, config)(config).then(function onAdapterResolution(response) {
		throwIfCancellationRequested(config);
		response.data = transformData.call(config, config.transformResponse, response);
		response.headers = AxiosHeaders_default.from(response.headers);
		return response;
	}, function onAdapterRejection(reason) {
		if (!isCancel$1(reason)) {
			throwIfCancellationRequested(config);
			if (reason && reason.response) {
				reason.response.data = transformData.call(config, config.transformResponse, reason.response);
				reason.response.headers = AxiosHeaders_default.from(reason.response.headers);
			}
		}
		return Promise.reject(reason);
	});
}

//#endregion
//#region node_modules/axios/lib/env/data.js
const VERSION$1 = "1.13.2";

//#endregion
//#region node_modules/axios/lib/helpers/validator.js
var validators$1 = {};
[
	"object",
	"boolean",
	"number",
	"function",
	"string",
	"symbol"
].forEach((type, i$1) => {
	validators$1[type] = function validator(thing) {
		return typeof thing === type || "a" + (i$1 < 1 ? "n " : " ") + type;
	};
});
var deprecatedWarnings = {};
/**
* Transitional option validator
*
* @param {function|boolean?} validator - set to false if the transitional option has been removed
* @param {string?} version - deprecated version / removed since version
* @param {string?} message - some message with additional info
*
* @returns {function}
*/
validators$1.transitional = function transitional(validator, version, message) {
	function formatMessage(opt, desc) {
		return "[Axios v" + VERSION$1 + "] Transitional option '" + opt + "'" + desc + (message ? ". " + message : "");
	}
	return (value, opt, opts) => {
		if (validator === false) throw new AxiosError_default(formatMessage(opt, " has been removed" + (version ? " in " + version : "")), AxiosError_default.ERR_DEPRECATED);
		if (version && !deprecatedWarnings[opt]) {
			deprecatedWarnings[opt] = true;
			console.warn(formatMessage(opt, " has been deprecated since v" + version + " and will be removed in the near future"));
		}
		return validator ? validator(value, opt, opts) : true;
	};
};
validators$1.spelling = function spelling(correctSpelling) {
	return (value, opt) => {
		console.warn(`${opt} is likely a misspelling of ${correctSpelling}`);
		return true;
	};
};
/**
* Assert object's properties type
*
* @param {object} options
* @param {object} schema
* @param {boolean?} allowUnknown
*
* @returns {object}
*/
function assertOptions(options, schema, allowUnknown) {
	if (typeof options !== "object") throw new AxiosError_default("options must be an object", AxiosError_default.ERR_BAD_OPTION_VALUE);
	const keys = Object.keys(options);
	let i$1 = keys.length;
	while (i$1-- > 0) {
		const opt = keys[i$1];
		const validator = schema[opt];
		if (validator) {
			const value = options[opt];
			const result = value === void 0 || validator(value, opt, options);
			if (result !== true) throw new AxiosError_default("option " + opt + " must be " + result, AxiosError_default.ERR_BAD_OPTION_VALUE);
			continue;
		}
		if (allowUnknown !== true) throw new AxiosError_default("Unknown option " + opt, AxiosError_default.ERR_BAD_OPTION);
	}
}
var validator_default = {
	assertOptions,
	validators: validators$1
};

//#endregion
//#region node_modules/axios/lib/core/Axios.js
var validators = validator_default.validators;
/**
* Create a new instance of Axios
*
* @param {Object} instanceConfig The default config for the instance
*
* @return {Axios} A new instance of Axios
*/
var Axios$1 = class {
	constructor(instanceConfig) {
		this.defaults = instanceConfig || {};
		this.interceptors = {
			request: new InterceptorManager_default(),
			response: new InterceptorManager_default()
		};
	}
	/**
	* Dispatch a request
	*
	* @param {String|Object} configOrUrl The config specific for this request (merged with this.defaults)
	* @param {?Object} config
	*
	* @returns {Promise} The Promise to be fulfilled
	*/
	async request(configOrUrl, config) {
		try {
			return await this._request(configOrUrl, config);
		} catch (err) {
			if (err instanceof Error) {
				let dummy = {};
				Error.captureStackTrace ? Error.captureStackTrace(dummy) : dummy = /* @__PURE__ */ new Error();
				const stack = dummy.stack ? dummy.stack.replace(/^.+\n/, "") : "";
				try {
					if (!err.stack) err.stack = stack;
					else if (stack && !String(err.stack).endsWith(stack.replace(/^.+\n.+\n/, ""))) err.stack += "\n" + stack;
				} catch (e$1) {}
			}
			throw err;
		}
	}
	_request(configOrUrl, config) {
		if (typeof configOrUrl === "string") {
			config = config || {};
			config.url = configOrUrl;
		} else config = configOrUrl || {};
		config = mergeConfig$1(this.defaults, config);
		const { transitional, paramsSerializer, headers } = config;
		if (transitional !== void 0) validator_default.assertOptions(transitional, {
			silentJSONParsing: validators.transitional(validators.boolean),
			forcedJSONParsing: validators.transitional(validators.boolean),
			clarifyTimeoutError: validators.transitional(validators.boolean)
		}, false);
		if (paramsSerializer != null) if (utils_default.isFunction(paramsSerializer)) config.paramsSerializer = { serialize: paramsSerializer };
		else validator_default.assertOptions(paramsSerializer, {
			encode: validators.function,
			serialize: validators.function
		}, true);
		if (config.allowAbsoluteUrls !== void 0) {} else if (this.defaults.allowAbsoluteUrls !== void 0) config.allowAbsoluteUrls = this.defaults.allowAbsoluteUrls;
		else config.allowAbsoluteUrls = true;
		validator_default.assertOptions(config, {
			baseUrl: validators.spelling("baseURL"),
			withXsrfToken: validators.spelling("withXSRFToken")
		}, true);
		config.method = (config.method || this.defaults.method || "get").toLowerCase();
		let contextHeaders = headers && utils_default.merge(headers.common, headers[config.method]);
		headers && utils_default.forEach([
			"delete",
			"get",
			"head",
			"post",
			"put",
			"patch",
			"common"
		], (method) => {
			delete headers[method];
		});
		config.headers = AxiosHeaders_default.concat(contextHeaders, headers);
		const requestInterceptorChain = [];
		let synchronousRequestInterceptors = true;
		this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {
			if (typeof interceptor.runWhen === "function" && interceptor.runWhen(config) === false) return;
			synchronousRequestInterceptors = synchronousRequestInterceptors && interceptor.synchronous;
			requestInterceptorChain.unshift(interceptor.fulfilled, interceptor.rejected);
		});
		const responseInterceptorChain = [];
		this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {
			responseInterceptorChain.push(interceptor.fulfilled, interceptor.rejected);
		});
		let promise;
		let i$1 = 0;
		let len;
		if (!synchronousRequestInterceptors) {
			const chain = [dispatchRequest.bind(this), void 0];
			chain.unshift(...requestInterceptorChain);
			chain.push(...responseInterceptorChain);
			len = chain.length;
			promise = Promise.resolve(config);
			while (i$1 < len) promise = promise.then(chain[i$1++], chain[i$1++]);
			return promise;
		}
		len = requestInterceptorChain.length;
		let newConfig = config;
		while (i$1 < len) {
			const onFulfilled = requestInterceptorChain[i$1++];
			const onRejected = requestInterceptorChain[i$1++];
			try {
				newConfig = onFulfilled(newConfig);
			} catch (error) {
				onRejected.call(this, error);
				break;
			}
		}
		try {
			promise = dispatchRequest.call(this, newConfig);
		} catch (error) {
			return Promise.reject(error);
		}
		i$1 = 0;
		len = responseInterceptorChain.length;
		while (i$1 < len) promise = promise.then(responseInterceptorChain[i$1++], responseInterceptorChain[i$1++]);
		return promise;
	}
	getUri(config) {
		config = mergeConfig$1(this.defaults, config);
		const fullPath = buildFullPath(config.baseURL, config.url, config.allowAbsoluteUrls);
		return buildURL(fullPath, config.params, config.paramsSerializer);
	}
};
utils_default.forEach([
	"delete",
	"get",
	"head",
	"options"
], function forEachMethodNoData(method) {
	Axios$1.prototype[method] = function(url, config) {
		return this.request(mergeConfig$1(config || {}, {
			method,
			url,
			data: (config || {}).data
		}));
	};
});
utils_default.forEach([
	"post",
	"put",
	"patch"
], function forEachMethodWithData(method) {
	function generateHTTPMethod(isForm) {
		return function httpMethod(url, data, config) {
			return this.request(mergeConfig$1(config || {}, {
				method,
				headers: isForm ? { "Content-Type": "multipart/form-data" } : {},
				url,
				data
			}));
		};
	}
	Axios$1.prototype[method] = generateHTTPMethod();
	Axios$1.prototype[method + "Form"] = generateHTTPMethod(true);
});
var Axios_default = Axios$1;

//#endregion
//#region node_modules/axios/lib/cancel/CancelToken.js
/**
* A `CancelToken` is an object that can be used to request cancellation of an operation.
*
* @param {Function} executor The executor function.
*
* @returns {CancelToken}
*/
var CancelToken$1 = class CancelToken$1 {
	constructor(executor) {
		if (typeof executor !== "function") throw new TypeError("executor must be a function.");
		let resolvePromise;
		this.promise = new Promise(function promiseExecutor(resolve) {
			resolvePromise = resolve;
		});
		const token = this;
		this.promise.then((cancel) => {
			if (!token._listeners) return;
			let i$1 = token._listeners.length;
			while (i$1-- > 0) token._listeners[i$1](cancel);
			token._listeners = null;
		});
		this.promise.then = (onfulfilled) => {
			let _resolve;
			const promise = new Promise((resolve) => {
				token.subscribe(resolve);
				_resolve = resolve;
			}).then(onfulfilled);
			promise.cancel = function reject() {
				token.unsubscribe(_resolve);
			};
			return promise;
		};
		executor(function cancel(message, config, request) {
			if (token.reason) return;
			token.reason = new CanceledError_default(message, config, request);
			resolvePromise(token.reason);
		});
	}
	/**
	* Throws a `CanceledError` if cancellation has been requested.
	*/
	throwIfRequested() {
		if (this.reason) throw this.reason;
	}
	/**
	* Subscribe to the cancel signal
	*/
	subscribe(listener) {
		if (this.reason) {
			listener(this.reason);
			return;
		}
		if (this._listeners) this._listeners.push(listener);
		else this._listeners = [listener];
	}
	/**
	* Unsubscribe from the cancel signal
	*/
	unsubscribe(listener) {
		if (!this._listeners) return;
		const index = this._listeners.indexOf(listener);
		if (index !== -1) this._listeners.splice(index, 1);
	}
	toAbortSignal() {
		const controller = new AbortController();
		const abort = (err) => {
			controller.abort(err);
		};
		this.subscribe(abort);
		controller.signal.unsubscribe = () => this.unsubscribe(abort);
		return controller.signal;
	}
	/**
	* Returns an object that contains a new `CancelToken` and a function that, when called,
	* cancels the `CancelToken`.
	*/
	static source() {
		let cancel;
		return {
			token: new CancelToken$1(function executor(c$1) {
				cancel = c$1;
			}),
			cancel
		};
	}
};
var CancelToken_default = CancelToken$1;

//#endregion
//#region node_modules/axios/lib/helpers/spread.js
/**
* Syntactic sugar for invoking a function and expanding an array for arguments.
*
* Common use case would be to use `Function.prototype.apply`.
*
*  ```js
*  function f(x, y, z) {}
*  var args = [1, 2, 3];
*  f.apply(null, args);
*  ```
*
* With `spread` this example can be re-written.
*
*  ```js
*  spread(function(x, y, z) {})([1, 2, 3]);
*  ```
*
* @param {Function} callback
*
* @returns {Function}
*/
function spread$1(callback) {
	return function wrap(arr) {
		return callback.apply(null, arr);
	};
}

//#endregion
//#region node_modules/axios/lib/helpers/isAxiosError.js
/**
* Determines whether the payload is an error thrown by Axios
*
* @param {*} payload The value to test
*
* @returns {boolean} True if the payload is an error thrown by Axios, otherwise false
*/
function isAxiosError$1(payload) {
	return utils_default.isObject(payload) && payload.isAxiosError === true;
}

//#endregion
//#region node_modules/axios/lib/helpers/HttpStatusCode.js
var HttpStatusCode$1 = {
	Continue: 100,
	SwitchingProtocols: 101,
	Processing: 102,
	EarlyHints: 103,
	Ok: 200,
	Created: 201,
	Accepted: 202,
	NonAuthoritativeInformation: 203,
	NoContent: 204,
	ResetContent: 205,
	PartialContent: 206,
	MultiStatus: 207,
	AlreadyReported: 208,
	ImUsed: 226,
	MultipleChoices: 300,
	MovedPermanently: 301,
	Found: 302,
	SeeOther: 303,
	NotModified: 304,
	UseProxy: 305,
	Unused: 306,
	TemporaryRedirect: 307,
	PermanentRedirect: 308,
	BadRequest: 400,
	Unauthorized: 401,
	PaymentRequired: 402,
	Forbidden: 403,
	NotFound: 404,
	MethodNotAllowed: 405,
	NotAcceptable: 406,
	ProxyAuthenticationRequired: 407,
	RequestTimeout: 408,
	Conflict: 409,
	Gone: 410,
	LengthRequired: 411,
	PreconditionFailed: 412,
	PayloadTooLarge: 413,
	UriTooLong: 414,
	UnsupportedMediaType: 415,
	RangeNotSatisfiable: 416,
	ExpectationFailed: 417,
	ImATeapot: 418,
	MisdirectedRequest: 421,
	UnprocessableEntity: 422,
	Locked: 423,
	FailedDependency: 424,
	TooEarly: 425,
	UpgradeRequired: 426,
	PreconditionRequired: 428,
	TooManyRequests: 429,
	RequestHeaderFieldsTooLarge: 431,
	UnavailableForLegalReasons: 451,
	InternalServerError: 500,
	NotImplemented: 501,
	BadGateway: 502,
	ServiceUnavailable: 503,
	GatewayTimeout: 504,
	HttpVersionNotSupported: 505,
	VariantAlsoNegotiates: 506,
	InsufficientStorage: 507,
	LoopDetected: 508,
	NotExtended: 510,
	NetworkAuthenticationRequired: 511,
	WebServerIsDown: 521,
	ConnectionTimedOut: 522,
	OriginIsUnreachable: 523,
	TimeoutOccurred: 524,
	SslHandshakeFailed: 525,
	InvalidSslCertificate: 526
};
Object.entries(HttpStatusCode$1).forEach(([key, value]) => {
	HttpStatusCode$1[value] = key;
});
var HttpStatusCode_default = HttpStatusCode$1;

//#endregion
//#region node_modules/axios/lib/axios.js
/**
* Create an instance of Axios
*
* @param {Object} defaultConfig The default config for the instance
*
* @returns {Axios} A new instance of Axios
*/
function createInstance(defaultConfig) {
	const context = new Axios_default(defaultConfig);
	const instance = bind(Axios_default.prototype.request, context);
	utils_default.extend(instance, Axios_default.prototype, context, { allOwnKeys: true });
	utils_default.extend(instance, context, null, { allOwnKeys: true });
	instance.create = function create(instanceConfig) {
		return createInstance(mergeConfig$1(defaultConfig, instanceConfig));
	};
	return instance;
}
var axios = createInstance(defaults_default);
axios.Axios = Axios_default;
axios.CanceledError = CanceledError_default;
axios.CancelToken = CancelToken_default;
axios.isCancel = isCancel$1;
axios.VERSION = VERSION$1;
axios.toFormData = toFormData_default;
axios.AxiosError = AxiosError_default;
axios.Cancel = axios.CanceledError;
axios.all = function all$1(promises) {
	return Promise.all(promises);
};
axios.spread = spread$1;
axios.isAxiosError = isAxiosError$1;
axios.mergeConfig = mergeConfig$1;
axios.AxiosHeaders = AxiosHeaders_default;
axios.formToJSON = (thing) => formDataToJSON_default(utils_default.isHTMLForm(thing) ? new FormData(thing) : thing);
axios.getAdapter = adapters_default.getAdapter;
axios.HttpStatusCode = HttpStatusCode_default;
axios.default = axios;
var axios_default = axios;

//#endregion
//#region node_modules/axios/index.js
var { Axios, AxiosError, CanceledError, isCancel, CancelToken, VERSION, all, Cancel, isAxiosError, spread, toFormData, AxiosHeaders, HttpStatusCode, formToJSON, getAdapter, mergeConfig } = axios_default;

//#endregion
//#region node_modules/textalive-app-api/dist/index.es.js
var e = { exports: {} };
(function(t) {
	function e$1(t$1, e$2, r$1) {
		for (var n$1 = r$1 && "number" != typeof e$2 ? r$1(e$2) : e$2, i$1 = 0, o$1 = t$1.length; i$1 < o$1;) {
			var s$1 = i$1 + o$1 >>> 1;
			(r$1 ? r$1(t$1[s$1]) : t$1[s$1]) < n$1 ? i$1 = s$1 + 1 : o$1 = s$1;
		}
		return i$1;
	}
	t.sortedIndex = e$1, Object.defineProperty(t, "__esModule", { value: !0 });
})(e.exports);
var r = e.exports, n = {
	NONE: 0,
	PHRASE: 1,
	WORD: 2,
	CHAR: 4,
	GRAPHIC: 8,
	ALL: 63,
	PUBLIC: 64
}, i = /^https?:\/\/uploader\.ongaaccel\.jp\/files\?guid=([a-zA-Z0-9]+)/i, o = /^https?:\/\/songle\.jp\/uploads\/([a-zA-Z0-9]+)\.mp3$/i, s = /^uploaded:([a-zA-Z0-9]+)$/i, a = /^songle\.jp\/uploads\/([a-zA-Z0-9]+)\.mp3$/i, u = /^https?:\/\/piapro\.jp\/t\/([^/]+)(\/[0-9]+)?$/i, c = {
	getSongPathFromUrl: function(t) {
		if (c.isUploaderUrl(t)) {
			var e$1 = o.exec(t);
			if (e$1) return "songle.jp/uploads/".concat(e$1[1], ".mp3");
			var r$1 = i.exec(t);
			if (r$1) return "songle.jp/uploads/".concat(r$1[1], ".mp3");
		}
		return /https?:\/\/(.+)/.exec(t)[1];
	},
	isUploaderUrl: function(t) {
		return o.test(t) || i.test(t);
	},
	isUploaderPath: function(t) {
		return a.test(t) || s.test(t);
	},
	getUploaderGuid: function(t) {
		var e$1 = a.exec(t);
		if (e$1) return e$1[1];
		var r$1 = s.exec(t);
		return r$1 ? r$1[1] : null;
	},
	getSongUrlFromUploaderGuid: function(t) {
		return t ? "https://songle.jp/uploads/".concat(t, ".mp3") : null;
	},
	getAltSongUrlFromUploaderGuid: function(t) {
		return t ? "https://api.textalive.jp/songle/me/uploads/".concat(t) : null;
	},
	getSongUrlFromPath: function(t) {
		var e$1 = c.getUploaderGuid(t);
		return e$1 ? c.getSongUrlFromUploaderGuid(e$1) : "https://".concat(t);
	},
	isYouTubeUrl: function(t) {
		return /^https?:\/\/((www|m)\.)?youtube\.com/i.test(t);
	},
	isNicovideoUrl: function(t) {
		return /^https?:\/\/(www\.)?nicovideo.jp/i.test(t);
	},
	isVideoSiteUrl: function(t) {
		return c.isYouTubeUrl(t) || c.isNicovideoUrl(t);
	},
	isPiaproUrl: function(t) {
		return u.test(t);
	}
}, l = /^https:\/\/songle\.jp\/api\/v[0-9]+\/users\/(.+)\/uploads\/(.+)$/, p = function(t) {
	return l.test(t);
}, h = function(t) {
	var e$1 = l.exec(t);
	return e$1 ? {
		user: e$1[1],
		identifier: e$1[2]
	} : {
		user: null,
		identifier: null
	};
}, d = function() {
	function t() {}
	return t.prototype.isLicenseLoading = function(t$1) {
		return !t$1 || !t$1.song || void 0 === t$1.lyrics || void 0 === t$1.backgroundImage;
	}, t.prototype.checkLicenses = function(t$1) {
		return !this.isLicenseLoading(t$1) && this.checkLicense(t$1.song) && this.checkLicense(t$1.lyrics) && this.checkLicense(t$1.backgroundImage);
	}, t.prototype.checkLicense = function(t$1) {
		return null === t$1 || (1 === t$1.contentType ? this.checkMusicLicense(t$1.license) : 2 === t$1.contentType ? this.checkTextLicense(t$1.license) : 0 === t$1.contentType && (!!this.isBackgroundColorAsset(t$1) || this.checkBackgroundImageLicense(t$1.license)));
	}, t.prototype.checkMusicLicense = function(t$1) {
		return t$1.condition && t$1.condition.uploader || !(!t$1.condition || t$1.condition.ns || t$1.condition.nc || t$1.condition.org || t$1.condition.clb);
	}, t.prototype.checkTextLicense = function(t$1) {
		return t$1.condition && t$1.condition.uploader || !(!t$1.condition || t$1.condition.ns || t$1.condition.org || t$1.condition.clb);
	}, t.prototype.checkBackgroundImageLicense = function(t$1) {
		return !(!t$1.condition || t$1.condition.ns || t$1.condition.nc || t$1.condition.org || t$1.condition.clb);
	}, t.prototype.isUploaderAsset = function(t$1) {
		return t$1 && t$1.url && (c.isUploaderUrl(t$1.url) || p(t$1.url));
	}, t.prototype.isPiaproAsset = function(t$1) {
		return t$1 && t$1.url && c.isPiaproUrl(t$1.url);
	}, t.prototype.isBlankBackgroundAsset = function(t$1) {
		return !t$1 || !t$1.originalUrl;
	}, t.prototype.isBackgroundColorAsset = function(t$1) {
		var e$1 = t$1 && t$1.originalUrl ? t$1.originalUrl : "";
		return /^#[0-9a-fA-F]{3,6}$/.test(e$1);
	}, t.prototype.isBackgroundPiaproImageAsset = function(t$1) {
		var e$1 = t$1 && t$1.originalUrl ? t$1.originalUrl : "";
		return c.isPiaproUrl(e$1);
	}, t.prototype.isBackgroundSpecialImageAsset = function(t$1) {
		var e$1 = t$1 && t$1.originalUrl ? t$1.originalUrl : "";
		return /^snowmiku2016-([0-9]{2})$/.test(e$1);
	}, t.prototype.getQueryParameter = function(t$1) {
		return !t$1 || t$1.license && !this.checkBackgroundImageLicense(t$1.license) ? null : t$1.originalUrl;
	}, t;
}(), f = function(t, e$1) {
	return f = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t$1, e$2) {
		t$1.__proto__ = e$2;
	} || function(t$1, e$2) {
		for (var r$1 in e$2) Object.prototype.hasOwnProperty.call(e$2, r$1) && (t$1[r$1] = e$2[r$1]);
	}, f(t, e$1);
}, y = function() {
	return y = Object.assign || function(t) {
		for (var e$1, r$1 = 1, n$1 = arguments.length; r$1 < n$1; r$1++) for (var i$1 in e$1 = arguments[r$1]) Object.prototype.hasOwnProperty.call(e$1, i$1) && (t[i$1] = e$1[i$1]);
		return t;
	}, y.apply(this, arguments);
};
function g(t, e$1, r$1, n$1) {
	return new (r$1 || (r$1 = Promise))((function(e$2, i$1) {
		function o$1(t$1) {
			try {
				a$1(n$1.next(t$1));
			} catch (t$2) {
				i$1(t$2);
			}
		}
		function s$1(t$1) {
			try {
				a$1(n$1.throw(t$1));
			} catch (t$2) {
				i$1(t$2);
			}
		}
		function a$1(t$1) {
			var n$2;
			t$1.done ? e$2(t$1.value) : (n$2 = t$1.value, n$2 instanceof r$1 ? n$2 : new r$1((function(t$2) {
				t$2(n$2);
			}))).then(o$1, s$1);
		}
		a$1((n$1 = n$1.apply(t, [])).next());
	}));
}
function v(t, e$1) {
	var r$1, n$1, i$1, o$1, s$1 = {
		label: 0,
		sent: function() {
			if (1 & i$1[0]) throw i$1[1];
			return i$1[1];
		},
		trys: [],
		ops: []
	};
	return o$1 = {
		next: a$1(0),
		throw: a$1(1),
		return: a$1(2)
	}, "function" == typeof Symbol && (o$1[Symbol.iterator] = function() {
		return this;
	}), o$1;
	function a$1(a$2) {
		return function(u$1) {
			return function(a$3) {
				if (r$1) throw new TypeError("Generator is already executing.");
				for (; o$1 && (o$1 = 0, a$3[0] && (s$1 = 0)), s$1;) try {
					if (r$1 = 1, n$1 && (i$1 = 2 & a$3[0] ? n$1.return : a$3[0] ? n$1.throw || ((i$1 = n$1.return) && i$1.call(n$1), 0) : n$1.next) && !(i$1 = i$1.call(n$1, a$3[1])).done) return i$1;
					switch (n$1 = 0, i$1 && (a$3 = [2 & a$3[0], i$1.value]), a$3[0]) {
						case 0:
						case 1:
							i$1 = a$3;
							break;
						case 4: return s$1.label++, {
							value: a$3[1],
							done: !1
						};
						case 5:
							s$1.label++, n$1 = a$3[1], a$3 = [0];
							continue;
						case 7:
							a$3 = s$1.ops.pop(), s$1.trys.pop();
							continue;
						default:
							if (!((i$1 = (i$1 = s$1.trys).length > 0 && i$1[i$1.length - 1]) || 6 !== a$3[0] && 2 !== a$3[0])) {
								s$1 = 0;
								continue;
							}
							if (3 === a$3[0] && (!i$1 || a$3[1] > i$1[0] && a$3[1] < i$1[3])) {
								s$1.label = a$3[1];
								break;
							}
							if (6 === a$3[0] && s$1.label < i$1[1]) {
								s$1.label = i$1[1], i$1 = a$3;
								break;
							}
							if (i$1 && s$1.label < i$1[2]) {
								s$1.label = i$1[2], s$1.ops.push(a$3);
								break;
							}
							i$1[2] && s$1.ops.pop(), s$1.trys.pop();
							continue;
					}
					a$3 = e$1.call(t, s$1);
				} catch (t$1) {
					a$3 = [6, t$1], n$1 = 0;
				} finally {
					r$1 = i$1 = 0;
				}
				if (5 & a$3[0]) throw a$3[1];
				return {
					value: a$3[0] ? a$3[1] : void 0,
					done: !0
				};
			}([a$2, u$1]);
		};
	}
}
var m = {
	fallback: { protocol: "https" },
	songle: { domain: "songle.jp" },
	textalive: { domain: "api.textalive.jp" },
	content: { domain: "content.textalive.jp" },
	client: {
		version: "0.10.0",
		axios: null
	}
};
function b(e$1, r$1, n$1) {
	var i$1, o$1, s$1;
	return g(this, 0, void 0, (function() {
		var a$1;
		return v(this, (function(u$1) {
			switch (u$1.label) {
				case 0: a$1 = { responseType: (null == n$1 ? void 0 : n$1.responseType) || "json" }, r$1 && (a$1.params = r$1), null != n$1 && n$1.auth && (a$1.auth = {
					username: null === (i$1 = n$1.auth) || void 0 === i$1 ? void 0 : i$1.username,
					password: null === (o$1 = n$1.auth) || void 0 === o$1 ? void 0 : o$1.password
				}), null != n$1 && n$1.withCredentials && (a$1.withCredentials = !0), a$1.headers = {}, 0 === e$1.indexOf(m.textalive.server) && (m.textalive.appToken && (a$1.headers["x-ta-app-token"] = m.textalive.appToken), m.textalive.authUser && m.textalive.authToken && (a$1.headers["x-ta-auth-user"] = m.textalive.authUser, a$1.headers["x-ta-auth-token"] = m.textalive.authToken)), null != n$1 && n$1.headers && (a$1.headers = y(y({}, a$1.headers), n$1.headers)), u$1.label = 1;
				case 1: return u$1.trys.push([
					1,
					3,
					,
					4
				]), [4, ((null == n$1 ? void 0 : n$1.client) || (null === (s$1 = m.client) || void 0 === s$1 ? void 0 : s$1.axios) || axios_default).get(e$1, a$1)];
				case 2: return [2, u$1.sent()];
				case 3: return u$1.sent(), [2, null];
				case 4: return [2];
			}
		}));
	}));
}
function _(t) {
	var e$1, r$1, n$1 = 0;
	if (0 === t.length) return n$1;
	for (e$1 = 0, r$1 = t.length; e$1 < r$1; e$1++) n$1 = (n$1 << 5) - n$1 + t.charCodeAt(e$1), n$1 |= 0;
	return n$1;
}
m.songle.protocol = m.songle.protocol || m.fallback.protocol, m.songle.server = "".concat(m.songle.protocol, "://").concat(m.songle.domain), m.textalive.protocol = m.textalive.protocol || m.fallback.protocol, m.textalive.server = "".concat(m.textalive.protocol, "://").concat(m.textalive.domain), m.textalive.appToken = null, m.content.protocol = m.content.protocol || m.fallback.protocol, m.content.server = "".concat(m.content.protocol, "://").concat(m.content.domain);
var w = new (function(t) {
	function e$1() {
		return null !== t && t.apply(this, arguments) || this;
	}
	return function(t$1, e$2) {
		if ("function" != typeof e$2 && null !== e$2) throw new TypeError("Class extends value " + String(e$2) + " is not a constructor or null");
		function r$1() {
			this.constructor = t$1;
		}
		f(t$1, e$2), t$1.prototype = null === e$2 ? Object.create(e$2) : (r$1.prototype = e$2.prototype, new r$1());
	}(e$1, t), Object.defineProperty(e$1.prototype, "endpoint", {
		get: function() {
			return "".concat(m.textalive.server, "/etc/license");
		},
		enumerable: !1,
		configurable: !0
	}), e$1.prototype.read = function(t$1, e$2) {
		var r$1;
		return void 0 === e$2 && (e$2 = !0), g(this, 0, void 0, (function() {
			var n$1, i$1;
			return v(this, (function(o$1) {
				switch (o$1.label) {
					case 0: return [4, b(this.endpoint, {
						url: t$1,
						token: _("ta" + t$1),
						skipOptoutCheck: !!e$2 || void 0
					})];
					case 1: return !(n$1 = o$1.sent()) || 200 !== n$1.status || (null === (r$1 = n$1.data) || void 0 === r$1 ? void 0 : r$1.error) ? [2, {
						originalUrl: null,
						license: { code: n$1 ? n$1.status : 404 }
					}] : ((i$1 = n$1.data).license.code = n$1.status, 0 === i$1.contentType && (i$1.css = "url(\"" + i$1.contentUrl + "\")"), [2, i$1]);
				}
			}));
		}));
	}, e$1;
}(d))();
function P(e$1, r$1, n$1) {
	var i$1;
	return g(this, 0, void 0, (function() {
		var o$1;
		return v(this, (function(s$1) {
			switch (s$1.label) {
				case 0: r$1 || (r$1 = {}), o$1 = { responseType: (null == n$1 ? void 0 : n$1.responseType) || "json" }, null != n$1 && n$1.withCredentials && (o$1.withCredentials = !0), o$1.headers = {}, 0 === e$1.indexOf(m.textalive.server) && (m.textalive.appToken && (o$1.headers["x-ta-app-token"] = m.textalive.appToken), m.textalive.authUser && m.textalive.authToken && (o$1.headers["x-ta-auth-user"] = m.textalive.authUser, o$1.headers["x-ta-auth-token"] = m.textalive.authToken)), null != n$1 && n$1.postToken && (o$1.headers["x-ta-post-token"] = n$1.postToken), null != n$1 && n$1.headers && (o$1.headers || (o$1.headers = {}), o$1.headers = y(y({}, o$1.headers), n$1.headers)), s$1.label = 1;
				case 1: return s$1.trys.push([
					1,
					3,
					,
					4
				]), [4, ((null == n$1 ? void 0 : n$1.client) || (null === (i$1 = m.client) || void 0 === i$1 ? void 0 : i$1.axios) || axios_default).post(e$1, r$1, o$1)];
				case 2: return [2, s$1.sent()];
				case 3: return s$1.sent(), [2, null];
				case 4: return [2];
			}
		}));
	}));
}
var E = "data:text/plain;base64,";
function O(t) {
	return "string" == typeof t && 0 === t.indexOf(E);
}
function S(t) {
	if (!O(t)) return null;
	var e$1 = t.split(",")[1];
	return decodeURIComponent(atob(e$1).split("").map((function(t$1) {
		return "%" + ("00" + t$1.charCodeAt(0).toString(16)).slice(-2);
	})).join(""));
}
function T(t) {
	return "string" != typeof t ? null : E + btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g, (function(t$1, e$1) {
		return String.fromCharCode(parseInt("0x" + e$1));
	})));
}
function x(t, e$1, r$1, n$1, i$1) {
	var o$1 = void 0 === window.screenLeft ? screen.left : window.screenLeft, s$1 = void 0 === window.screenTop ? screen.top : window.screenTop, a$1 = (window.innerWidth ? window.innerWidth : document.documentElement.clientWidth ? document.documentElement.clientWidth : screen.width) / 2 - r$1 / 2 + o$1, u$1 = (window.innerHeight ? window.innerHeight : document.documentElement.clientHeight ? document.documentElement.clientHeight : screen.height) / 2 - n$1 / 2 + s$1, c$1 = window.open(t, e$1, "width=" + r$1 + ",height=" + n$1 + ",top=" + u$1 + ",left=" + a$1 + "," + i$1);
	return window.focus && c$1.focus(), c$1;
}
var A = new (function() {
	function t() {
		this.listeners = [], this.pollingTimeout = null;
	}
	return Object.defineProperty(t.prototype, "endpoint", {
		get: function() {
			return "".concat(m.textalive.server, "/");
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "songleEndpoint", {
		get: function() {
			return "".concat(m.songle.server, "/");
		},
		enumerable: !1,
		configurable: !0
	}), t.prototype.isLoading = function() {
		return !!this.userProfile;
	}, t.prototype.spoof = function(t$1) {
		this.userProfile = t$1;
	}, t.prototype.getServerStatus = function() {
		return g(this, 0, void 0, (function() {
			return v(this, (function(t$1) {
				return [2, this.serverStatus || this.doGetServerStatus()];
			}));
		}));
	}, t.prototype.doGetServerStatus = function() {
		return g(this, 0, void 0, (function() {
			var t$1;
			return v(this, (function(e$1) {
				switch (e$1.label) {
					case 0: return this.serverStatusRequest || (this.serverStatusRequest = b(this.endpoint, null, { withCredentials: !0 })), [4, this.serverStatusRequest];
					case 1: return t$1 = e$1.sent(), this.serverStatusRequest = null, t$1 && 200 === t$1.status ? (this.serverStatus = t$1.data, [2, this.serverStatus]) : [2, null];
				}
			}));
		}));
	}, t.prototype.getProfile = function() {
		return g(this, 0, void 0, (function() {
			return v(this, (function(t$1) {
				return [2, this.userProfile || this.doGetProfile()];
			}));
		}));
	}, t.prototype.doGetProfile = function() {
		return g(this, 0, void 0, (function() {
			var t$1;
			return v(this, (function(e$1) {
				switch (e$1.label) {
					case 0: return this.userProfileRequest || (this.userProfileRequest = b("".concat(this.endpoint, "profile"), null, { withCredentials: !0 })), [4, this.userProfileRequest];
					case 1: return t$1 = e$1.sent(), this.userProfileRequest = null, t$1 && 200 === t$1.status ? (this.emitUserProfile(t$1.data), this.userProfile = t$1.data, [2, this.userProfile]) : [2, null];
				}
			}));
		}));
	}, t.prototype.getMergingUsers = function() {
		return g(this, 0, void 0, (function() {
			var t$1;
			return v(this, (function(e$1) {
				switch (e$1.label) {
					case 0: return [4, b("".concat(this.endpoint, "profile/merge"), null, { withCredentials: !0 })];
					case 1: return (t$1 = e$1.sent()) && 200 === t$1.status && t$1.data ? [2, [t$1.data.user, t$1.data.mergeWith]] : [2, [null, null]];
				}
			}));
		}));
	}, t.prototype.mergeUsers = function() {
		var t$1;
		return g(this, 0, void 0, (function() {
			var e$1, r$1, n$1, i$1, o$1, s$1;
			return v(this, (function(a$1) {
				switch (a$1.label) {
					case 0: return [4, this.getToken()];
					case 1: return e$1 = a$1.sent(), [4, P("".concat(this.endpoint, "profile/merge"), null, {
						postToken: e$1,
						withCredentials: !0
					})];
					case 2:
						if (!(r$1 = a$1.sent()) || 200 !== r$1.status || !(null === (t$1 = r$1.data) || void 0 === t$1 ? void 0 : t$1.success)) return [2, null];
						for (n$1 = r$1.data.user, i$1 = 0, o$1 = this.listeners; i$1 < o$1.length; i$1++) (s$1 = o$1[i$1]).onUserMerged && s$1.onUserMerged(n$1);
						return [2, n$1];
				}
			}));
		}));
	}, t.prototype.updateUser = function(t$1) {
		var e$1;
		return g(this, 0, void 0, (function() {
			var r$1, n$1, i$1, o$1;
			return v(this, (function(s$1) {
				switch (s$1.label) {
					case 0: return [4, this.getToken()];
					case 1: return r$1 = s$1.sent(), [4, P("".concat(this.endpoint, "profile"), t$1, {
						postToken: r$1,
						withCredentials: !0
					})];
					case 2: return (n$1 = s$1.sent()) && 200 === n$1.status && (null === (e$1 = n$1.data) || void 0 === e$1 ? void 0 : e$1.success) ? (i$1 = n$1.data.user, [4, this.getProfile()]) : [2, null];
					case 3: return (o$1 = s$1.sent()).user = i$1, this.emitUserProfile(o$1), [2, i$1];
				}
			}));
		}));
	}, t.prototype.isYouTubeUser = function(t$1) {
		return t$1 && t$1.user && "string" == typeof t$1.user.youtubeIdString;
	}, t.prototype.isPiaproUser = function(t$1) {
		return t$1 && t$1.user && "string" == typeof t$1.user.piaproIdString;
	}, t.prototype.isSongleUser = function(t$1) {
		return t$1 && t$1.user && ("number" == typeof t$1.user.songleUserId && t$1.user.songleUserId >= 0 || "string" == typeof t$1.user.songleAccessToken);
	}, t.prototype.isSpoofingSongleUser = function(t$1) {
		return this.isSongleUser(t$1) && ("number" != typeof t$1.user.id || t$1.user.id < 0);
	}, t.prototype.addListener = function(t$1) {
		t$1 && this.listeners.push(t$1);
	}, t.prototype.removeListener = function(t$1) {
		this.listeners = this.listeners.filter((function(e$1) {
			return e$1 !== t$1;
		}));
	}, t.prototype.emitUserProfile = function(t$1) {
		this.userProfile = t$1;
		for (var e$1 = 0, r$1 = this.listeners; e$1 < r$1.length; e$1++) {
			var n$1 = r$1[e$1];
			n$1.onUserProfileUpdated && n$1.onUserProfileUpdated(t$1), this.userProfile.user ? n$1.onUserLoggedIn && n$1.onUserLoggedIn(t$1.user) : n$1.onUserLoggedOut && n$1.onUserLoggedOut();
		}
	}, t.prototype.authenticate = function(t$1, e$1) {
		return g(this, 0, void 0, (function() {
			var r$1;
			return v(this, (function(n$1) {
				switch (n$1.label) {
					case 0: return [4, b("".concat(this.endpoint, "profile/logins/basic"), null, {
						auth: {
							username: String(t$1),
							password: e$1
						},
						withCredentials: !0
					})];
					case 1: return (r$1 = n$1.sent()) && 200 === r$1.status && r$1.data ? [2, r$1.data] : [2, null];
				}
			}));
		}));
	}, t.prototype.loginTwitter = function(t$1) {
		return this.login(t$1, "twitter");
	}, t.prototype.loginGitHub = function(t$1) {
		return this.login(t$1, "github");
	}, t.prototype.loginYouTube = function(t$1) {
		return this.login(t$1, "youtube");
	}, t.prototype.loginPiapro = function(t$1) {
		return this.login(t$1, "piapro");
	}, t.prototype.loginSongle = function(t$1) {
		return this.login(t$1, "songle");
	}, t.prototype.login = function(t$1, e$1) {
		return t$1 && t$1.preventDefault(), !!e$1 && (x("".concat(this.endpoint, "profile/logins/").concat(e$1), "TextAliveAuth", 600, 480, "status=no,toolbar=no,menubar=no"), this.startMonitoringAuthState(), !1);
	}, t.prototype.logoutTwitter = function(t$1) {
		return this.logout(t$1, "twitter");
	}, t.prototype.logoutGitHub = function(t$1) {
		return this.logout(t$1, "github");
	}, t.prototype.logoutYouTube = function(t$1) {
		return this.logout(t$1, "youtube");
	}, t.prototype.logoutPiapro = function(t$1) {
		return this.logout(t$1, "piapro");
	}, t.prototype.logoutSongle = function(t$1) {
		return this.logout(t$1, "songle");
	}, t.prototype.logout = function(t$1, e$1) {
		return void 0 === e$1 && (e$1 = null), t$1 && t$1.preventDefault(), x("".concat(this.endpoint, "profile/logouts/").concat(e$1 || "all"), "TextAliveAuth", 600, 480, "status=no,toolbar=no,menubar=no"), this.startMonitoringAuthState(), !1;
	}, t.prototype.startMonitoringAuthState = function() {
		var t$1 = this;
		this.pollingTimeout && (clearTimeout(this.pollingTimeout), this.pollingTimeout = null);
		var e$1 = function(r$1) {
			if (r$1.data && r$1.data.textalive) {
				if (r$1.source.postMessage("close", r$1.origin), r$1.data.merge) return t$1.getMergingUsers().then((function(e$2) {
					for (var r$2 = e$2[0], n$1 = e$2[1], i$1 = 0, o$1 = t$1.listeners; i$1 < o$1.length; i$1++) {
						var s$1 = o$1[i$1];
						s$1.onUserMergeRequired && s$1.onUserMergeRequired(r$2, n$1);
					}
				})).catch((function() {})), void window.removeEventListener("message", e$1);
				t$1.doGetProfile(), window.removeEventListener("message", e$1);
			}
		};
		window.addEventListener("message", e$1);
	}, t.prototype.getToken = function() {
		return g(this, 0, void 0, (function() {
			return v(this, (function(t$1) {
				return this.userProfile ? [2, this.userProfile.status.token] : this.token ? [2, this.token] : [2, this.doGetToken()];
			}));
		}));
	}, t.prototype.doGetToken = function() {
		var t$1;
		return g(this, 0, void 0, (function() {
			var e$1;
			return v(this, (function(r$1) {
				switch (r$1.label) {
					case 0: return [4, b("".concat(this.endpoint, "profile/token"), null, { withCredentials: !0 })];
					case 1: return e$1 = r$1.sent(), !(null === (t$1 = null == e$1 ? void 0 : e$1.data) || void 0 === t$1) && t$1.token && (this.token = e$1.data.token), [2, this.token];
				}
			}));
		}));
	}, t;
}())(), R = new (function() {
	function t() {}
	return Object.defineProperty(t.prototype, "endpoint", {
		get: function() {
			return "".concat(m.textalive.server, "/text-parser/");
		},
		enumerable: !1,
		configurable: !0
	}), t.prototype.parse = function(t$1) {
		return g(this, 0, void 0, (function() {
			var e$1, r$1;
			return v(this, (function(n$1) {
				switch (n$1.label) {
					case 0: return [4, A.getToken()];
					case 1: return e$1 = n$1.sent(), [4, P(this.endpoint, { text: t$1 }, {
						postToken: e$1,
						withCredentials: !0
					})];
					case 2: return (r$1 = n$1.sent()) && 200 === r$1.status ? [2, r$1.data] : [2, null];
				}
			}));
		}));
	}, t;
}())(), C = new (function() {
	function t() {}
	return Object.defineProperty(t.prototype, "endpoint", {
		get: function() {
			return "".concat(m.content.server, "/fonts");
		},
		enumerable: !1,
		configurable: !0
	}), t.prototype.listAvailableFonts = function() {
		return g(this, 0, void 0, (function() {
			var t$1 = this;
			return v(this, (function(e$1) {
				switch (e$1.label) {
					case 0: return this.data ? [3, 2] : [4, this.fetchInfo()];
					case 1: e$1.sent(), e$1.label = 2;
					case 2: return this.data && this.data.fontFamilies ? [2, Object.keys(this.data.fontFamilies).map((function(e$2) {
						return y({ key: e$2 }, t$1.data.fontFamilies[e$2]);
					}))] : [2, []];
				}
			}));
		}));
	}, t.prototype.getFrequentChars = function() {
		return g(this, 0, void 0, (function() {
			return v(this, (function(t$1) {
				switch (t$1.label) {
					case 0: return this.data ? [3, 2] : [4, this.fetchInfo()];
					case 1: t$1.sent(), t$1.label = 2;
					case 2: return [2, this.data && this.data.frequentChars || ""];
				}
			}));
		}));
	}, t.prototype.clearCache = function() {
		this.data = null;
	}, t.prototype.fetchInfo = function() {
		return g(this, 0, void 0, (function() {
			var t$1, e$1, r$1, n$1;
			return v(this, (function(i$1) {
				switch (i$1.label) {
					case 0: return [4, b("".concat(this.endpoint, "/index.json"))];
					case 1:
						if (!(t$1 = i$1.sent()) || 200 !== t$1.status || !t$1.data) return this.data = null, [2, null];
						for (r$1 in this.data = t$1.data, e$1 = this.data.fontUrlPrefix, this.data.fontFamilies) (n$1 = this.data.fontFamilies[r$1]).typesquare || n$1.typekit || n$1.google || n$1.url || (n$1.url = "".concat(e$1, "/").concat(r$1, "-all.css"), n$1.compactUrl = "".concat(e$1, "/").concat(r$1, ".css"));
						return [2];
				}
			}));
		}));
	}, t;
}())();
var N = /* @__PURE__ */ new RegExp("\\b([CDEFGAB](?:b|bb)*(?:#|##|sus|maj|min|aug|m|M)*[\\d/]*(?:[CDEFGAB](?:b|bb)*(?:#|##|sus|maj|min|aug|m|M)*[\\d/]*)*\\-){2}");
function k(t, e$1, r$1) {
	return !N.test(t) && !t.match(/[(].+(?:|).*[)]/) && (!t.match(/(|).+(|)/) || 0 !== e$1 && e$1 !== r$1.length - 2);
}
function j(t) {
	return !t.match(/* @__PURE__ */ new RegExp("[(]?"));
}
var I = {}, U = {}, F = function() {
	function t() {}
	return Object.defineProperty(t.prototype, "endpoint", {
		get: function() {
			return "".concat(m.songle.server, "/lyrics/");
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "localLyricsEndpoint", {
		get: function() {
			return "".concat(m.textalive.server, "/etc/lyrics");
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "timingEndpoint", {
		get: function() {
			return "".concat(m.songle.server, "/songs/");
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "lyricsParserEndpoint", {
		get: function() {
			return m.songle.server;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "lyricsPostEndpoint", {
		get: function() {
			return m.songle.server;
		},
		enumerable: !1,
		configurable: !0
	}), t.prototype.isUploaderUrl = function(t$1) {
		return p(t$1);
	}, t.prototype.parseUploaderUrl = function(t$1) {
		return h(t$1);
	}, t.prototype.getRecentlySynchronizedList = function(t$1) {
		return void 0 === t$1 && (t$1 = {}), g(this, 0, void 0, (function() {
			var e$1, r$1;
			return v(this, (function(n$1) {
				switch (n$1.label) {
					case 0: return e$1 = {}, "number" == typeof t$1 ? e$1.page = t$1 : t$1 && (e$1.page = t$1.page, e$1.per_page = t$1.perPage), [4, b("".concat(this.endpoint, "recently_synchronized.json"), e$1)];
					case 1: return (r$1 = n$1.sent()) && 200 === r$1.status ? [2, r$1.data] : [2, null];
				}
			}));
		}));
	}, t.prototype.load = function(t$1) {
		return g(this, 0, void 0, (function() {
			var e$1;
			return v(this, (function(r$1) {
				switch (r$1.label) {
					case 0: return [4, b("".concat(this.timingEndpoint + t$1, "/lyrics.json"))];
					case 1: return (e$1 = r$1.sent()) && 200 === e$1.status ? [2, e$1.data] : [2, null];
				}
			}));
		}));
	}, t.prototype.clearCache = function() {
		I = {};
	}, t.prototype.loadDetail = function(t$1, e$1) {
		return g(this, 0, void 0, (function() {
			var r$1, n$1;
			return v(this, (function(i$1) {
				switch (i$1.label) {
					case 0: return I[t$1] && I[t$1][e$1] ? [2, I[t$1][e$1]] : [4, b("".concat(this.timingEndpoint + t$1, "/lyrics/").concat(e$1 < 0 ? "latest" : e$1, ".json"))];
					case 1: return (r$1 = i$1.sent()) && 200 === r$1.status ? (n$1 = r$1.data, I[t$1] || (I[t$1] = {}), I[t$1][n$1.id] = n$1, e$1 < 0 && (I[t$1][-1] = n$1), [2, n$1]) : [2, null];
				}
			}));
		}));
	}, t.prototype.loadDiffs = function(t$1, e$1) {
		return g(this, 0, void 0, (function() {
			var r$1;
			return v(this, (function(n$1) {
				switch (n$1.label) {
					case 0: return [4, b("".concat(this.timingEndpoint + t$1, "/lyrics/").concat(e$1, "/diffs.json"))];
					case 1: return (r$1 = n$1.sent()) && 200 === r$1.status ? [2, r$1.data] : [2, null];
				}
			}));
		}));
	}, t.prototype.loadDiff = function(t$1, e$1, r$1) {
		return g(this, 0, void 0, (function() {
			return v(this, (function(n$1) {
				switch (n$1.label) {
					case 0: return [4, b("".concat(this.timingEndpoint + t$1, "/lyrics/").concat(e$1).concat(r$1 < 0 ? "" : 0 === r$1 ? "/original" : "/diffs/".concat(r$1, "/lyrics"), ".json"))];
					case 1: return [2, n$1.sent().data];
				}
			}));
		}));
	}, t.prototype.loadAllRevisionsForSong = function(t$1) {
		return g(this, 0, void 0, (function() {
			var e$1, r$1, n$1, i$1, o$1, s$1, a$1, u$1, c$1, l$1;
			return v(this, (function(p$1) {
				switch (p$1.label) {
					case 0: return [4, this.load(t$1)];
					case 1:
						if (!(e$1 = p$1.sent())) return [2, null];
						r$1 = [], n$1 = 0, i$1 = e$1.lyrics, p$1.label = 2;
					case 2: return n$1 < i$1.length ? (o$1 = i$1[n$1], [4, this.loadDetail(t$1, o$1.id)]) : [3, 6];
					case 3: return s$1 = p$1.sent(), [4, this.loadDiffs(t$1, s$1.id)];
					case 4:
						if (a$1 = p$1.sent(), r$1.push({
							lyrics: s$1,
							updated_at: new Date(s$1.created_at)
						}), Array.isArray(a$1)) for (u$1 = 0, c$1 = a$1; u$1 < c$1.length; u$1++) l$1 = c$1[u$1], r$1.push({
							diff_id: l$1.id,
							source_id: l$1.source_id,
							lyrics: s$1,
							updated_at: new Date(l$1.updated_at)
						});
						p$1.label = 5;
					case 5: return n$1++, [3, 2];
					case 6: return [2, r$1.sort((function(t$2, e$2) {
						var r$2 = e$2.updated_at.getTime() - t$2.updated_at.getTime();
						return 0 === r$2 ? e$2.diff_id - t$2.diff_id : r$2;
					}))];
				}
			}));
		}));
	}, t.prototype.getLatestRevision = function(t$1) {
		return t$1.filter((function(t$2) {
			return !(t$2.lyrics.processing || t$2.lyrics.failed);
		}))[0];
	}, t.prototype.fetchLocalLyricBody = function(t$1) {
		return g(this, 0, void 0, (function() {
			var e$1, r$1, n$1, i$1;
			return v(this, (function(o$1) {
				switch (o$1.label) {
					case 0: return this.verbose && ("string" == typeof t$1 ? console.log("load locally-stored lyrics for song code", t$1) : console.log("load locally-stored lyrics for lyric id", t$1)), e$1 = {}, "string" == typeof t$1 ? e$1.code = t$1 : e$1.lyricId = t$1, [4, b("".concat(this.localLyricsEndpoint, "/token"), e$1)];
					case 1: return !(r$1 = o$1.sent()) || 200 !== r$1.status || r$1.data.error ? [2, null] : (n$1 = r$1.data.token, e$1.token = n$1, [4, b(this.localLyricsEndpoint, e$1)]);
					case 2: return (i$1 = o$1.sent()) && 200 === i$1.status ? (this.verbose && console.log("loaded locally-stored lyrics with params", e$1), [2, i$1.data]) : [2, null];
				}
			}));
		}));
	}, t.prototype.fetchSongleLyricBody = function(t$1, e$1) {
		return g(this, 0, void 0, (function() {
			var r$1, n$1, i$1, o$1, s$1, a$1, u$1, c$1, l$1, p$1, h$1;
			return v(this, (function(d$1) {
				switch (d$1.label) {
					case 0:
						if (!(r$1 = this.parseUploaderUrl(t$1)).identifier) throw new Error("unsupported lyrics url ".concat(t$1));
						return [4, A.getProfile()];
					case 1:
						if (n$1 = d$1.sent(), !A.isSongleUser(n$1)) throw new Error("Songle authentication is required");
						return i$1 = "".concat(t$1, "//").concat(e$1), U[i$1] ? [2, U[i$1]] : (A.isSpoofingSongleUser(n$1) && (s$1 = n$1.user, a$1 = s$1.songleUserId, u$1 = s$1.songleAccessToken, c$1 = s$1.songleRefreshToken, o$1 = {
							songleUserId: a$1,
							songleAccessToken: u$1,
							songleRefreshToken: c$1
						}), [4, b("".concat(m.textalive.server, "/songle/users/").concat(r$1.user, "/uploads/").concat(r$1.identifier), o$1, {
							withCredentials: !0,
							responseType: "text"
						})]);
					case 2: return l$1 = d$1.sent(), p$1 = null == l$1 ? void 0 : l$1.data, h$1 = p$1 ? {
						text: p$1,
						url: t$1
					} : null, p$1 && (U[i$1] = h$1), [2, h$1];
				}
			}));
		}));
	}, t.prototype.fetchPiaproLyricBody = function(t$1, e$1) {
		return g(this, 0, void 0, (function() {
			var r$1, n$1, i$1, o$1, s$1;
			return v(this, (function(a$1) {
				switch (a$1.label) {
					case 0:
						if (!c.isPiaproUrl(t$1)) throw new Error("unsupported lyrics url ".concat(t$1));
						return r$1 = "".concat(t$1, "//").concat(e$1), U[r$1] ? [2, U[r$1]] : [4, w.read(t$1, !0)];
					case 1:
						if (n$1 = a$1.sent(), !w.isPiaproAsset(n$1)) throw new Error("unsupported piapro lyrics url ".concat(t$1));
						return i$1 = S(n$1.contentUrl), [4, this.parseLyricBody(i$1, e$1)];
					case 2: return o$1 = a$1.sent(), (s$1 = o$1 ? {
						text: o$1,
						artist: {
							name: n$1.authorName,
							url: n$1.authorPath ? "https://piapro.jp".concat(n$1.authorPath) : null
						},
						name: n$1.name,
						url: t$1
					} : null) && (U[r$1] = s$1), [2, s$1];
				}
			}));
		}));
	}, t.prototype.fetchInternalLyricBody = function(t$1, e$1) {
		return g(this, 0, void 0, (function() {
			var r$1;
			return v(this, (function(n$1) {
				if (r$1 = new URL(t$1), "undefined" == typeof location || location.protocol !== r$1.protocol || location.hostname !== r$1.hostname) throw new Error("direct access not supported for lyrics url ".concat(t$1));
				return [2, this.fetchCrossOriginLyricBody(t$1, e$1)];
			}));
		}));
	}, t.prototype.fetchCrossOriginLyricBody = function(t$1, e$1) {
		return g(this, 0, void 0, (function() {
			var r$1, n$1, i$1, o$1, s$1;
			return v(this, (function(a$1) {
				switch (a$1.label) {
					case 0: return r$1 = "".concat(t$1, "//").concat(e$1), U[r$1] ? [2, U[r$1]] : [4, b(t$1, null, { responseType: "text" })];
					case 1: return n$1 = a$1.sent(), i$1 = null == n$1 ? void 0 : n$1.data, n$1 && 200 === n$1.status && i$1 ? [4, this.parseLyricBody(i$1, e$1)] : (this.verbose && console.error("direct access not supported for lyrics url ".concat(t$1)), [2, this.fetchProxiedLyricBody(t$1, e$1)]);
					case 2: return o$1 = a$1.sent(), (s$1 = o$1 ? {
						text: o$1,
						url: t$1
					} : null) && (U[r$1] = s$1), [2, s$1];
				}
			}));
		}));
	}, t.prototype.fetchProxiedLyricBody = function(t$1, e$1) {
		return g(this, 0, void 0, (function() {
			var r$1, n$1, i$1;
			return v(this, (function(o$1) {
				switch (o$1.label) {
					case 0: return r$1 = "".concat(t$1, "//").concat(e$1), U[r$1] ? [2, U[r$1]] : (this.verbose && console.log("load lyrics from the external server", t$1), [4, L(this.lyricsParserEndpoint + e$1, (function(e$2) {
						return new Promise((function(r$2, n$2) {
							e$2.Songle.Utils.url2Lyric(t$1, (function(t$2) {
								return r$2(t$2);
							}), (function(t$2) {
								return n$2(t$2);
							}));
						}));
					}), this.verbose)]);
					case 1: return n$1 = o$1.sent(), (i$1 = n$1 ? {
						text: n$1,
						url: t$1
					} : null) && (U[r$1] = i$1), [2, i$1];
				}
			}));
		}));
	}, t.prototype.parseLyricBody = function(t$1, e$1) {
		return g(this, 0, void 0, (function() {
			var r$1;
			return v(this, (function(n$1) {
				switch (n$1.label) {
					case 0: return n$1.trys.push([
						0,
						2,
						,
						3
					]), [4, L(this.lyricsParserEndpoint + e$1, (function(e$2) {
						return e$2.Songle.Utils.parseLyric(t$1);
					}), this.verbose)];
					case 1: return r$1 = n$1.sent(), [3, 3];
					case 2: return n$1.sent(), r$1 = function(t$2) {
						return function(t$3) {
							return t$3 = function(t$4) {
								var e$2, r$2 = t$4.split(/\n/);
								return r$2.forEach((function(t$5, r$3) {
									t$5.match(/^\S+\S+$/m) && (e$2 = r$3);
								})), void 0 !== e$2 && e$2 < 5 ? r$2.slice(e$2 + 1).join("\n") : t$4;
							}(t$3), t$3 = function(t$4) {
								for (var e$2, r$2, n$2, i$1, o$1, s$1 = new RegExp("[(]?(.)[)]?", "g"); null !== (r$2 = s$1.exec(t$4));) n$2 = r$2[1], i$1 = new RegExp("^(" + n$2 + "[\\s\\S]+?)(?=\\n\\n[^\\u3000|\\s])", "m"), null !== (o$1 = t$4.match(i$1)) && (e$2 = o$1[1].replace(new RegExp("^" + n$2, "m"), "").replace(/* @__PURE__ */ new RegExp("^\\n"), "").replace(new RegExp("^\\u3000", "mg"), ""), t$4 = (t$4 = t$4.replace(i$1, (function() {
									return e$2;
								}))).replace(new RegExp("[\\(]?" + n$2 + "[\\)]?", "g"), e$2).replace(new RegExp("^" + n$2, "m"), ""));
								return t$4;
							}(t$3 = t$3.split(/\n/).filter(k).join("\n")), t$3 = function(t$4) {
								var e$2 = new RegExp("[\\u4E00-\\u9FAF|\\uFF66-\\uFF9D|\\u31F0-\\u31FF]+[\\(]([\\u3041-\\u3096\\u309D-\\u309F]+)[\\)]", "g");
								return t$4.replace(e$2, (function(t$5, e$3) {
									return e$3;
								}));
							}(t$3), t$3.split(/\n/).filter(j).join("\n").replace(/\n\n+/g, "\n\n").replace(/\n+$/g, "\n");
						}(t$2.replace(/^\ufeff/, "").replace(/\r/, "").split(/\n/).filter(k).filter((function(t$3) {
							return !t$3.match(/^#/);
						})).join("\n").replace(/^\s+/, ""));
					}(t$1), [3, 3];
					case 3: return [2, r$1];
				}
			}));
		}));
	}, t.prototype.clearLyricBodyCache = function() {
		U = {};
	}, t.prototype.fetchLyricBody = function(t$1, e$1) {
		var r$1, n$1, i$1 = e$1.parserPath, o$1 = e$1.directAccess;
		return g(this, 0, void 0, (function() {
			var e$2, s$1;
			return v(this, (function(a$1) {
				switch (a$1.label) {
					case 0:
						if (O(t$1)) return this.verbose && console.log("load lyrics from the data url", t$1), [2, { text: S(t$1) }];
						if (this.isUploaderUrl(t$1)) return [2, this.fetchSongleLyricBody(t$1, i$1)];
						if (c.isPiaproUrl(t$1)) return [2, this.fetchPiaproLyricBody(t$1, i$1)];
						a$1.label = 1;
					case 1: return a$1.trys.push([
						1,
						5,
						,
						6
					]), e$2 = new URL(t$1), o$1 || "undefined" != typeof location && location.protocol !== e$2.protocol && "https:" !== e$2.protocol ? [3, 4] : "undefined" != typeof location && location.hostname !== e$2.hostname ? [3, 2] : (o$1 = !0, [3, 4]);
					case 2: return [4, b("".concat(this.localLyricsEndpoint, "/cors"), { url: t$1 })];
					case 3: s$1 = a$1.sent(), o$1 = s$1 && 200 === s$1.status && (null === (n$1 = null === (r$1 = s$1.data) || void 0 === r$1 ? void 0 : r$1.data) || void 0 === n$1 ? void 0 : n$1.enabled), a$1.label = 4;
					case 4: return o$1 ? (this.verbose && console.log("load lyrics directly", t$1), [2, this.fetchCrossOriginLyricBody(t$1, i$1)]) : [3, 6];
					case 5: return a$1.sent(), [3, 6];
					case 6: return [2, this.fetchProxiedLyricBody(t$1, i$1)];
				}
			}));
		}));
	}, t.prototype.post = function(t$1) {
		return g(this, 0, void 0, (function() {
			var e$1, r$1;
			return v(this, (function(n$1) {
				switch (n$1.label) {
					case 0: return e$1 = t$1.forceUpdate ? {
						url: t$1.lyricsUrl,
						force_create: "true"
					} : { url: t$1.lyricsUrl }, [4, P("".concat(this.lyricsPostEndpoint, "/songs/").concat(t$1.songId, "/lyrics.json"), e$1)];
					case 1: return (r$1 = n$1.sent()) && 200 === r$1.status && r$1.data ? [2, {
						success: !0,
						lyricsId: r$1.data.id
					}] : [2, {
						success: !1,
						error: "failed to update lyrics url"
					}];
				}
			}));
		}));
	}, t.prototype.postPrivate = function(t$1) {
		return g(this, 0, void 0, (function() {
			var e$1, r$1, n$1, i$1, o$1, s$1, a$1, u$1, c$1, l$1, p$1;
			return v(this, (function(h$1) {
				switch (h$1.label) {
					case 0: return [4, A.getProfile()];
					case 1:
						if (e$1 = h$1.sent(), !A.isSongleUser(e$1)) throw new Error("Songle authentication is required");
						return A.isSpoofingSongleUser(e$1) ? (n$1 = e$1.user, i$1 = n$1.songleUserId, o$1 = n$1.songleAccessToken, s$1 = n$1.songleRefreshToken, a$1 = {
							songleUserId: i$1,
							songleAccessToken: o$1,
							songleRefreshToken: s$1
						}, r$1 = "?" + Object.keys(a$1).map((function(t$2) {
							return "".concat(t$2, "=").concat(encodeURIComponent(a$1[t$2]));
						})).join("&")) : r$1 = "", u$1 = t$1.songId, c$1 = t$1.lyricsText, (l$1 = new FormData()).append("text", c$1), [4, P("".concat(m.textalive.server, "/songle/me/songs/").concat(u$1, "/lyrics.json").concat(r$1), l$1, { withCredentials: !0 })];
					case 2: return (p$1 = h$1.sent()) && 200 === p$1.status && p$1.data ? [2, {
						success: !0,
						lyrics: p$1.data.data.lyric
					}] : [2, {
						success: !1,
						error: "failed to post lyrics text"
					}];
				}
			}));
		}));
	}, t.prototype.update = function(t$1) {
		var e$1;
		return g(this, 0, void 0, (function() {
			var r$1;
			return v(this, (function(n$1) {
				switch (n$1.label) {
					case 0: return [4, P("".concat(this.lyricsPostEndpoint, "/songs/").concat(t$1.songCode, "/lyrics/").concat(t$1.lyricsId, "/diffs.json"), t$1.lyricsData ? { lyric: JSON.stringify(t$1.lyricsData) } : { source_diff_id: t$1.lyricsDiffId })];
					case 1: return r$1 = n$1.sent(), [2, (null === (e$1 = null == r$1 ? void 0 : r$1.data) || void 0 === e$1 ? void 0 : e$1.lyric_diff) ? {
						success: 200 === r$1.status,
						lyricsId: r$1.data.lyric_diff.lyric_id,
						lyricsDiffId: r$1.data.lyric_diff.id
					} : { success: 200 === r$1.status }];
				}
			}));
		}));
	}, t;
}();
function L(t, e$1, r$1) {
	var n$1, i$1 = this;
	return "undefined" == typeof window || !(null === (n$1 = null === window || void 0 === window ? void 0 : window.navigator) || void 0 === n$1 ? void 0 : n$1.userAgent) || window.navigator.userAgent.includes("Node.js") || window.navigator.userAgent.includes("jsdom") ? function(t$1, e$2, r$2) {
		return r$2 && console.log("parse lyrics: loading on Node.js", t$1), new Promise((function(r$3, n$2) {
			b(t$1, { responseType: "text" }).then((function(t$2) {
				var i$2 = t$2.data, o$1 = new Function("let g=global;global={};".concat(i$2, ";let res=global;global=g")), s$1 = {};
				try {
					o$1.bind(s$1)(), r$3(e$2(s$1));
				} catch (t$3) {
					n$2(t$3);
				}
			})).catch(n$2);
		}));
	}(t, e$1, r$1) : (r$1 && console.log("parse lyrics: loading", t), new Promise((function(n$2, o$1) {
		try {
			var s$1 = document.createElement("script"), a$1 = null;
			window.module && (a$1 = window.module, delete window.module), s$1.src = t, s$1.onload = function() {
				return g(i$1, 0, void 0, (function() {
					var i$2, u$1;
					return v(this, (function(c$1) {
						switch (c$1.label) {
							case 0: document.body.removeChild(s$1), r$1 && console.log("parse lyrics: load", t), window.Songle && window.Songle.Utils && window.Songle.Utils.url2Lyric || (a$1 && (window.module = a$1), o$1("url2Lyric not found")), c$1.label = 1;
							case 1: return c$1.trys.push([
								1,
								3,
								4,
								5
							]), i$2 = n$2, [4, e$1(window)];
							case 2: return i$2.apply(void 0, [c$1.sent()]), [3, 5];
							case 3: return u$1 = c$1.sent(), o$1(u$1), [3, 5];
							case 4: return a$1 && (window.module = a$1), [7];
							case 5: return [2];
						}
					}));
				}));
			}, s$1.onerror = function(t$1) {
				return o$1(t$1.message);
			}, document.body.appendChild(s$1);
		} catch (e$2) {
			console.error("failed to call lyrics parser", t, e$2);
		}
	})));
}
var D = new F(), M = {}, B = {}, V = new (function() {
	function t() {}
	return Object.defineProperty(t.prototype, "endpoint", {
		get: function() {
			return m.textalive.server;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "songleEndpoint", {
		get: function() {
			return m.songle.server;
		},
		enumerable: !1,
		configurable: !0
	}), t.prototype.getSongPathFromUrl = function(t$1) {
		return c.getSongPathFromUrl(t$1);
	}, t.prototype.isUploaderUrl = function(t$1) {
		return c.isUploaderUrl(t$1);
	}, t.prototype.isUploaderPath = function(t$1) {
		return c.isUploaderPath(t$1);
	}, t.prototype.getUploaderGuid = function(t$1) {
		return c.getUploaderGuid(t$1);
	}, t.prototype.getAltSongUrlFromUploaderGuid = function(t$1) {
		return c.getAltSongUrlFromUploaderGuid(t$1);
	}, t.prototype.getSongUrlFromUploaderGuid = function(t$1) {
		return c.getSongUrlFromUploaderGuid(t$1);
	}, t.prototype.getSongUrlFromPath = function(t$1) {
		return c.getSongUrlFromPath(t$1);
	}, t.prototype.isYouTubeUrl = function(t$1) {
		return c.isYouTubeUrl(t$1);
	}, t.prototype.isNicovideoUrl = function(t$1) {
		return c.isNicovideoUrl(t$1);
	}, t.prototype.isVideoSiteUrl = function(t$1) {
		return c.isVideoSiteUrl(t$1);
	}, t.prototype.isPiaproUrl = function(t$1) {
		return c.isPiaproUrl(t$1);
	}, t.prototype.load = function(t$1) {
		return g(this, 0, void 0, (function() {
			var e$1, r$1;
			return v(this, (function(n$1) {
				switch (n$1.label) {
					case 0: return e$1 = t$1.code || "number" == typeof t$1.id && String(t$1.id) || encodeURIComponent(t$1.songPath), M[e$1] ? [2, M[e$1]] : (M[e$1] = this.doLoad(e$1), [4, M[e$1]]);
					case 1: return r$1 = n$1.sent(), this.use(r$1), [2, r$1];
				}
			}));
		}));
	}, t.prototype.use = function(t$1) {
		if (t$1) {
			var e$1 = String(t$1.song.id), r$1 = t$1.song.code, n$1 = this.getSongPathFromUrl(t$1.song.permalink);
			M[e$1] = M[r$1] = M[n$1] = Promise.resolve(t$1);
		}
	}, t.prototype.clearCache = function() {
		M = {}, B = {};
	}, t.prototype.doLoad = function(t$1) {
		var e$1;
		return g(this, 0, void 0, (function() {
			var r$1, n$1, i$1;
			return v(this, (function(o$1) {
				switch (o$1.label) {
					case 0: return [4, b("".concat(this.songleEndpoint, "/songs/").concat(t$1, "?format=json"))];
					case 1: return (r$1 = o$1.sent()) && 200 === r$1.status ? (n$1 = r$1.data, this.isUploaderUrl(null === (e$1 = null == n$1 ? void 0 : n$1.song) || void 0 === e$1 ? void 0 : e$1.permalink) ? [4, this.doLoadPrivateSong(n$1.song.id)] : [3, 3]) : [2, null];
					case 2:
						if (i$1 = o$1.sent()) return n$1.status = n$1.status || {}, n$1.status.owner = !0, [2, y(y({}, n$1), { song: i$1 })];
						n$1.status = n$1.status || {}, n$1.status.owner = !1, o$1.label = 3;
					case 3: return [2, n$1];
				}
			}));
		}));
	}, t.prototype.doLoadPrivateSong = function(t$1) {
		var e$1, r$1;
		return g(this, 0, void 0, (function() {
			var n$1, i$1, o$1, s$1, a$1, u$1, c$1;
			return v(this, (function(l$1) {
				switch (l$1.label) {
					case 0: return [4, A.getProfile()];
					case 1: return n$1 = l$1.sent(), A.isSongleUser(n$1) ? (A.isSpoofingSongleUser(n$1) && (o$1 = n$1.user, s$1 = o$1.songleUserId, a$1 = o$1.songleAccessToken, u$1 = o$1.songleRefreshToken, i$1 = {
						songleUserId: s$1,
						songleAccessToken: a$1,
						songleRefreshToken: u$1
					}), [4, b("".concat(this.endpoint, "/songle/me/songs/").concat(t$1, ".json"), i$1, { withCredentials: !0 })]) : [2, null];
					case 2: return (c$1 = l$1.sent()) && 200 === c$1.status && (null === (r$1 = null === (e$1 = c$1.data) || void 0 === e$1 ? void 0 : e$1.data) || void 0 === r$1 ? void 0 : r$1.song) ? [2, c$1.data.data.song] : [2, null];
				}
			}));
		}));
	}, t.prototype.loadInfo = function(t$1, e$1) {
		return g(this, 0, void 0, (function() {
			var r$1;
			return v(this, (function(n$1) {
				return r$1 = this.cacheKey(t$1, e$1), B[r$1] || (B[r$1] = this.doLoadInfo(t$1, {
					min: !0,
					revisions: null == e$1 ? void 0 : e$1.revisions
				})), [2, B[r$1]];
			}));
		}));
	}, t.prototype.loadDetailInfo = function(t$1, e$1) {
		return g(this, 0, void 0, (function() {
			var r$1;
			return v(this, (function(n$1) {
				return r$1 = this.cacheKey(t$1, e$1) + "/dt", B[r$1] || (B[r$1] = this.doLoadInfo(t$1, {
					min: !1,
					revisions: null == e$1 ? void 0 : e$1.revisions
				})), [2, B[r$1]];
			}));
		}));
	}, t.prototype.cacheKey = function(t$1, e$1) {
		var r$1 = String(t$1);
		return null != e$1 && e$1.revisions && ("number" == typeof e$1.revisions.chord && (r$1 += "/cd" + e$1.revisions.chord), "number" == typeof e$1.revisions.beat && (r$1 += "/bt" + e$1.revisions.beat), "number" == typeof e$1.revisions.chorus && (r$1 += "/cr" + e$1.revisions.chorus)), r$1;
	}, t.prototype.doLoadInfo = function(t$1, e$1) {
		var r$1 = void 0 === e$1 ? { min: !0 } : e$1, n$1 = r$1.min, i$1 = r$1.revisions;
		return g(this, 0, void 0, (function() {
			var e$2, r$2;
			return v(this, (function(o$1) {
				switch (o$1.label) {
					case 0: return e$2 = { min: n$1 ? 1 : 0 }, "number" == typeof (null == i$1 ? void 0 : i$1.chord) && (e$2.chord_revision_id = i$1.chord), "number" == typeof (null == i$1 ? void 0 : i$1.beat) && (e$2.beat_revision_id = i$1.beat), "number" == typeof (null == i$1 ? void 0 : i$1.chorus) && (e$2.chorus_revision_id = i$1.chorus), [4, b("".concat(this.songleEndpoint, "/songs/").concat(t$1, "/info.json"), e$2)];
					case 1: return (r$2 = o$1.sent()) && 200 === r$2.status ? [2, r$2.data] : [2, null];
				}
			}));
		}));
	}, t.prototype.loadVocalAmplitude = function(t$1) {
		return g(this, 0, void 0, (function() {
			var e$1;
			return v(this, (function(r$1) {
				switch (r$1.label) {
					case 0: return [4, b("".concat(this.songleEndpoint, "/songs/").concat(t$1, "/vamplitude.json"))];
					case 1: return (e$1 = r$1.sent()) && 200 === e$1.status && e$1.data ? [2, e$1.data] : [2, null];
				}
			}));
		}));
	}, t.prototype.loadValenceArousal = function(t$1) {
		return g(this, 0, void 0, (function() {
			var e$1;
			return v(this, (function(r$1) {
				switch (r$1.label) {
					case 0: return [4, b("".concat(this.songleEndpoint, "/songs/").concat(t$1, "/av.json"))];
					case 1: return (e$1 = r$1.sent()) && 200 === e$1.status && e$1.data ? [2, e$1.data] : [2, null];
				}
			}));
		}));
	}, t.prototype.list = function(t$1) {
		return void 0 === t$1 && (t$1 = {}), g(this, 0, void 0, (function() {
			var e$1;
			return v(this, (function(r$1) {
				switch (r$1.label) {
					case 0: return [4, b(this.endpoint + "/songs", t$1)];
					case 1: return (e$1 = r$1.sent()) && 200 === e$1.status ? [2, e$1.data] : [2, null];
				}
			}));
		}));
	}, t.prototype.listPrivate = function(t$1) {
		return void 0 === t$1 && (t$1 = {}), g(this, 0, void 0, (function() {
			var e$1, r$1, n$1, i$1, o$1, s$1, a$1;
			return v(this, (function(u$1) {
				switch (u$1.label) {
					case 0: return [4, A.getProfile()];
					case 1: return e$1 = u$1.sent(), A.isSongleUser(e$1) ? (r$1 = {}, A.isSpoofingSongleUser(e$1) && (n$1 = e$1.user, i$1 = n$1.songleUserId, o$1 = n$1.songleAccessToken, s$1 = n$1.songleRefreshToken, r$1 = {
						songleUserId: i$1,
						songleAccessToken: o$1,
						songleRefreshToken: s$1
					}), "number" == typeof t$1.page && (r$1.page = t$1.page), "number" == typeof t$1.perPage && (r$1.per_page = t$1.perPage), [4, b("".concat(this.endpoint, "/songle/me/songs.json"), y(y({}, r$1), { private: !0 }), { withCredentials: !0 })]) : [2, {
						data: null,
						error: "Songle authentication is required"
					}];
					case 2: return (a$1 = u$1.sent()) && 200 === a$1.status ? [2, a$1.data] : [2, {
						data: null,
						error: "private songs not found"
					}];
				}
			}));
		}));
	}, t.prototype.create = function(t$1) {
		return g(this, 0, void 0, (function() {
			return v(this, (function(e$1) {
				return [2, this.doCreate(t$1, !1)];
			}));
		}));
	}, t.prototype.createPrivate = function(t$1) {
		return g(this, 0, void 0, (function() {
			var e$1;
			return v(this, (function(r$1) {
				switch (r$1.label) {
					case 0: return [4, A.getProfile()];
					case 1: return e$1 = r$1.sent(), A.isSongleUser(e$1) ? [2, this.doCreate(t$1, !0)] : [2, {
						success: !1,
						song: null,
						error: "Songle authentication is required"
					}];
				}
			}));
		}));
	}, t.prototype.doCreate = function(t$1, e$1) {
		var r$1, n$1;
		return g(this, 0, void 0, (function() {
			var i$1, o$1, s$1, a$1, u$1;
			return v(this, (function(c$1) {
				switch (c$1.label) {
					case 0: return i$1 = t$1.url, o$1 = t$1.name, s$1 = t$1.artistName, [4, A.getToken()];
					case 1: return a$1 = c$1.sent(), [4, P(e$1 ? this.endpoint + "/etc/songs/private" : this.endpoint + "/etc/songs", {
						url: i$1,
						name: o$1,
						artist: s$1
					}, {
						postToken: a$1,
						withCredentials: !0
					})];
					case 2: return (u$1 = c$1.sent()) && 200 === u$1.status ? e$1 ? [2, {
						success: !0,
						song: u$1.data.data.song
					}] : [2, {
						success: !0,
						song: u$1.data.song
					}] : [2, {
						success: !1,
						error: ((null === (r$1 = null == u$1 ? void 0 : u$1.data) || void 0 === r$1 ? void 0 : r$1.data) ? u$1.data.data.message : null === (n$1 = null == u$1 ? void 0 : u$1.data) || void 0 === n$1 ? void 0 : n$1.message) || "failed to register a song"
					}];
				}
			}));
		}));
	}, t.prototype.uploadPrivate = function(t$1) {
		return g(this, 0, void 0, (function() {
			var e$1, r$1, n$1, i$1, o$1, s$1, a$1, u$1, c$1;
			return v(this, (function(l$1) {
				switch (l$1.label) {
					case 0: return [4, A.getProfile()];
					case 1:
						if (e$1 = l$1.sent(), !A.isSongleUser(e$1)) throw new Error("Songle authentication is required");
						return A.isSpoofingSongleUser(e$1) ? (n$1 = e$1.user, i$1 = n$1.songleUserId, o$1 = n$1.songleAccessToken, s$1 = n$1.songleRefreshToken, a$1 = {
							songleUserId: i$1,
							songleAccessToken: o$1,
							songleRefreshToken: s$1
						}, r$1 = "?" + Object.keys(a$1).map((function(t$2) {
							return "".concat(t$2, "=").concat(encodeURIComponent(a$1[t$2]));
						})).join("&")) : r$1 = "", (u$1 = new FormData()).append("file", t$1), [4, P("".concat(this.endpoint, "/songle/me/uploads.json").concat(r$1), u$1, { withCredentials: !0 })];
					case 2: return (c$1 = l$1.sent()) && 200 === c$1.status && c$1.data ? [2, c$1.data.data] : [2, null];
				}
			}));
		}));
	}, t.prototype.search = function(t$1, e$1) {
		return void 0 === e$1 && (e$1 = !0), g(this, 0, void 0, (function() {
			var r$1;
			return v(this, (function(n$1) {
				switch (n$1.label) {
					case 0: return [4, b("".concat(this.songleEndpoint, "/songs/search.json"), {
						q: t$1,
						lyrics: e$1 ? 1 : 0
					})];
					case 1: return (r$1 = n$1.sent()) && 200 === r$1.status && r$1.data ? [2, {
						success: !0,
						data: r$1.data
					}] : [2, { success: !1 }];
				}
			}));
		}));
	}, t.prototype.copySongMap = function(t$1) {
		var e$1;
		return g(this, 0, void 0, (function() {
			var r$1, n$1, i$1, o$1;
			return v(this, (function(s$1) {
				switch (s$1.label) {
					case 0: return r$1 = t$1.sourceId, n$1 = t$1.destinationId, i$1 = t$1.types || [
						"beat",
						"chord",
						"chorus",
						"melody"
					], [4, P("".concat(this.endpoint, "/songle/me/songs/").concat(n$1, "/actions/copy_music_map.json"), {
						source_id: r$1,
						types: i$1
					}, { withCredentials: !0 })];
					case 1: return (o$1 = s$1.sent()) && (null === (e$1 = o$1.data) || void 0 === e$1 ? void 0 : e$1.success) ? [2, { success: !0 }] : [2, {
						success: !1,
						error: null == o$1 ? void 0 : o$1.data
					}];
				}
			}));
		}));
	}, t.prototype.createStage = function() {
		var t$1;
		return g(this, 0, void 0, (function() {
			var e$1, r$1;
			return v(this, (function(n$1) {
				switch (n$1.label) {
					case 0: return [4, A.getProfile()];
					case 1: return e$1 = n$1.sent(), [4, P("".concat(this.endpoint, "/etc/songs/stage"), null, {
						postToken: null === (t$1 = null == e$1 ? void 0 : e$1.status) || void 0 === t$1 ? void 0 : t$1.token,
						withCredentials: !0
					})];
					case 2: return [2, (null == (r$1 = n$1.sent()) ? void 0 : r$1.data) || null];
				}
			}));
		}));
	}, t;
}())(), q = new (function() {
	function t() {}
	return Object.defineProperty(t.prototype, "endpoint", {
		get: function() {
			return "".concat(m.textalive.server, "/templates/");
		},
		enumerable: !1,
		configurable: !0
	}), t.prototype.list = function(t$1) {
		return g(this, 0, void 0, (function() {
			var e$1;
			return v(this, (function(r$1) {
				switch (r$1.label) {
					case 0: return [4, b("".concat(this.endpoint), t$1)];
					case 1: return (e$1 = r$1.sent()) && 200 === e$1.status ? [2, e$1.data] : [2, null];
				}
			}));
		}));
	}, t.prototype.load = function(t$1) {
		return g(this, 0, void 0, (function() {
			var e$1;
			return v(this, (function(r$1) {
				switch (r$1.label) {
					case 0: return [4, b("".concat(this.endpoint + t$1))];
					case 1: return (e$1 = r$1.sent()) && 200 === e$1.status ? [2, e$1.data] : [2, null];
				}
			}));
		}));
	}, t.prototype.loadByName = function(t$1) {
		return g(this, 0, void 0, (function() {
			var e$1, r$1, n$1;
			return v(this, (function(i$1) {
				switch (i$1.label) {
					case 0: return r$1 = "latest", t$1 && (e$1 = t$1.match(/(.+)@([0-9]+)/)) && (t$1 = e$1[1], r$1 = e$1[2]), [4, b("".concat(this.endpoint + t$1, "/").concat(r$1))];
					case 1: return (n$1 = i$1.sent()) && 200 === n$1.status ? [2, n$1.data] : "latest" !== r$1 ? [2, this.loadByName(t$1)] : [2, null];
				}
			}));
		}));
	}, t.prototype.loadForVideo = function(t$1, e$1) {
		return void 0 === e$1 && (e$1 = {
			script: !0,
			withoutAuthors: !0
		}), g(this, 0, void 0, (function() {
			var r$1;
			return v(this, (function(n$1) {
				switch (n$1.label) {
					case 0: return [4, b("".concat(this.endpoint, "for/").concat(t$1), e$1)];
					case 1: return (r$1 = n$1.sent()) && 200 === r$1.status ? [2, r$1.data] : [2, null];
				}
			}));
		}));
	}, t.prototype.create = function(t$1) {
		return g(this, 0, void 0, (function() {
			var e$1, r$1, n$1;
			return v(this, (function(i$1) {
				switch (i$1.label) {
					case 0: return [4, A.getToken()];
					case 1: return e$1 = i$1.sent(), [4, P(this.endpoint, t$1, {
						postToken: e$1,
						withCredentials: !0
					})];
					case 2: return (r$1 = i$1.sent()) ? 200 !== r$1.status || Array.isArray(r$1.data) || r$1.data.error ? (n$1 = Array.isArray(r$1.data) ? { parseErrors: r$1.data } : r$1.data, [2, y(y({}, n$1), { success: !1 })]) : [2, y(y({}, r$1.data), { success: !0 })] : [2, { success: !1 }];
				}
			}));
		}));
	}, t.prototype.listContributors = function(t$1, e$1) {
		return g(this, 0, void 0, (function() {
			var r$1;
			return v(this, (function(n$1) {
				switch (n$1.label) {
					case 0: return [4, b("".concat(this.endpoint).concat(t$1, "/").concat(e$1, "/contributors"))];
					case 1: return (r$1 = n$1.sent()) && 200 === r$1.status ? [2, r$1.data] : [2, null];
				}
			}));
		}));
	}, t;
}())(), W = new (function() {
	function t() {}
	return Object.defineProperty(t.prototype, "endpoint", {
		get: function() {
			return "".concat(m.textalive.server, "/videos/");
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "rendererEndpoint", {
		get: function() {
			return "".concat(m.textalive.server, "/renderer/");
		},
		enumerable: !1,
		configurable: !0
	}), t.prototype.list = function(t$1) {
		return g(this, 0, void 0, (function() {
			var e$1;
			return v(this, (function(r$1) {
				switch (r$1.label) {
					case 0: return [4, b("".concat(this.endpoint), t$1)];
					case 1: return (e$1 = r$1.sent()) && 200 === e$1.status ? [2, e$1.data] : [2, null];
				}
			}));
		}));
	}, t.prototype.load = function(t$1) {
		return g(this, 0, void 0, (function() {
			var e$1, r$1, n$1, i$1, o$1, s$1, a$1;
			return v(this, (function(u$1) {
				switch (u$1.label) {
					case 0: return e$1 = {}, [4, A.getProfile()];
					case 1: return r$1 = u$1.sent(), A.isSpoofingSongleUser(r$1) && (n$1 = r$1.user, i$1 = n$1.songleUserId, o$1 = n$1.songleAccessToken, s$1 = n$1.songleRefreshToken, e$1 = {
						songleUserId: i$1,
						songleAccessToken: o$1,
						songleRefreshToken: s$1
					}), [4, b("".concat(this.endpoint + t$1), e$1, { withCredentials: !0 })];
					case 2: return (a$1 = u$1.sent()) && 200 === a$1.status ? [2, a$1.data] : [2, null];
				}
			}));
		}));
	}, t.prototype.create = function(t$1) {
		return g(this, 0, void 0, (function() {
			var e$1, r$1;
			return v(this, (function(n$1) {
				switch (n$1.label) {
					case 0: return [4, A.getToken()];
					case 1: return e$1 = n$1.sent(), [4, P(this.endpoint, t$1, {
						postToken: e$1,
						withCredentials: !0
					})];
					case 2: return (r$1 = n$1.sent()) ? 200 !== r$1.status || r$1.data.error ? [2, y(y({}, r$1.data), { success: !1 })] : [2, y(y({}, r$1.data), { success: !0 })] : [2, { success: !1 }];
				}
			}));
		}));
	}, t.prototype.delete = function(t$1) {
		return g(this, 0, void 0, (function() {
			var e$1, r$1;
			return v(this, (function(n$1) {
				switch (n$1.label) {
					case 0: return [4, A.getToken()];
					case 1: return e$1 = n$1.sent(), [4, P("".concat(this.endpoint, "delete"), { id: t$1 }, {
						postToken: e$1,
						withCredentials: !0
					})];
					case 2: return (r$1 = n$1.sent()) && 200 === r$1.status ? [2, {
						success: !0,
						video: r$1.data
					}] : [2, {
						success: !1,
						video: null
					}];
				}
			}));
		}));
	}, t.prototype.listContributors = function(t$1) {
		return g(this, 0, void 0, (function() {
			var e$1;
			return v(this, (function(r$1) {
				switch (r$1.label) {
					case 0: return [4, b("".concat(this.endpoint).concat(t$1, "/contributors"), null, { withCredentials: !0 })];
					case 1: return (e$1 = r$1.sent()) && 200 === e$1.status ? [2, e$1.data] : [2, null];
				}
			}));
		}));
	}, t.prototype.listRenderings = function(t$1) {
		return g(this, 0, void 0, (function() {
			var e$1;
			return v(this, (function(r$1) {
				switch (r$1.label) {
					case 0: return [4, b("".concat(this.rendererEndpoint, "list"), { videoId: t$1 }, { withCredentials: !0 })];
					case 1: return (e$1 = r$1.sent()) && 200 === e$1.status ? [2, e$1.data] : [2, null];
				}
			}));
		}));
	}, t.prototype.getRenderingStatus = function(t$1) {
		return g(this, 0, void 0, (function() {
			var e$1;
			return v(this, (function(r$1) {
				switch (r$1.label) {
					case 0: return [4, b("".concat(this.rendererEndpoint, "status"), { id: t$1 }, { withCredentials: !0 })];
					case 1: return (e$1 = r$1.sent()) && 200 === e$1.status ? [2, e$1.data] : [2, null];
				}
			}));
		}));
	}, t.prototype.render = function(t$1, e$1, r$1) {
		return g(this, 0, void 0, (function() {
			var n$1, i$1, o$1;
			return v(this, (function(s$1) {
				switch (s$1.label) {
					case 0: return [4, A.getToken()];
					case 1: return n$1 = s$1.sent(), i$1 = {
						token: n$1,
						videoId: t$1,
						quality: e$1
					}, r$1 && (i$1.authentication = !0), [4, P("".concat(this.rendererEndpoint, "render"), i$1, { withCredentials: !0 })];
					case 2: return (o$1 = s$1.sent()) && 200 === o$1.status ? [2, o$1.data] : [2, null];
				}
			}));
		}));
	}, t.prototype.getDownloadInfo = function() {
		return g(this, 0, void 0, (function() {
			var t$1;
			return v(this, (function(e$1) {
				switch (e$1.label) {
					case 0: return t$1 = { endpoint: "".concat(this.rendererEndpoint, "download") }, [4, A.getToken()];
					case 1: return [2, (t$1.token = e$1.sent(), t$1)];
				}
			}));
		}));
	}, t;
}())(), Y = {
	asset: w,
	endpoint: m,
	lyrics: D,
	song: V,
	template: q,
	text: R,
	font: C,
	user: A,
	video: W
}, z = function(t, e$1) {
	return z = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t$1, e$2) {
		t$1.__proto__ = e$2;
	} || function(t$1, e$2) {
		for (var r$1 in e$2) Object.prototype.hasOwnProperty.call(e$2, r$1) && (t$1[r$1] = e$2[r$1]);
	}, z(t, e$1);
};
function J(t, e$1) {
	if ("function" != typeof e$1 && null !== e$1) throw new TypeError("Class extends value " + String(e$1) + " is not a constructor or null");
	function r$1() {
		this.constructor = t;
	}
	z(t, e$1), t.prototype = null === e$1 ? Object.create(e$1) : (r$1.prototype = e$1.prototype, new r$1());
}
function H(t, e$1, r$1) {
	if (2 === arguments.length) for (var n$1, i$1 = 0, o$1 = e$1.length; i$1 < o$1; i$1++) !n$1 && i$1 in e$1 || (n$1 || (n$1 = Array.prototype.slice.call(e$1, 0, i$1)), n$1[i$1] = e$1[i$1]);
	return t.concat(n$1 || Array.prototype.slice.call(e$1));
}
var X = function() {
	function t(t$1) {
		this.a = 0, this.r = 0, this.g = 0, this.b = 0, this.from(t$1);
	}
	return Object.defineProperty(t.prototype, "value", {
		get: function() {
			return this.valueArgb;
		},
		set: function(t$1) {
			this.fromNumber(t$1, !0);
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "valueArgb", {
		get: function() {
			return this.valueRgb + 16777216 * (255 & this.a);
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "valueRgb", {
		get: function() {
			return ((255 & this.r) << 8 | 255 & this.g) << 8 | 255 & this.b;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "hexRgb", {
		get: function() {
			return ("000000" + (16777215 & this.value).toString(16)).slice(-6);
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "hexA", {
		get: function() {
			return ("00" + (255 & this.a).toString(16)).slice(-2);
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "rgb", {
		get: function() {
			return "#".concat(this.hexRgb);
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "cssRgb", {
		get: function() {
			return "rgb(" + this.r + "," + this.g + "," + this.b + ")";
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "rgba", {
		get: function() {
			return "".concat(this.rgb).concat(this.hexA);
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "argb", {
		get: function() {
			return "0x".concat(this.hexA).concat(this.rgb.substring(1));
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "cssRgba", {
		get: function() {
			return "rgba(" + this.r + "," + this.g + "," + this.b + "," + this.a / 255 + ")";
		},
		enumerable: !1,
		configurable: !0
	}), t.prototype.eq = function(e$1) {
		return typeof this == typeof e$1 && e$1 instanceof t && this.value === e$1.value;
	}, t.prototype.toString = function(t$1) {
		return void 0 === t$1 && (t$1 = !0), t$1 ? this.rgba : this.rgb;
	}, t.prototype.from = function(t$1) {
		if (void 0 === t$1 && (t$1 = "#000"), "object" == typeof t$1) {
			if (!t$1) return;
			"number" == typeof t$1.value ? this.value = t$1.value : "number" == typeof t$1.r && "number" == typeof t$1.g && "number" == typeof t$1.b && (this.a = "number" == typeof t$1.a ? t$1.a : 255, this.r = t$1.r, this.g = t$1.g, this.b = t$1.b);
			return;
		}
		"string" == typeof t$1 ? this.fromString(t$1) : "number" == typeof t$1 && this.fromNumber(t$1);
	}, t.prototype.fromString = function(t$1) {
		if (t$1) {
			if ("#" === t$1.charAt(0) && (t$1 = t$1.substring(1)), 4 === t$1.length) {
				var e$1 = t$1.charAt(0), r$1 = t$1.charAt(1), n$1 = t$1.charAt(2), i$1 = t$1.charAt(3);
				t$1 = "".concat(e$1).concat(e$1).concat(r$1).concat(r$1).concat(n$1).concat(n$1).concat(i$1).concat(i$1);
			} else 3 === t$1.length && (e$1 = t$1.charAt(0), r$1 = t$1.charAt(1), n$1 = t$1.charAt(2), t$1 = "".concat(e$1).concat(e$1).concat(r$1).concat(r$1).concat(n$1).concat(n$1)), 6 === t$1.length && (t$1 = "".concat(t$1, "ff"));
			var o$1 = parseInt("".concat(t$1.substring(6)).concat(t$1.substring(0, 6)), 16);
			this.fromNumber(o$1, !0);
		}
	}, t.prototype.fromNumber = function(t$1, e$1) {
		void 0 === e$1 && (e$1 = !0), isNaN(t$1) || (this.a = e$1 ? t$1 >>> 24 & 255 : 0, this.r = t$1 >>> 16 & 255, this.g = t$1 >>> 8 & 255, this.b = t$1 >>> 0 & 255);
	}, t;
}();
var Z = function() {
	function t(t$1, e$1, r$1) {
		void 0 === t$1 && (t$1 = "Noto Sans Japanese"), void 0 === e$1 && (e$1 = 40), void 0 === r$1 && (r$1 = ""), this._family = t$1, this._size = e$1, this._style = r$1;
	}
	return Object.defineProperty(t.prototype, "family", {
		get: function() {
			return this._family;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "size", {
		get: function() {
			return this._size;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "style", {
		get: function() {
			return this._style;
		},
		enumerable: !1,
		configurable: !0
	}), t.prototype.deriveFamily = function(e$1) {
		return new t(e$1, this._size, this._style);
	}, t.prototype.deriveStyle = function(e$1) {
		return new t(this._family, this._size, e$1);
	}, t.prototype.deriveSize = function(e$1) {
		return new t(this._family, e$1, this._style);
	}, t.prototype.clone = function() {
		return new t(this._family, this._size, this._style);
	}, t.prototype.eq = function(t$1) {
		return this._family === t$1._family && this._size === t$1._size && this._style === t$1._style;
	}, t.prototype.toString = function(t$1) {
		void 0 === t$1 && (t$1 = 1);
		var e$1, r$1 = function(t$2) {
			if (!t$2 || t$2.length <= 0) return [];
			for (var e$2 = [], r$2 = "", n$1 = !1, i$1 = !1, o$1 = !1, s$1 = 0, a$1 = t$2; s$1 < a$1.length; s$1++) {
				var u$1 = a$1[s$1];
				if (i$1 ? o$1 ? o$1 = !1 : "\\" === u$1 ? o$1 = !0 : u$1 === i$1 && (i$1 = !1) : "\"" === u$1 || "'" === u$1 ? i$1 = u$1 : "," === u$1 && (n$1 = !0), n$1) {
					var c$1 = r$2.trim();
					"" !== c$1 && e$2.push(c$1), r$2 = "", n$1 = !1;
				} else r$2 += u$1;
			}
			var l$1 = r$2.trim();
			return "" !== l$1 && e$2.push(l$1), e$2;
		}(this._family);
		return e$1 = r$1.length < 1 ? "" : r$1.length > 1 ? " " + r$1.join(", ") : (e$1 = r$1[0]).length > 1 && e$1[0] !== e$1[e$1.length - 1] || "'" !== e$1[0] && "\"" !== e$1[0] ? " '".concat(e$1, "'") : " ".concat(e$1), this._style + (this._style.length > 0 ? " " : "") + this._size * t$1 + "px" + e$1;
	}, t;
}(), $ = function() {
	function t() {}
	return Object.defineProperty(t.prototype, "duration", {
		get: function() {
			return this.endTime - this.startTime;
		},
		enumerable: !1,
		configurable: !0
	}), t.prototype.contains = function(t$1) {
		return t$1 >= this.startTime && t$1 <= this.endTime;
	}, t.prototype.overlaps = function(t$1, e$1) {
		if ("object" == typeof t$1) return this.overlaps(t$1.startTime, t$1.endTime);
		var r$1 = t$1;
		return this.contains(r$1) || this.contains(e$1) || this.startTime <= r$1 && this.endTime >= e$1;
	}, t.prototype.progress = function(t$1) {
		return this.contains(t$1) ? (t$1 - this.startTime) / this.duration : -1;
	}, t;
}(), K = function(t) {
	function e$1() {
		var e$2 = null !== t && t.apply(this, arguments) || this;
		return e$2._parent = null, e$2._children = [], e$2._previous = null, e$2._next = null, e$2._runtime = null, e$2._templates = [], e$2;
	}
	return J(e$1, t), Object.defineProperty(e$1.prototype, "video", {
		get: function() {
			return this.parent && this.parent.video;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "parent", {
		get: function() {
			return this._parent;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "children", {
		get: function() {
			return this._children;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "previous", {
		get: function() {
			return this._previous;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "next", {
		get: function() {
			return this._next;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "startTime", {
		get: function() {
			return this._data ? this._data.startTime : 0;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "endTime", {
		get: function() {
			return this._data ? this._data.endTime : 0;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "duration", {
		get: function() {
			return this.endTime - this.startTime;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "rendering", {
		get: function() {
			return this._runtime ? this._runtime.rendering : null;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "graphics", {
		get: function() {
			return this._runtime ? this._runtime.graphics : null;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "templates", {
		get: function() {
			return this._templates.slice();
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "templateCount", {
		get: function() {
			return this._templates.length;
		},
		enumerable: !1,
		configurable: !0
	}), e$1.prototype.maximize = function() {
		var t$1 = !1, e$2 = this.endTime, r$1 = Math.max(null === this._parent ? 0 : this._parent.startTime, null === this._previous ? 0 : this._previous.endTime);
		r$1 !== this.startTime && (this.moveWithChildren(r$1 - this.startTime), t$1 = !0);
		var n$1 = Math.min(null === this._parent ? this.video.duration : this._parent.endTime, null === this._next ? this.video.duration : this._next.startTime);
		return n$1 !== this.endTime && (this._data.endTime = n$1, t$1 = e$2 !== n$1), t$1;
	}, e$1.prototype.moveWithChildren = function(t$1) {
		var e$2 = [];
		for (e$2.push(this); e$2.length > 0;) {
			var r$1 = e$2.pop();
			null != r$1._children && r$1._children.forEach((function(t$2) {
				return e$2.push(t$2);
			})), r$1._data.startTime += t$1, r$1._data.endTime += t$1;
		}
	}, e$1.prototype.getTemplate = function(t$1) {
		return void 0 === t$1 && (t$1 = 0), t$1 < 0 || t$1 >= this._templates.length ? null : this._templates[t$1];
	}, e$1.prototype.addTemplateAt = function(t$1, e$2) {
		this._templates.splice(e$2, 0, t$1), t$1.assignedUnit = this;
	}, e$1.prototype.addTemplate = function(t$1) {
		this._templates.push(t$1), t$1.assignedUnit = this;
	}, e$1.prototype.removeTemplates = function() {
		for (var t$1 = this._templates.slice(); this._templates.length > 0;) this._templates.pop();
		return t$1;
	}, e$1.prototype.removeTemplateAt = function(t$1) {
		if (t$1 < 0 || t$1 >= this._templates.length) return null;
		var e$2 = this._templates.splice(t$1, 1)[0];
		return e$2.assignedUnit = null, e$2;
	}, e$1.prototype.removeTemplate = function(t$1) {
		for (var e$2 = 0; e$2 < this._templates.length; e$2++) {
			var r$1 = this._templates[e$2];
			if (r$1 === t$1) return this._templates.splice(e$2, 1), t$1.assignedUnit = null, r$1;
		}
		return null;
	}, e$1.prototype.getType = function() {
		return n.NONE;
	}, e$1.prototype.toString = function() {
		return "RenderingUnit";
	}, e$1;
}($);
function Q(t, e$1) {
	return "number" == typeof e$1 && !isNaN(e$1) && e$1 > t ? e$1 : t;
}
function tt(t, e$1) {
	return "number" == typeof e$1 && !isNaN(e$1) && e$1 < t ? e$1 : t;
}
var et = function(t) {
	function e$1() {
		return null !== t && t.apply(this, arguments) || this;
	}
	return J(e$1, t), Object.defineProperty(e$1.prototype, "text", {
		get: function() {
			var t$1 = "";
			return this.children.forEach((function(e$2) {
				t$1 += e$2.text;
			})), t$1;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "color", {
		get: function() {
			return this.children.reduce((function(t$1, e$2) {
				return null === t$1 ? e$2.color : void 0 === t$1 || t$1.eq(e$2.color) ? t$1 : void 0;
			}), null);
		},
		set: function(t$1) {
			null !== t$1 && this.children.forEach((function(e$2) {
				e$2.color = t$1;
			}));
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "font", {
		set: function(t$1) {
			null !== t$1 && this.children.forEach((function(e$2) {
				e$2.font = t$1;
			}));
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "fontFamily", {
		get: function() {
			return this.children.reduce((function(t$1, e$2) {
				var r$1 = e$2.fontFamily;
				return void 0 === t$1 || null !== t$1 && t$1 !== r$1 ? void 0 : r$1;
			}), null);
		},
		set: function(t$1) {
			this.children.forEach((function(e$2) {
				e$2.fontFamily = t$1;
			}));
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "fontStyle", {
		get: function() {
			return this.children.reduce((function(t$1, e$2) {
				var r$1 = e$2.fontStyle;
				return void 0 === t$1 || null !== t$1 && t$1 !== r$1 ? void 0 : r$1;
			}), null);
		},
		set: function(t$1) {
			this.children.forEach((function(e$2) {
				e$2.fontStyle = t$1;
			}));
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "fontSize", {
		get: function() {
			return this.children.length <= 0 ? 0 : this.children.reduce((function(t$1, e$2) {
				return t$1 + e$2.fontSize;
			}), 0) / this.children.length;
		},
		set: function(t$1) {
			this.children.forEach((function(e$2) {
				e$2.fontSize = t$1;
			}));
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "advance", {
		get: function() {
			return this.children.reduce((function(t$1, e$2) {
				return t$1 + e$2.advance;
			}), 0);
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "ascent", {
		get: function() {
			return this.children.reduce((function(t$1, e$2) {
				return Math.max(t$1, e$2.ascent);
			}), 0);
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "descent", {
		get: function() {
			return this.children.reduce((function(t$1, e$2) {
				return Math.max(t$1, e$2.descent);
			}), 0);
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "height", {
		get: function() {
			return this.ascent + this.descent;
		},
		enumerable: !1,
		configurable: !0
	}), e$1.prototype.expandTime = function(t$1) {
		return {
			startTime: tt(this.startTime, t$1.startTime),
			endTime: Q(this.endTime, t$1.endTime)
		};
	}, e$1.prototype.toString = function() {
		return this.text;
	}, e$1;
}(K), rt = function(t) {
	function e$1(e$2) {
		var r$1 = t.call(this) || this;
		return r$1._data = e$2, r$1._font = new Z(e$2 && e$2.fontFamily, e$2 && e$2.fontSize, e$2 && e$2.fontStyle), r$1._color = new X(), r$1;
	}
	return J(e$1, t), Object.defineProperty(e$1.prototype, "parent", {
		get: function() {
			return this._parent;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "previous", {
		get: function() {
			return this._previous;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "next", {
		get: function() {
			return this._next;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "text", {
		get: function() {
			return this._data && this._data.char || "?";
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "advance", {
		get: function() {
			return this._runtime ? this._runtime.advance : 0;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "ascent", {
		get: function() {
			return this._runtime ? this._runtime.ascent : 0;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "descent", {
		get: function() {
			return this._runtime ? this._runtime.descent : 0;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "font", {
		get: function() {
			return this._font;
		},
		set: function(t$1) {
			null === t$1 || this.font.eq(t$1) || (this._font = t$1.clone(), this._data.fontFamily = t$1.family, this._data.fontSize = t$1.size, this._data.fontStyle = t$1.style, this._runtime && this._runtime.onFontUpdate(this.font));
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "fontFamily", {
		get: function() {
			return this.font.family;
		},
		set: function(t$1) {
			this.font.family !== t$1 && (this._font = this.font.deriveFamily(t$1), this._data.fontFamily = t$1, this._runtime && this._runtime.onFontUpdate(this.font));
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "fontStyle", {
		get: function() {
			return this.font.style;
		},
		set: function(t$1) {
			this.font.style !== t$1 && (this._font = this.font.deriveStyle(t$1), this._data.fontStyle = t$1, this._runtime && this._runtime.onFontUpdate(this.font));
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "fontSize", {
		get: function() {
			return this.font.size;
		},
		set: function(t$1) {
			isNaN(t$1) || this.font.size === t$1 || (this._font = this.font.deriveSize(t$1), this._data.fontSize = t$1, this._runtime && this._runtime.onFontUpdate(this.font));
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "color", {
		get: function() {
			return this._color;
		},
		set: function(t$1) {
			t$1 && !t$1.eq(this.color) && (this._color = t$1, this._runtime && this._runtime.onColorUpdate(t$1));
		},
		enumerable: !1,
		configurable: !0
	}), e$1.prototype.getType = function() {
		return n.CHAR;
	}, e$1;
}(et), nt = function(t) {
	function e$1(e$2) {
		var r$1 = t.call(this) || this;
		return r$1._data = e$2, r$1;
	}
	return J(e$1, t), e$1.prototype.getType = function() {
		return n.GRAPHIC;
	}, e$1.prototype.toString = function() {
		return "Graphic";
	}, e$1;
}(K), it = function(t) {
	function e$1(e$2) {
		var r$1 = t.call(this) || this;
		return r$1._data = e$2, r$1;
	}
	return J(e$1, t), Object.defineProperty(e$1.prototype, "parent", {
		get: function() {
			return this._parent;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "children", {
		get: function() {
			return this._children.slice();
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "previous", {
		get: function() {
			return this._previous;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "next", {
		get: function() {
			return this._next;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "startTime", {
		get: function() {
			return this.firstChar ? this.firstChar.startTime : 0;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "endTime", {
		get: function() {
			return this.lastChar ? this.lastChar.endTime : 0;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "pos", {
		get: function() {
			return this._data && this._data.pos || "";
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "rawPos", {
		get: function() {
			return this._data && this._data.rawPoS || "";
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "language", {
		get: function() {
			return this._data && this._data.language || "";
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "countDown", {
		get: function() {
			return this._data ? this._data.countDown : -1;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "countUp", {
		get: function() {
			return this._data ? this._data.countUp : -1;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "initialCount", {
		get: function() {
			return this._data ? this._data.initialCount : -1;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "charCount", {
		get: function() {
			return this._children.length;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "firstChar", {
		get: function() {
			return this._children.length <= 0 ? null : this._children[0];
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "lastChar", {
		get: function() {
			return this._children.length <= 0 ? null : this._children[this._children.length - 1];
		},
		enumerable: !1,
		configurable: !0
	}), e$1.prototype.addChar = function(t$1) {
		if (t$1) {
			this._children.length > 0 && (t$1._previous = this.lastChar, this.lastChar._next = t$1), this._children.push(t$1), t$1._parent = this;
			var e$2 = this.expandTime(t$1), r$1 = e$2.startTime, n$1 = e$2.endTime;
			this._data.startTime = r$1, this._data.endTime = n$1;
		}
	}, e$1.prototype.findIndex = function(t$1) {
		return t$1 instanceof rt ? this._children.indexOf(t$1) : -1;
	}, e$1.prototype.getType = function() {
		return n.WORD;
	}, e$1;
}(et), ot = function(t) {
	function e$1(e$2, r$1) {
		var n$1 = t.call(this) || this;
		return n$1._video = e$2, n$1._data = r$1, n$1.createUnits(), n$1;
	}
	return J(e$1, t), e$1.prototype.createUnits = function() {
		var t$1 = this, e$2 = this._data;
		e$2 && Array.isArray(e$2.words) && e$2.words.forEach((function(e$3) {
			if (e$3) {
				var r$1 = new it(e$3);
				Array.isArray(e$3.characters) && e$3.characters.forEach((function(t$2) {
					return r$1.addChar(new rt(t$2));
				})), t$1.addWord(r$1);
			}
		}));
	}, Object.defineProperty(e$1.prototype, "children", {
		get: function() {
			return this._children.slice();
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "previous", {
		get: function() {
			return this._previous;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "next", {
		get: function() {
			return this._next;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "video", {
		get: function() {
			return this._video;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "startTime", {
		get: function() {
			return this.firstChar ? this.firstChar.startTime : 0;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "endTime", {
		get: function() {
			return this.lastChar ? this.lastChar.endTime : 0;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "wordCount", {
		get: function() {
			return this._children.length;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "charCount", {
		get: function() {
			return this._children.reduce((function(t$1, e$2) {
				return t$1 + e$2.charCount;
			}), 0);
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "firstWord", {
		get: function() {
			return this._children.length <= 0 ? null : this._children[0];
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "lastWord", {
		get: function() {
			return this._children.length <= 0 ? null : this._children[this._children.length - 1];
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "firstChar", {
		get: function() {
			var t$1 = this.firstWord;
			return null === t$1 ? null : t$1.firstChar;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "lastChar", {
		get: function() {
			var t$1 = this.lastWord;
			return null === t$1 ? null : t$1.lastChar;
		},
		enumerable: !1,
		configurable: !0
	}), e$1.prototype.getWord = function(t$1) {
		return t$1 < 0 || t$1 >= this._children.length ? null : this._children[t$1];
	}, e$1.prototype.getChar = function(t$1) {
		if (t$1 < 0) return null;
		for (var e$2 = 0, r$1 = this.firstWord;;) {
			if (!r$1) return null;
			if (e$2 + r$1.children.length > t$1) break;
			e$2 += r$1.children.length, r$1 = r$1.next;
		}
		return r$1.children[t$1 - e$2];
	}, e$1.prototype.addWord = function(t$1) {
		if (t$1) {
			this._children.length > 0 && (t$1._previous = this.lastWord, t$1._previous._next = t$1, t$1.firstChar._previous = t$1._previous.lastChar, t$1._previous.lastChar._next = t$1.firstChar), this._children.push(t$1), t$1._parent = this;
			var e$2 = this.expandTime(t$1), r$1 = e$2.startTime, n$1 = e$2.endTime;
			this._data.startTime = r$1, this._data.endTime = n$1;
		}
	}, e$1.prototype.findIndex = function(t$1) {
		if (t$1 instanceof it) return this._children.indexOf(t$1);
		if (t$1 instanceof rt) {
			for (var e$2 = 0, r$1 = !1, n$1 = 0, i$1 = this._children; n$1 < i$1.length; n$1++) {
				var o$1 = i$1[n$1], s$1 = o$1.findIndex(t$1);
				if (!(s$1 < 0)) {
					e$2 += s$1, r$1 = !0;
					break;
				}
				e$2 += o$1.charCount;
			}
			return r$1 ? e$2 : -1;
		}
		return -1;
	}, e$1.prototype.getType = function() {
		return n.PHRASE;
	}, e$1;
}(et);
function st(t, e$1, n$1) {
	if (!t || t.length <= 0) return null;
	var i$1 = r.sortedIndex(t, e$1, (function(t$1) {
		return t$1.endTime;
	}));
	if (i$1 < 0) return null;
	if (n$1 && "endTime" in n$1 && "number" == typeof n$1.endTime) {
		i$1 >= t.length && (i$1 = t.length - 1);
		var o$1 = e$1, s$1 = n$1.endTime;
		return t[i$1].overlaps(o$1, s$1) ? t[i$1] : i$1 < 1 ? null : t[i$1 - 1].overlaps(o$1, s$1) ? t[i$1 - 1] : null;
	}
	return i$1 >= t.length ? null : n$1 && "loose" in n$1 && n$1.loose || t[i$1].contains(e$1) ? t[i$1] : null;
}
function at(t, e$1, n$1) {
	if (!t || t.length <= 0) return {
		current: null,
		entered: [],
		left: [],
		previous: null,
		next: null
	};
	var i$1 = r.sortedIndex(t, e$1, (function(t$1) {
		return t$1.startTime;
	}));
	i$1 < t.length && t[i$1].startTime === e$1 && i$1++;
	var o$1, s$1, a$1, u$1 = i$1 - 1 < 0 ? -1 : t[i$1 - 1].startTime <= e$1 && t[i$1 - 1].endTime > e$1 ? i$1 - 2 : i$1 - 1, c$1 = r.sortedIndex(t, n$1, (function(t$1) {
		return t$1.endTime;
	}));
	c$1 >= t.length ? (o$1 = -1, s$1 = -1, a$1 = t[c$1 - 1].endTime > e$1 ? t.length : 0) : (t[c$1].startTime > n$1 ? (o$1 = -1, s$1 = c$1) : c$1 + 1 >= t.length || t[c$1 + 1].startTime > n$1 ? (o$1 = t[c$1].endTime > n$1 && t[c$1].startTime <= n$1 ? c$1 : -1, s$1 = c$1 + 1) : (o$1 = c$1 + 1, s$1 = c$1 + 2), a$1 = t[c$1].endTime <= n$1 ? c$1 + 1 : c$1);
	var l$1 = u$1 >= 0 ? t[u$1] : null, p$1 = s$1 >= 0 && s$1 < t.length ? t[s$1] : null;
	return {
		current: o$1 >= 0 ? t[o$1] : null,
		entered: t.slice(i$1, s$1),
		left: t.slice(u$1 + 1, a$1),
		previous: l$1,
		next: p$1
	};
}
var ut = function(t) {
	function e$1(e$2) {
		var r$1 = t.call(this) || this;
		return r$1._credits = [], r$1._phrases = [], r$1._graphics = [], r$1.data = e$2 || {}, r$1.createUnits(), r$1;
	}
	return J(e$1, t), Object.defineProperty(e$1.prototype, "credits", {
		get: function() {
			return this._credits.slice();
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "phrases", {
		get: function() {
			return this._phrases.slice();
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "words", {
		get: function() {
			return this._phrases.reduce((function(t$1, e$2) {
				return t$1.splice.apply(t$1, H([t$1.length, 0], e$2._children, !1)), t$1;
			}), []);
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "chars", {
		get: function() {
			return this.words.reduce((function(t$1, e$2) {
				return t$1.splice.apply(t$1, H([t$1.length, 0], e$2._children, !1)), t$1;
			}), []);
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "graphics", {
		get: function() {
			return this._graphics.slice();
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "rendering", {
		get: function() {
			return this._runtime.rendering;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "duration", {
		get: function() {
			return this.data.duration || 0;
		},
		set: function(t$1) {
			this.data.duration = t$1;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "startTime", {
		get: function() {
			return this.data.startTime || 0;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "endTime", {
		get: function() {
			return this.data.endTime || 0;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "creditCount", {
		get: function() {
			return this._credits.length;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "phraseCount", {
		get: function() {
			return this._phrases.length;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "graphicCount", {
		get: function() {
			return this._graphics.length;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "wordCount", {
		get: function() {
			return this._phrases.reduce((function(t$1, e$2) {
				return t$1 + e$2.wordCount;
			}), 0);
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "charCount", {
		get: function() {
			return this._phrases.reduce((function(t$1, e$2) {
				return t$1 + e$2.charCount;
			}), 0);
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "firstCredit", {
		get: function() {
			return this._credits.length <= 0 ? null : this._credits[0];
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "lastCredit", {
		get: function() {
			return this._credits.length <= 0 ? null : this._credits[this._credits.length - 1];
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "firstPhrase", {
		get: function() {
			return this._phrases.length <= 0 ? null : this._phrases[0];
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "lastPhrase", {
		get: function() {
			return this._phrases.length <= 0 ? null : this._phrases[this._phrases.length - 1];
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "firstWord", {
		get: function() {
			var t$1;
			return (null === (t$1 = this.firstPhrase) || void 0 === t$1 ? void 0 : t$1.firstWord) || null;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "lastWord", {
		get: function() {
			var t$1;
			return (null === (t$1 = this.lastPhrase) || void 0 === t$1 ? void 0 : t$1.lastWord) || null;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "firstChar", {
		get: function() {
			var t$1;
			return (null === (t$1 = this.firstWord) || void 0 === t$1 ? void 0 : t$1.firstChar) || null;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "lastChar", {
		get: function() {
			var t$1;
			return (null === (t$1 = this.lastWord) || void 0 === t$1 ? void 0 : t$1.lastChar) || null;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "firstGraphic", {
		get: function() {
			return this._graphics.length <= 0 ? null : this._graphics[0];
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(e$1.prototype, "lastGraphic", {
		get: function() {
			return this._graphics.length <= 0 ? null : this._graphics[this._graphics.length - 1];
		},
		enumerable: !1,
		configurable: !0
	}), e$1.prototype.createUnits = function() {
		var t$1, e$2, r$1 = this;
		Array.isArray(this.data.credits) ? (this.data.credits.sort(ct), this.data.credits.forEach((function(t$2) {
			return r$1.doAddCredit(new ot(r$1, t$2), !1);
		})), this.organizeTimings(null === (t$1 = this.firstCredit) || void 0 === t$1 ? void 0 : t$1.firstChar)) : this.data.credits = [], Array.isArray(this.data.phrases) ? (this.data.phrases.sort(ct), this.data.phrases.forEach((function(t$2) {
			return r$1.doAddPhrase(new ot(r$1, t$2), !1);
		})), this.organizeTimings(null === (e$2 = this.firstPhrase) || void 0 === e$2 ? void 0 : e$2.firstChar)) : this.data.phrases = [], Array.isArray(this.data.graphics) ? (this.data.graphics.sort(ct), this.data.graphics.forEach((function(t$2) {
			return r$1.doAddGraphic(new nt(t$2), !1);
		}))) : this.data.graphics = [];
	}, e$1.prototype.organizeTimings = function(t$1) {
		for (; t$1;) t$1.startTime === t$1.endTime && t$1.maximize(), t$1 = t$1.next;
	}, e$1.prototype.exportData = function(t$1) {
		this.updateTemplateData(t$1);
		for (var r$1 = e$1.exportUnitData(this.data.credits, !0), n$1 = r$1.units, i$1 = r$1.templateClasses, o$1 = e$1.exportUnitData(this.data.phrases, !1), s$1 = o$1.units, a$1 = o$1.templateClasses, u$1 = e$1.exportUnitData(this.data.graphics, !0), c$1 = u$1.units, l$1 = u$1.templateClasses, p$1 = i$1.concat(a$1, l$1).filter((function(t$2, e$2, r$2) {
			return r$2.indexOf(t$2) === e$2;
		})), h$1 = {}; p$1.length > 0;) {
			var d$1 = p$1.shift(), f$1 = t$1.getByName(d$1);
			if (f$1) {
				h$1[d$1] = f$1.id;
				for (var y$1 = 0, g$1 = t$1.getRequiredTemplates(f$1.script); y$1 < g$1.length; y$1++) {
					var v$1 = g$1[y$1];
					h$1[v$1] || p$1.push(v$1);
				}
			} else console.log("template class not found", d$1);
		}
		return {
			credits: n$1,
			phrases: s$1,
			graphics: c$1,
			templateClasses: h$1
		};
	}, e$1.exportUnitData = function(t$1, r$1) {
		if (void 0 === r$1 && (r$1 = !1), !t$1) return {
			units: [],
			templateClasses: []
		};
		for (var n$1 = [], i$1 = [], o$1 = 0, s$1 = t$1; o$1 < s$1.length; o$1++) {
			var a$1 = s$1[o$1], u$1 = { templates: a$1.templates ? a$1.templates.map((function(t$2) {
				var e$2 = t$2.type;
				i$1.push(e$2);
				var r$2 = {};
				return Object.keys(t$2.value).forEach((function(e$3) {
					var n$2 = t$2.value[e$3];
					r$2[e$3] = "object" == typeof n$2 ? Object.assign({}, n$2) : n$2;
				})), {
					type: e$2,
					value: r$2
				};
			})) : [] }, c$1 = void 0;
			if (a$1.words) {
				var l$1 = a$1, p$1 = e$1.exportUnitData(l$1.words);
				u$1.words = p$1.units, c$1 = p$1.templateClasses;
			} else if (a$1.characters) {
				var h$1 = a$1, d$1 = e$1.exportUnitData(h$1.characters);
				u$1.characters = d$1.units, c$1 = d$1.templateClasses;
			} else {
				for (var f$1 = 0, y$1 = [
					"fontFamily",
					"fontSize",
					"fontStyle"
				]; f$1 < y$1.length; f$1++) {
					var g$1 = y$1[f$1];
					a$1[g$1] && (u$1[g$1] = a$1[g$1]);
				}
				c$1 = [];
			}
			r$1 && (u$1.startTime = a$1.startTime, u$1.endTime = a$1.endTime), n$1.push(u$1), i$1 = i$1.concat(c$1);
		}
		return {
			units: n$1,
			templateClasses: i$1 = i$1.filter((function(t$2, e$2, r$2) {
				return r$2.indexOf(t$2) === e$2;
			}))
		};
	}, e$1.prototype.updateTemplateData = function(t$1) {
		e$1.updateTemplateDataForUnits(t$1, this.firstCredit, this.data.credits), e$1.updateTemplateDataForUnits(t$1, this.firstPhrase, this.data.phrases), e$1.updateTemplateDataForUnits(t$1, this.firstGraphic, this.data.graphics);
	}, e$1.updateTemplateDataForUnits = function(t$1, r$1, n$1) {
		if (r$1 && n$1) for (var i$1 = 0, o$1 = n$1; i$1 < o$1.length; i$1++) {
			var s$1 = o$1[i$1];
			s$1.templates = [];
			for (var a$1 = 0; a$1 < r$1.templateCount; a$1++) {
				var u$1 = r$1.getTemplate(a$1), c$1 = t$1.exportInstance(u$1);
				s$1.templates.push(c$1);
			}
			if (s$1.words) {
				var l$1 = s$1;
				e$1.updateTemplateDataForUnits(t$1, r$1.children[0], l$1.words);
			} else if (s$1.characters) {
				var p$1 = s$1;
				e$1.updateTemplateDataForUnits(t$1, r$1.children[0], p$1.characters);
			}
			r$1 = r$1.next;
		}
	}, e$1.prototype.addCredit = function(t$1) {
		this.doAddCredit(t$1, !0);
	}, e$1.prototype.doAddCredit = function(t$1, e$2) {
		var r$1 = this.addRenderingUnit(this._credits, t$1);
		e$2 && this.data.credits.splice(r$1, 0, t$1._data), this._runtime && this._runtime.addCredit(t$1);
	}, e$1.prototype.addPhrase = function(t$1) {
		this.doAddPhrase(t$1, !0);
	}, e$1.prototype.doAddPhrase = function(t$1, e$2) {
		var r$1 = this.addRenderingUnit(this._phrases, t$1);
		e$2 && this.data.phrases.splice(r$1, 0, t$1._data), this._runtime && this._runtime.addPhrase(t$1);
	}, e$1.prototype.addGraphic = function(t$1) {
		this.doAddGraphic(t$1, !0);
	}, e$1.prototype.doAddGraphic = function(t$1, e$2) {
		if (t$1) {
			var r$1 = this.addRenderingUnit(this._graphics, t$1);
			e$2 && this.data.graphics.splice(r$1, 0, t$1._data), this._runtime && this._runtime.addGraphic(t$1);
		}
	}, e$1.prototype.addRenderingUnit = function(t$1, e$2) {
		if (e$2) {
			var n$1 = r.sortedIndex(t$1, e$2, lt), i$1 = n$1 > 0 ? t$1[n$1 - 1] : null, o$1 = n$1 < t$1.length ? t$1[n$1] : null;
			if (t$1.splice(n$1, 0, e$2), i$1 && (e$2._previous = i$1, e$2._previous._next = e$2), o$1 && (o$1._previous = e$2, e$2._next = o$1), e$2 instanceof ot && e$2.wordCount > 0) {
				for (var s$1 = i$1; s$1 && !s$1.lastWord;) s$1 = s$1.previous;
				for (var a$1 = o$1; a$1 && !a$1.firstWord;) a$1 = a$1.next;
				if (s$1 && (e$2.firstWord._previous = s$1.lastWord, s$1.lastWord._next = e$2.firstWord), a$1 && (e$2.lastWord._next = a$1.firstWord, a$1.firstWord._previous = e$2.lastWord), e$2.charCount > 0) {
					for (var u$1 = null == s$1 ? void 0 : s$1.lastWord; u$1 && null === u$1.lastChar;) u$1 = u$1.previous;
					for (var c$1 = null == a$1 ? void 0 : a$1.firstWord; c$1 && null === c$1.firstChar;) c$1 = c$1.next;
					u$1 && (e$2.firstChar._previous = u$1.lastChar, u$1.lastChar._next = e$2.firstChar), c$1 && (e$2.lastChar._next = c$1.firstChar, c$1.firstChar._previous = e$2.lastChar);
				}
			}
			return this.updateStartAndEndTime(), n$1;
		}
	}, e$1.prototype.removeCredit = function(t$1) {
		var e$2 = this.removeRenderingUnit(this._credits, t$1);
		return !(e$2 < 0 || (this.data.credits.splice(e$2, 1), this._runtime && this._runtime.removeCredit(t$1), 0));
	}, e$1.prototype.removeCredits = function() {
		var t$1 = this;
		this._runtime && this._credits.forEach((function(e$2) {
			return t$1._runtime.removeCredit(e$2);
		})), this._credits = [], this.data.credits.splice(0, this.data.credits.length);
	}, e$1.prototype.removePhrase = function(t$1) {
		var e$2 = this.removeRenderingUnit(this._phrases, t$1);
		return !(e$2 < 0 || (this.data.phrases.splice(e$2, 1), this._runtime && this._runtime.removePhrase(t$1), 0));
	}, e$1.prototype.removePhrases = function() {
		var t$1 = this;
		this._runtime && this._phrases.forEach((function(e$2) {
			return t$1._runtime.removePhrase(e$2);
		})), this._phrases = [], this.data.phrases.splice(0, this.data.phrases.length);
	}, e$1.prototype.removeGraphic = function(t$1) {
		var e$2 = this.removeRenderingUnit(this._graphics, t$1);
		return !(e$2 < 0 || (this.data.graphics.splice(e$2, 1), this._runtime && this._runtime.removeGraphic(t$1), 0));
	}, e$1.prototype.removeGraphics = function() {
		var t$1 = this;
		this._runtime && this._graphics.forEach((function(e$2) {
			return t$1._runtime.removeGraphic(e$2);
		})), this._graphics = [], this.data.graphics.splice(0, this.data.graphics.length), this.rendering.reset();
	}, e$1.prototype.removeRenderingUnit = function(t$1, e$2) {
		var n$1 = r.sortedIndex(t$1, e$2, lt);
		if (n$1 < 0 || t$1[n$1] !== e$2) return -1;
		if (t$1.splice(n$1, 1), e$2 instanceof ot) {
			if (e$2.charCount > 0) {
				for (var i$1 = e$2._previous; i$1 && null === i$1.lastChar;) i$1 = i$1.previous;
				for (var o$1 = e$2._next; o$1 && null === o$1.firstChar;) o$1 = o$1.next;
				i$1 && o$1 ? (i$1.lastChar._next = o$1.firstChar, o$1.firstChar._previous = i$1.lastChar) : i$1 ? i$1.lastChar._next = null : o$1 && (o$1.firstChar._previous = null);
			}
			if (e$2.wordCount > 0) {
				for (i$1 = e$2._previous; i$1 && null === i$1.lastWord;) i$1 = i$1.previous;
				for (o$1 = e$2._next; o$1 && null === o$1.firstWord;) o$1 = o$1.next;
				i$1 && o$1 ? (i$1.lastWord._next = o$1.firstWord, o$1.firstWord._previous = i$1.lastWord) : i$1 ? i$1.lastWord._next = null : o$1 && (o$1.firstWord._previous = null);
			}
		}
		e$2._previous && (e$2._previous._next = e$2._next), e$2._next && (e$2._next._previous = e$2._previous), this.updateStartAndEndTime();
	}, e$1.prototype.updateStartAndEndTime = function() {
		var t$1, e$2, r$1, n$1, i$1, o$1, s$1, a$1;
		this.data.endTime = Math.max((null === (e$2 = null === (t$1 = this.lastCredit) || void 0 === t$1 ? void 0 : t$1.lastChar) || void 0 === e$2 ? void 0 : e$2.endTime) || 0, (null === (r$1 = this.lastChar) || void 0 === r$1 ? void 0 : r$1.endTime) || 0, (null === (n$1 = this.lastGraphic) || void 0 === n$1 ? void 0 : n$1.endTime) || 0);
		var u$1 = null === (o$1 = null === (i$1 = this.firstCredit) || void 0 === i$1 ? void 0 : i$1.firstChar) || void 0 === o$1 ? void 0 : o$1.startTime, c$1 = null === (s$1 = this.firstChar) || void 0 === s$1 ? void 0 : s$1.startTime, l$1 = null === (a$1 = this.firstGraphic) || void 0 === a$1 ? void 0 : a$1.startTime;
		this.data.startTime = Math.min("number" == typeof u$1 ? u$1 : Number.MAX_VALUE, "number" == typeof c$1 ? c$1 : Number.MAX_VALUE, "number" == typeof l$1 ? l$1 : Number.MAX_VALUE, this.data.endTime);
	}, e$1.prototype.findIndex = function(t$1) {
		if (t$1 instanceof ot) return (e$2 = this._phrases.indexOf(t$1)) >= 0 ? e$2 : this._credits.indexOf(t$1);
		if (t$1 instanceof it) {
			for (var e$2 = 0, r$1 = !1, n$1 = 0, i$1 = this._phrases; n$1 < i$1.length; n$1++) {
				if (!((u$1 = (a$1 = i$1[n$1]).findIndex(t$1)) < 0)) {
					e$2 += u$1, r$1 = !0;
					break;
				}
				e$2 += a$1.wordCount;
			}
			return r$1 ? e$2 : -1;
		}
		if (t$1 instanceof rt) {
			e$2 = 0, r$1 = !1;
			for (var o$1 = 0, s$1 = this._phrases; o$1 < s$1.length; o$1++) {
				var a$1, u$1;
				if (!((u$1 = (a$1 = s$1[o$1]).findIndex(t$1)) < 0)) {
					e$2 += u$1, r$1 = !0;
					break;
				}
				e$2 += a$1.charCount;
			}
			return r$1 ? e$2 : -1;
		}
		return t$1 instanceof nt ? this._graphics.indexOf(t$1) : -1;
	}, e$1.prototype.getCredit = function(t$1) {
		return t$1 < 0 || t$1 >= this._credits.length ? null : this._credits[t$1];
	}, e$1.prototype.getPhrase = function(t$1) {
		return t$1 < 0 || t$1 >= this._phrases.length ? null : this._phrases[t$1];
	}, e$1.prototype.getWord = function(t$1) {
		if (t$1 < 0) return null;
		for (var e$2 = 0, r$1 = this.firstPhrase;;) {
			if (!r$1) return null;
			if (e$2 + r$1.children.length > t$1) break;
			e$2 += r$1.children.length, r$1 = r$1.next;
		}
		return r$1.children[t$1 - e$2];
	}, e$1.prototype.getChar = function(t$1) {
		if (t$1 < 0) return null;
		for (var e$2 = 0, r$1 = this.firstWord;;) {
			if (!r$1) return null;
			if (e$2 + r$1.children.length > t$1) break;
			e$2 += r$1.children.length, r$1 = r$1.next;
		}
		return r$1.children[t$1 - e$2];
	}, e$1.prototype.getGraphic = function(t$1) {
		return t$1 < 0 || t$1 >= this._graphics.length ? null : this._graphics[t$1];
	}, e$1.prototype.findCredit = function(t$1, e$2) {
		return st(this._credits, t$1, e$2);
	}, e$1.prototype.findCreditChange = function(t$1, e$2) {
		return at(this._credits, t$1, e$2);
	}, e$1.prototype.findPhrase = function(t$1, e$2) {
		return st(this._phrases, t$1, e$2);
	}, e$1.prototype.findPhraseChange = function(t$1, e$2) {
		return at(this._phrases, t$1, e$2);
	}, e$1.prototype.findWord = function(t$1, e$2) {
		var r$1 = this.findPhrase(t$1, e$2);
		return r$1 ? st(r$1._children, t$1, e$2) : null;
	}, e$1.prototype.findWordChange = function(t$1, e$2) {
		return at(this.words, t$1, e$2);
	}, e$1.prototype.findChar = function(t$1, e$2) {
		var r$1 = this.findWord(t$1, e$2);
		return r$1 ? st(r$1._children, t$1, e$2) : null;
	}, e$1.prototype.findCharChange = function(t$1, e$2) {
		return at(this.chars, t$1, e$2);
	}, e$1.prototype.findGraphic = function(t$1, e$2) {
		return st(this._graphics, t$1, e$2);
	}, e$1.prototype.findGraphicChange = function(t$1, e$2) {
		return at(this._graphics, t$1, e$2);
	}, e$1;
}($);
function ct(t, e$1) {
	return t.startTime - e$1.startTime;
}
function lt(t) {
	return t.startTime;
}
var pt = function() {
	function t(t$1, e$1, r$1, n$1, i$1, o$1) {
		void 0 === t$1 && (t$1 = 1), void 0 === e$1 && (e$1 = 0), void 0 === r$1 && (r$1 = 0), void 0 === n$1 && (n$1 = 1), void 0 === i$1 && (i$1 = 0), void 0 === o$1 && (o$1 = 0), this.setValues(t$1, e$1, r$1, n$1, i$1, o$1);
	}
	return t.prototype.setValues = function(t$1, e$1, r$1, n$1, i$1, o$1) {
		return void 0 === t$1 && (t$1 = 1), void 0 === e$1 && (e$1 = 0), void 0 === r$1 && (r$1 = 0), void 0 === n$1 && (n$1 = 1), void 0 === i$1 && (i$1 = 0), void 0 === o$1 && (o$1 = 0), this.a = t$1, this.b = e$1, this.c = r$1, this.d = n$1, this.tx = i$1, this.ty = o$1, this;
	}, t.prototype.append = function(t$1, e$1, r$1, n$1, i$1, o$1) {
		var s$1 = this.a, a$1 = this.b, u$1 = this.c, c$1 = this.d;
		return 1 == t$1 && 0 == e$1 && 0 == r$1 && 1 == n$1 || (this.a = s$1 * t$1 + u$1 * e$1, this.b = a$1 * t$1 + c$1 * e$1, this.c = s$1 * r$1 + u$1 * n$1, this.d = a$1 * r$1 + c$1 * n$1), this.tx = s$1 * i$1 + u$1 * o$1 + this.tx, this.ty = a$1 * i$1 + c$1 * o$1 + this.ty, this;
	}, t.prototype.prepend = function(t$1, e$1, r$1, n$1, i$1, o$1) {
		var s$1 = this.a, a$1 = this.c, u$1 = this.tx;
		return this.a = t$1 * s$1 + r$1 * this.b, this.b = e$1 * s$1 + n$1 * this.b, this.c = t$1 * a$1 + r$1 * this.d, this.d = e$1 * a$1 + n$1 * this.d, this.tx = t$1 * u$1 + r$1 * this.ty + i$1, this.ty = e$1 * u$1 + n$1 * this.ty + o$1, this;
	}, t.prototype.appendMatrix = function(t$1) {
		return this.append(t$1.a, t$1.b, t$1.c, t$1.d, t$1.tx, t$1.ty);
	}, t.prototype.prependMatrix = function(t$1) {
		return this.prepend(t$1.a, t$1.b, t$1.c, t$1.d, t$1.tx, t$1.ty);
	}, t.prototype.appendTransform = function(e$1, r$1, n$1, i$1, o$1, s$1, a$1, u$1, c$1) {
		var l$1, p$1, h$1;
		return o$1 % 360 ? (l$1 = o$1 * t.DEG_TO_RAD, p$1 = Math.cos(l$1), h$1 = Math.sin(l$1)) : (p$1 = 1, h$1 = 0), s$1 || a$1 ? (s$1 *= t.DEG_TO_RAD, a$1 *= t.DEG_TO_RAD, this.append(Math.cos(a$1), Math.sin(a$1), -Math.sin(s$1), Math.cos(s$1), e$1, r$1), this.append(p$1 * n$1, h$1 * n$1, -h$1 * i$1, p$1 * i$1, 0, 0)) : this.append(p$1 * n$1, h$1 * n$1, -h$1 * i$1, p$1 * i$1, e$1, r$1), (u$1 || c$1) && (this.tx -= u$1 * this.a + c$1 * this.c, this.ty -= u$1 * this.b + c$1 * this.d), this;
	}, t.prototype.prependTransform = function(e$1, r$1, n$1, i$1, o$1, s$1, a$1, u$1, c$1) {
		var l$1, p$1, h$1;
		return o$1 % 360 ? (l$1 = o$1 * t.DEG_TO_RAD, p$1 = Math.cos(l$1), h$1 = Math.sin(l$1)) : (p$1 = 1, h$1 = 0), (u$1 || c$1) && (this.tx -= u$1, this.ty -= c$1), s$1 || a$1 ? (s$1 *= t.DEG_TO_RAD, a$1 *= t.DEG_TO_RAD, this.prepend(p$1 * n$1, h$1 * n$1, -h$1 * i$1, p$1 * i$1, 0, 0), this.prepend(Math.cos(a$1), Math.sin(a$1), -Math.sin(s$1), Math.cos(s$1), e$1, r$1)) : this.prepend(p$1 * n$1, h$1 * n$1, -h$1 * i$1, p$1 * i$1, e$1, r$1), this;
	}, t.prototype.rotate = function(e$1) {
		e$1 *= t.DEG_TO_RAD;
		var r$1 = Math.cos(e$1), n$1 = Math.sin(e$1), i$1 = this.a, o$1 = this.b;
		return this.a = i$1 * r$1 + this.c * n$1, this.b = o$1 * r$1 + this.d * n$1, this.c = -i$1 * n$1 + this.c * r$1, this.d = -o$1 * n$1 + this.d * r$1, this;
	}, t.prototype.skew = function(e$1, r$1) {
		return e$1 *= t.DEG_TO_RAD, r$1 *= t.DEG_TO_RAD, this.append(Math.cos(r$1), Math.sin(r$1), -Math.sin(e$1), Math.cos(e$1), 0, 0), this;
	}, t.prototype.scale = function(t$1, e$1) {
		return this.a *= t$1, this.b *= t$1, this.c *= e$1, this.d *= e$1, this;
	}, t.prototype.translate = function(t$1, e$1) {
		return this.tx += this.a * t$1 + this.c * e$1, this.ty += this.b * t$1 + this.d * e$1, this;
	}, t.prototype.identity = function() {
		return this.a = this.d = 1, this.b = this.c = this.tx = this.ty = 0, this;
	}, t.prototype.invert = function() {
		var t$1 = this.a, e$1 = this.b, r$1 = this.c, n$1 = this.d, i$1 = this.tx, o$1 = t$1 * n$1 - e$1 * r$1;
		return this.a = n$1 / o$1, this.b = -e$1 / o$1, this.c = -r$1 / o$1, this.d = t$1 / o$1, this.tx = (r$1 * this.ty - n$1 * i$1) / o$1, this.ty = -(t$1 * this.ty - e$1 * i$1) / o$1, this;
	}, t.prototype.isIdentity = function() {
		return 0 === this.tx && 0 === this.ty && 1 === this.a && 0 === this.b && 0 === this.c && 1 === this.d;
	}, t.prototype.equals = function(t$1) {
		return this.tx === t$1.tx && this.ty === t$1.ty && this.a === t$1.a && this.b === t$1.b && this.c === t$1.c && this.d === t$1.d;
	}, t.prototype.transformPoint = function(t$1, e$1, r$1) {
		return r$1.x = t$1 * this.a + e$1 * this.c + this.tx, r$1.y = t$1 * this.b + e$1 * this.d + this.ty, r$1;
	}, t.prototype.decompose = function(e$1) {
		void 0 === e$1 && (e$1 = {}), e$1.x = this.tx, e$1.y = this.ty, e$1.scaleX = Math.sqrt(this.a * this.a + this.b * this.b), e$1.scaleY = Math.sqrt(this.c * this.c + this.d * this.d);
		var r$1 = Math.atan2(-this.c, this.d), n$1 = Math.atan2(this.b, this.a);
		return Math.abs(1 - r$1 / n$1) < 1e-5 ? (e$1.rotation = n$1 / t.DEG_TO_RAD, this.a < 0 && this.d >= 0 && (e$1.rotation += e$1.rotation <= 0 ? 180 : -180), e$1.skewX = e$1.skewY = 0) : (e$1.skewX = r$1 / t.DEG_TO_RAD, e$1.skewY = n$1 / t.DEG_TO_RAD), e$1;
	}, t.prototype.copy = function(t$1) {
		return this.setValues(t$1.a, t$1.b, t$1.c, t$1.d, t$1.tx, t$1.ty);
	}, t.prototype.clone = function() {
		return new t(this.a, this.b, this.c, this.d, this.tx, this.ty);
	}, t.prototype.toString = function() {
		return "[".concat(this.constructor.name, " (a=").concat(this.a, " b=").concat(this.b, " c=").concat(this.c, " d=").concat(this.d, " tx=").concat(this.tx, " ty=").concat(this.ty, ")]");
	}, t.DEG_TO_RAD = Math.PI / 180, t.identity = new t(), t;
}(), ht = function() {
	function t(t$1, e$1) {
		void 0 === t$1 && (t$1 = 0), void 0 === e$1 && (e$1 = 0), this.setValues(t$1, e$1);
	}
	return t.prototype.setValues = function(t$1, e$1) {
		return void 0 === t$1 && (t$1 = 0), void 0 === e$1 && (e$1 = 0), this.x = t$1, this.y = e$1, this;
	}, t.prototype.copy = function(t$1) {
		return this.x = t$1.x, this.y = t$1.y, this;
	}, t.prototype.clone = function() {
		return new t(this.x, this.y);
	}, t.prototype.toString = function() {
		return "[".concat(this.constructor.name, " (x=").concat(this.x, " y=").concat(this.y, ")]");
	}, t;
}(), dt = function() {
	function t() {
		this.tx = new pt(), this.alpha = 0, this.composite = "", this.visible = !0;
	}
	return t.prototype.reset = function() {}, t;
}(), ft = function() {
	function t() {
		this.rendering = new dt();
	}
	return t.prototype.addCredit = function(t$1) {
		this.doAddPhrase(t$1);
	}, t.prototype.removeCredit = function(t$1) {
		t$1._runtime = null;
	}, t.prototype.addPhrase = function(t$1) {
		this.doAddPhrase(t$1);
	}, t.prototype.removePhrase = function(t$1) {
		t$1._runtime = null;
	}, t.prototype.doAddPhrase = function(t$1) {
		t$1._runtime = {
			graphics: { clear: function() {} },
			rendering: new dt(),
			update: function() {}
		};
		for (var e$1 = t$1.firstWord; e$1;) {
			e$1._runtime = {
				graphics: { clear: function() {} },
				rendering: new dt(),
				update: function() {}
			};
			for (var r$1 = e$1.firstChar; r$1 && (r$1._runtime = {
				graphics: { clear: function() {} },
				rendering: new dt(),
				update: function() {},
				advance: 0,
				ascent: 0,
				descent: 0,
				onFontUpdate: function() {},
				onColorUpdate: function() {}
			}, r$1 !== e$1.lastChar);) r$1 = r$1.next;
			if (e$1 === t$1.lastWord) break;
			e$1 = e$1.next;
		}
	}, t.prototype.addGraphic = function(t$1) {
		t$1._runtime = {
			graphics: { clear: function() {} },
			rendering: new dt(),
			update: function() {}
		};
	}, t.prototype.removeGraphic = function(t$1) {
		t$1._runtime = null;
	}, t;
}(), yt = function() {
	function t() {
		this.wrapperTable = {};
	}
	return t.prototype.isGraphics = function() {
		return !1;
	}, t.prototype.setCanvas = function() {
		return Promise.resolve();
	}, t.prototype.createRuntime = function(t$1) {
		return function(t$2, e$1, r$1, n$1) {
			return new (r$1 || (r$1 = Promise))((function(e$2, i$1) {
				function o$1(t$3) {
					try {
						a$1(n$1.next(t$3));
					} catch (t$4) {
						i$1(t$4);
					}
				}
				function s$1(t$3) {
					try {
						a$1(n$1.throw(t$3));
					} catch (t$4) {
						i$1(t$4);
					}
				}
				function a$1(t$3) {
					var n$2;
					t$3.done ? e$2(t$3.value) : (n$2 = t$3.value, n$2 instanceof r$1 ? n$2 : new r$1((function(t$4) {
						t$4(n$2);
					}))).then(o$1, s$1);
				}
				a$1((n$1 = n$1.apply(t$2, [])).next());
			}));
		}(this, 0, void 0, (function() {
			var e$1, r$1, n$1;
			return function(t$2, e$2) {
				var r$2, n$2, i$1, o$1, s$1 = {
					label: 0,
					sent: function() {
						if (1 & i$1[0]) throw i$1[1];
						return i$1[1];
					},
					trys: [],
					ops: []
				};
				return o$1 = {
					next: a$1(0),
					throw: a$1(1),
					return: a$1(2)
				}, "function" == typeof Symbol && (o$1[Symbol.iterator] = function() {
					return this;
				}), o$1;
				function a$1(a$2) {
					return function(u$1) {
						return function(a$3) {
							if (r$2) throw new TypeError("Generator is already executing.");
							for (; o$1 && (o$1 = 0, a$3[0] && (s$1 = 0)), s$1;) try {
								if (r$2 = 1, n$2 && (i$1 = 2 & a$3[0] ? n$2.return : a$3[0] ? n$2.throw || ((i$1 = n$2.return) && i$1.call(n$2), 0) : n$2.next) && !(i$1 = i$1.call(n$2, a$3[1])).done) return i$1;
								switch (n$2 = 0, i$1 && (a$3 = [2 & a$3[0], i$1.value]), a$3[0]) {
									case 0:
									case 1:
										i$1 = a$3;
										break;
									case 4: return s$1.label++, {
										value: a$3[1],
										done: !1
									};
									case 5:
										s$1.label++, n$2 = a$3[1], a$3 = [0];
										continue;
									case 7:
										a$3 = s$1.ops.pop(), s$1.trys.pop();
										continue;
									default:
										if (!((i$1 = (i$1 = s$1.trys).length > 0 && i$1[i$1.length - 1]) || 6 !== a$3[0] && 2 !== a$3[0])) {
											s$1 = 0;
											continue;
										}
										if (3 === a$3[0] && (!i$1 || a$3[1] > i$1[0] && a$3[1] < i$1[3])) {
											s$1.label = a$3[1];
											break;
										}
										if (6 === a$3[0] && s$1.label < i$1[1]) {
											s$1.label = i$1[1], i$1 = a$3;
											break;
										}
										if (i$1 && s$1.label < i$1[2]) {
											s$1.label = i$1[2], s$1.ops.push(a$3);
											break;
										}
										i$1[2] && s$1.ops.pop(), s$1.trys.pop();
										continue;
								}
								a$3 = e$2.call(t$2, s$1);
							} catch (t$3) {
								a$3 = [6, t$3], n$2 = 0;
							} finally {
								r$2 = i$1 = 0;
							}
							if (5 & a$3[0]) throw a$3[1];
							return {
								value: a$3[0] ? a$3[1] : void 0,
								done: !0
							};
						}([a$2, u$1]);
					};
				}
			}(this, (function(i$1) {
				for (this.video = t$1, t$1._runtime = new ft(), e$1 = t$1.firstCredit; e$1;) t$1._runtime.addCredit(e$1), e$1 = e$1.next;
				for (r$1 = t$1.firstPhrase; r$1;) t$1._runtime.addPhrase(r$1), r$1 = r$1.next;
				for (n$1 = t$1.firstGraphic; n$1;) t$1._runtime.addGraphic(n$1), n$1 = n$1.next;
				return [2, t$1._runtime];
			}));
		}));
	}, t.prototype.reset = function() {
		var t$1, e$1;
		this.resetTextUnitsFrom(this.video.firstCredit), this.resetTextUnitsFrom(null === (t$1 = this.video.firstCredit) || void 0 === t$1 ? void 0 : t$1.firstWord), this.resetTextUnitsFrom(null === (e$1 = this.video.firstCredit) || void 0 === e$1 ? void 0 : e$1.firstChar), this.resetTextUnitsFrom(this.video.firstPhrase), this.resetTextUnitsFrom(this.video.firstWord), this.resetTextUnitsFrom(this.video.firstChar), this.video._runtime.rendering.reset();
	}, t.prototype.resetTextUnitsFrom = function(t$1) {
		for (; t$1;) t$1.rendering.reset(), t$1.graphics.clear(), t$1 = t$1.next;
	}, t.prototype.update = function() {
		var t$1, e$1;
		this.updateCharsFrom(null === (t$1 = this.video.firstCredit) || void 0 === t$1 ? void 0 : t$1.firstChar), this.updateCharsFrom(null === (e$1 = this.video.firstPhrase) || void 0 === e$1 ? void 0 : e$1.firstChar);
	}, t.prototype.updateCharsFrom = function(t$1) {
		for (; t$1;) t$1._runtime.update(), t$1 = t$1.next;
	}, t.prototype.updateStageTx = function() {}, t;
}();
function gt(t) {
	if (void 0 !== t && "function" != typeof t) {
		if ("object" != typeof t) return t;
		if (null === t) return null;
		if (t instanceof X) return {
			type: "Color",
			value: {
				r: t.r,
				g: t.g,
				b: t.b,
				a: t.a
			}
		};
		throw new Error();
	}
}
function vt(t, e$1) {
	if ("object" != typeof t || null === t) return t;
	if (t.type && (e$1[t.type] || "Color" === t.type)) {
		var r$1;
		if ("Color" === t.type) {
			var n$1 = new X();
			n$1.r = Number(t.value.r), n$1.g = Number(t.value.g), n$1.b = Number(t.value.b), n$1.a = Number(t.value.a), r$1 = n$1;
		} else {
			for (var i$1 = new e$1[t.type](), o$1 = 0, s$1 = Object.keys(t.value); o$1 < s$1.length; o$1++) {
				var a$1 = s$1[o$1];
				i$1[a$1] = t.value[a$1];
			}
			r$1 = i$1;
		}
		return r$1;
	}
}
var mt, bt, _t, wt, Pt, Et, Ot, St, Tt, xt, At, Rt, Ct, Nt, kt, jt, It, Ut, Ft, Lt, Dt = function(t, e$1) {
	return bt = String(t), _t = bt.length, function(t$1) {
		for (var e$2 in mt = t$1 || {}, Mt) Object.prototype.hasOwnProperty.call(mt, e$2) || (mt[e$2] = Mt[e$2]);
		wt = mt.sourceFile || null;
	}(e$1), Ct = 1, Pt = Nt = 0, Rt = !0, pr(), function(t$1) {
		kt = jt = Pt, mt.locations && (It = new ar()), Ut = Lt = null, Ft = [], hr();
		var e$2 = t$1 || Or(), r$1 = !0;
		for (t$1 || (e$2.body = []); xt !== Jt;) {
			var n$1 = Fr();
			e$2.body.push(n$1), r$1 && xr(n$1) && wr(!0), r$1 = !1;
		}
		return Tr(e$2, "Program");
	}(mt.program);
}, Mt = {
	ecmaVersion: 5,
	strictSemicolons: !1,
	allowTrailingCommas: !0,
	forbidReserved: !1,
	locations: !1,
	onComment: null,
	ranges: !1,
	program: null,
	sourceFile: null,
	directSourceFile: null
}, Bt = function(t, e$1) {
	for (var r$1 = 1, n$1 = 0;;) {
		ir.lastIndex = n$1;
		var i$1 = ir.exec(t);
		if (!(i$1 && i$1.index < e$1)) break;
		++r$1, n$1 = i$1.index + i$1[0].length;
	}
	return {
		line: r$1,
		column: e$1 - n$1
	};
};
function Vt(t, e$1) {
	var r$1 = Bt(bt, t);
	e$1 += " (" + r$1.line + ":" + r$1.column + ")";
	var n$1 = new SyntaxError(e$1);
	throw n$1.pos = t, n$1.loc = r$1, n$1.raisedAt = Pt, n$1;
}
var Gt = [], qt = { type: "num" }, Wt = { type: "regexp" }, Yt = { type: "string" }, zt = { type: "name" }, Jt = { type: "eof" }, Ht = { keyword: "break" }, Xt = {
	keyword: "case",
	beforeExpr: !0
}, Zt = { keyword: "catch" }, $t = { keyword: "continue" }, Kt = { keyword: "debugger" }, Qt = { keyword: "default" }, te = {
	keyword: "do",
	isLoop: !0
}, ee = {
	keyword: "else",
	beforeExpr: !0
}, re = { keyword: "finally" }, ne = {
	keyword: "for",
	isLoop: !0
}, ie = { keyword: "function" }, oe = { keyword: "if" }, se = {
	keyword: "return",
	beforeExpr: !0
}, ae = { keyword: "switch" }, ue = {
	keyword: "throw",
	beforeExpr: !0
}, ce = { keyword: "try" }, le = { keyword: "var" }, pe = {
	keyword: "while",
	isLoop: !0
}, he = { keyword: "with" }, de = {
	keyword: "new",
	beforeExpr: !0
}, fe = { keyword: "this" }, ye = {
	keyword: "null",
	atomValue: null
}, ge = {
	keyword: "true",
	atomValue: !0
}, ve = {
	keyword: "false",
	atomValue: !1
}, me = {
	keyword: "in",
	binop: 7,
	beforeExpr: !0
}, be = {
	break: Ht,
	case: Xt,
	catch: Zt,
	continue: $t,
	debugger: Kt,
	default: Qt,
	do: te,
	else: ee,
	finally: re,
	for: ne,
	function: ie,
	if: oe,
	return: se,
	switch: ae,
	throw: ue,
	try: ce,
	var: le,
	while: pe,
	with: he,
	null: ye,
	true: ge,
	false: ve,
	new: de,
	in: me,
	instanceof: {
		keyword: "instanceof",
		binop: 7,
		beforeExpr: !0
	},
	this: fe,
	typeof: {
		keyword: "typeof",
		prefix: !0,
		beforeExpr: !0
	},
	void: {
		keyword: "void",
		prefix: !0,
		beforeExpr: !0
	},
	delete: {
		keyword: "delete",
		prefix: !0,
		beforeExpr: !0
	}
}, _e = {
	type: "[",
	beforeExpr: !0
}, we = { type: "]" }, Pe = {
	type: "{",
	beforeExpr: !0
}, Ee = { type: "}" }, Oe = {
	type: "(",
	beforeExpr: !0
}, Se = { type: ")" }, Te = {
	type: ",",
	beforeExpr: !0
}, xe = {
	type: ";",
	beforeExpr: !0
}, Ae = {
	type: ":",
	beforeExpr: !0
}, Re = { type: "." }, Ce = {
	type: "?",
	beforeExpr: !0
}, Ne = {
	binop: 10,
	beforeExpr: !0
}, ke = {
	isAssign: !0,
	beforeExpr: !0
}, je = {
	isAssign: !0,
	beforeExpr: !0
}, Ie = {
	postfix: !0,
	prefix: !0,
	isUpdate: !0
}, Ue = {
	prefix: !0,
	beforeExpr: !0
}, Fe = {
	binop: 1,
	beforeExpr: !0
}, Le = {
	binop: 2,
	beforeExpr: !0
}, De = {
	binop: 3,
	beforeExpr: !0
}, Me = {
	binop: 4,
	beforeExpr: !0
}, Be = {
	binop: 5,
	beforeExpr: !0
}, Ve = {
	binop: 6,
	beforeExpr: !0
}, Ge = {
	binop: 7,
	beforeExpr: !0
}, qe = {
	binop: 8,
	beforeExpr: !0
}, We = {
	binop: 9,
	prefix: !0,
	beforeExpr: !0
}, Ye = {
	binop: 10,
	beforeExpr: !0
};
function ze(t) {
	t = t.split(" ");
	var e$1 = "", r$1 = [];
	t: for (var n$1 = 0; n$1 < t.length; ++n$1) {
		for (var i$1 = 0; i$1 < r$1.length; ++i$1) if (r$1[i$1][0].length == t[n$1].length) {
			r$1[i$1].push(t[n$1]);
			continue t;
		}
		r$1.push([t[n$1]]);
	}
	function o$1(t$1) {
		if (1 == t$1.length) return e$1 += "return str === " + JSON.stringify(t$1[0]) + ";";
		e$1 += "switch(str){";
		for (var r$2 = 0; r$2 < t$1.length; ++r$2) e$1 += "case " + JSON.stringify(t$1[r$2]) + ":";
		e$1 += "return true}return false;";
	}
	if (r$1.length > 3) {
		for (r$1.sort((function(t$1, e$2) {
			return e$2.length - t$1.length;
		})), e$1 += "switch(str.length){", n$1 = 0; n$1 < r$1.length; ++n$1) {
			var s$1 = r$1[n$1];
			e$1 += "case " + s$1[0].length + ":", o$1(s$1);
		}
		e$1 += "}";
	} else o$1(t);
	return new Function("str", e$1);
}
var Je, He = ze("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"), Xe = ze("class enum extends super const export import"), Ze = ze("implements interface let package private protected public static yield"), $e = ze("eval arguments"), Ke = ze("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"), Qe = /[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/, tr = "------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------", er = /* @__PURE__ */ new RegExp("[" + tr + "]"), rr = /* @__PURE__ */ new RegExp("[" + tr + "------------------------------------------------------------------------------------------------------------------------------------------]"), nr = /[\n\r\u2028\u2029]/, ir = /\r\n|[\n\r\u2028\u2029]/g, or = function(t) {
	return t < 65 ? 36 === t : t < 91 || (t < 97 ? 95 === t : t < 123 || t >= 170 && er.test(String.fromCharCode(t)));
}, sr = function(t) {
	return t < 48 ? 36 === t : t < 58 || !(t < 65) && (t < 91 || (t < 97 ? 95 === t : t < 123 || t >= 170 && rr.test(String.fromCharCode(t))));
};
function ar() {
	this.line = Ct, this.column = Pt - Nt;
}
function ur(t, e$1) {
	Ot = Pt, mt.locations && (Tt = new ar()), xt = t, pr(), At = e$1, Rt = t.beforeExpr;
}
function cr() {
	var t, e$1 = mt.onComment && mt.locations && new ar(), r$1 = Pt, n$1 = bt.indexOf("*/", Pt += 2);
	if (-1 === n$1 && Vt(Pt - 2, "Unterminated comment"), Pt = n$1 + 2, mt.locations) for (ir.lastIndex = r$1; (t = ir.exec(bt)) && t.index < Pt;) ++Ct, Nt = t.index + t[0].length;
	mt.onComment && mt.onComment(!0, bt.slice(r$1 + 2, n$1), r$1, Pt, e$1, mt.locations && new ar());
}
function lr() {
	for (var t = Pt, e$1 = mt.onComment && mt.locations && new ar(), r$1 = bt.charCodeAt(Pt += 2); Pt < _t && 10 !== r$1 && 13 !== r$1 && 8232 !== r$1 && 8233 !== r$1;) ++Pt, r$1 = bt.charCodeAt(Pt);
	mt.onComment && mt.onComment(!1, bt.slice(t + 2, Pt), t, Pt, e$1, mt.locations && new ar());
}
function pr() {
	for (; Pt < _t;) {
		var t = bt.charCodeAt(Pt);
		if (32 === t) ++Pt;
		else if (13 === t) ++Pt, 10 === (e$1 = bt.charCodeAt(Pt)) && ++Pt, mt.locations && (++Ct, Nt = Pt);
		else if (10 === t || 8232 === t || 8233 === t) ++Pt, mt.locations && (++Ct, Nt = Pt);
		else if (t > 8 && t < 14) ++Pt;
		else if (47 === t) {
			var e$1;
			if (42 === (e$1 = bt.charCodeAt(Pt + 1))) cr();
			else {
				if (47 !== e$1) break;
				lr();
			}
		} else if (160 === t) ++Pt;
		else {
			if (!(t >= 5760 && Qe.test(String.fromCharCode(t)))) break;
			++Pt;
		}
	}
}
function hr(t) {
	if (t ? Pt = Et + 1 : Et = Pt, mt.locations && (St = new ar()), t) return fr();
	if (Pt >= _t) return ur(Jt);
	var e$1 = bt.charCodeAt(Pt);
	if (or(e$1) || 92 === e$1) return br();
	var r$1 = function(t$1) {
		switch (t$1) {
			case 46: return function() {
				var t$2 = bt.charCodeAt(Pt + 1);
				return t$2 >= 48 && t$2 <= 57 ? gr(!0) : (++Pt, ur(Re));
			}();
			case 40: return ++Pt, ur(Oe);
			case 41: return ++Pt, ur(Se);
			case 59: return ++Pt, ur(xe);
			case 44: return ++Pt, ur(Te);
			case 91: return ++Pt, ur(_e);
			case 93: return ++Pt, ur(we);
			case 123: return ++Pt, ur(Pe);
			case 125: return ++Pt, ur(Ee);
			case 58: return ++Pt, ur(Ae);
			case 63: return ++Pt, ur(Ce);
			case 48:
				var e$2 = bt.charCodeAt(Pt + 1);
				if (120 === e$2 || 88 === e$2) return function() {
					Pt += 2;
					var t$2 = yr(16);
					return t$2 ?? Vt(Et + 2, "Expected hexadecimal number"), or(bt.charCodeAt(Pt)) && Vt(Pt, "Identifier directly after number"), ur(qt, t$2);
				}();
			case 49:
			case 50:
			case 51:
			case 52:
			case 53:
			case 54:
			case 55:
			case 56:
			case 57: return gr(!1);
			case 34:
			case 39: return function(t$2) {
				Pt++;
				for (var e$3 = "";;) {
					Pt >= _t && Vt(Et, "Unterminated string constant");
					var r$2 = bt.charCodeAt(Pt);
					if (r$2 === t$2) return ++Pt, ur(Yt, e$3);
					if (92 === r$2) {
						r$2 = bt.charCodeAt(++Pt);
						var n$2 = /^[0-7]+/.exec(bt.slice(Pt, Pt + 3));
						for (n$2 && (n$2 = n$2[0]); n$2 && parseInt(n$2, 8) > 255;) n$2 = n$2.slice(0, -1);
						if ("0" === n$2 && (n$2 = null), ++Pt, n$2) Lt && Vt(Pt - 2, "Octal literal in strict mode"), e$3 += String.fromCharCode(parseInt(n$2, 8)), Pt += n$2.length - 1;
						else switch (r$2) {
							case 110:
								e$3 += "\n";
								break;
							case 114:
								e$3 += "\r";
								break;
							case 120:
								e$3 += String.fromCharCode(vr(2));
								break;
							case 117:
								e$3 += String.fromCharCode(vr(4));
								break;
							case 85:
								e$3 += String.fromCharCode(vr(8));
								break;
							case 116:
								e$3 += "	";
								break;
							case 98:
								e$3 += "\b";
								break;
							case 118:
								e$3 += "\v";
								break;
							case 102:
								e$3 += "\f";
								break;
							case 48:
								e$3 += "\0";
								break;
							case 13: 10 === bt.charCodeAt(Pt) && ++Pt;
							case 10:
								mt.locations && (Nt = Pt, ++Ct);
								break;
							default: e$3 += String.fromCharCode(r$2);
						}
					} else 13 !== r$2 && 10 !== r$2 && 8232 !== r$2 && 8233 !== r$2 || Vt(Et, "Unterminated string constant"), e$3 += String.fromCharCode(r$2), ++Pt;
				}
			}(t$1);
			case 47: return function(t$2) {
				var e$3 = bt.charCodeAt(Pt + 1);
				return Rt ? (++Pt, fr()) : 61 === e$3 ? dr(je, 2) : dr(Ne, 1);
			}();
			case 37:
			case 42: return 61 === bt.charCodeAt(Pt + 1) ? dr(je, 2) : dr(Ye, 1);
			case 124:
			case 38: return function(t$2) {
				var e$3 = bt.charCodeAt(Pt + 1);
				return e$3 === t$2 ? dr(124 === t$2 ? Fe : Le, 2) : 61 === e$3 ? dr(je, 2) : dr(124 === t$2 ? De : Be, 1);
			}(t$1);
			case 94: return 61 === bt.charCodeAt(Pt + 1) ? dr(je, 2) : dr(Me, 1);
			case 43:
			case 45: return function(t$2) {
				var e$3 = bt.charCodeAt(Pt + 1);
				return e$3 === t$2 ? 45 == e$3 && 62 == bt.charCodeAt(Pt + 2) && nr.test(bt.slice(jt, Pt)) ? (Pt += 3, lr(), pr(), hr()) : dr(Ie, 2) : 61 === e$3 ? dr(je, 2) : dr(We, 1);
			}(t$1);
			case 60:
			case 62: return function(t$2) {
				var e$3 = bt.charCodeAt(Pt + 1), r$2 = 1;
				return e$3 === t$2 ? (r$2 = 62 === t$2 && 62 === bt.charCodeAt(Pt + 2) ? 3 : 2, 61 === bt.charCodeAt(Pt + r$2) ? dr(je, r$2 + 1) : dr(qe, r$2)) : 33 == e$3 && 60 == t$2 && 45 == bt.charCodeAt(Pt + 2) && 45 == bt.charCodeAt(Pt + 3) ? (Pt += 4, lr(), pr(), hr()) : (61 === e$3 && (r$2 = 61 === bt.charCodeAt(Pt + 2) ? 3 : 2), dr(Ge, r$2));
			}(t$1);
			case 61:
			case 33: return function(t$2) {
				return 61 === bt.charCodeAt(Pt + 1) ? dr(Ve, 61 === bt.charCodeAt(Pt + 2) ? 3 : 2) : dr(61 === t$2 ? ke : Ue, 1);
			}(t$1);
			case 126: return dr(Ue, 1);
		}
		return !1;
	}(e$1);
	if (!1 === r$1) {
		var n$1 = String.fromCharCode(e$1);
		if ("\\" === n$1 || er.test(n$1)) return br();
		Vt(Pt, "Unexpected character '" + n$1 + "'");
	}
	return r$1;
}
function dr(t, e$1) {
	var r$1 = bt.slice(Pt, Pt + e$1);
	Pt += e$1, ur(t, r$1);
}
function fr() {
	for (var t, e$1, r$1 = Pt;;) {
		Pt >= _t && Vt(r$1, "Unterminated regular expression");
		var n$1 = bt.charAt(Pt);
		if (nr.test(n$1) && Vt(r$1, "Unterminated regular expression"), t) t = !1;
		else {
			if ("[" === n$1) e$1 = !0;
			else if ("]" === n$1 && e$1) e$1 = !1;
			else if ("/" === n$1 && !e$1) break;
			t = "\\" === n$1;
		}
		++Pt;
	}
	var i$1 = bt.slice(r$1, Pt);
	++Pt;
	var o$1 = mr();
	return o$1 && !/^[gmsiy]*$/.test(o$1) && Vt(r$1, "Invalid regexp flag"), ur(Wt, new RegExp(i$1, o$1));
}
function yr(t, e$1) {
	for (var r$1 = Pt, n$1 = 0, i$1 = 0, o$1 = null == e$1 ? Infinity : e$1; i$1 < o$1; ++i$1) {
		var s$1, a$1 = bt.charCodeAt(Pt);
		if ((s$1 = a$1 >= 97 ? a$1 - 97 + 10 : a$1 >= 65 ? a$1 - 65 + 10 : a$1 >= 48 && a$1 <= 57 ? a$1 - 48 : Infinity) >= t) break;
		++Pt, n$1 = n$1 * t + s$1;
	}
	return Pt === r$1 || null != e$1 && Pt - r$1 !== e$1 ? null : n$1;
}
function gr(t) {
	var e$1 = Pt, r$1 = !1, n$1 = 48 === bt.charCodeAt(Pt);
	t || null !== yr(10) || Vt(e$1, "Invalid number"), 46 === bt.charCodeAt(Pt) && (++Pt, yr(10), r$1 = !0);
	var i$1 = bt.charCodeAt(Pt);
	69 !== i$1 && 101 !== i$1 || (43 !== (i$1 = bt.charCodeAt(++Pt)) && 45 !== i$1 || ++Pt, null === yr(10) && Vt(e$1, "Invalid number"), r$1 = !0), or(bt.charCodeAt(Pt)) && Vt(Pt, "Identifier directly after number");
	var o$1, s$1 = bt.slice(e$1, Pt);
	return r$1 ? o$1 = parseFloat(s$1) : n$1 && 1 !== s$1.length ? /[89]/.test(s$1) || Lt ? Vt(e$1, "Invalid number") : o$1 = parseInt(s$1, 8) : o$1 = parseInt(s$1, 10), ur(qt, o$1);
}
function vr(t) {
	var e$1 = yr(16, t);
	return null === e$1 && Vt(Et, "Bad character escape sequence"), e$1;
}
function mr() {
	Je = !1;
	for (var t, e$1 = !0, r$1 = Pt;;) {
		var n$1 = bt.charCodeAt(Pt);
		if (sr(n$1)) Je && (t += bt.charAt(Pt)), ++Pt;
		else {
			if (92 !== n$1) break;
			Je || (t = bt.slice(r$1, Pt)), Je = !0, 117 != bt.charCodeAt(++Pt) && Vt(Pt, "Expecting Unicode escape sequence \\uXXXX"), ++Pt;
			var i$1 = vr(4), o$1 = String.fromCharCode(i$1);
			o$1 || Vt(Pt - 1, "Invalid Unicode escape"), (e$1 ? or(i$1) : sr(i$1)) || Vt(Pt - 4, "Invalid Unicode escape"), t += o$1;
		}
		e$1 = !1;
	}
	return Je ? t : bt.slice(r$1, Pt);
}
function br() {
	var t = mr(), e$1 = zt;
	return Je || (Ke(t) ? e$1 = be[t] : (mt.forbidReserved && (3 === mt.ecmaVersion ? He : Xe)(t) || Lt && Ze(t)) && Vt(Et, "The keyword '" + t + "' is reserved")), ur(e$1, t);
}
function _r() {
	kt = Et, jt = Ot, It = Tt, hr();
}
function wr(t) {
	if (Lt = t, Pt = jt, mt.locations) for (; Pt < Nt;) Nt = bt.lastIndexOf("\n", Nt - 2) + 1, --Ct;
	pr(), hr();
}
function Pr() {
	this.type = null, this.start = Et, this.end = null;
}
function Er() {
	this.start = St, this.end = null, null !== wt && (this.source = wt);
}
function Or() {
	var t = new Pr();
	return mt.locations && (t.loc = new Er()), mt.directSourceFile && (t.sourceFile = mt.directSourceFile), mt.ranges && (t.range = [Et, 0]), t;
}
function Sr(t) {
	var e$1 = new Pr();
	return e$1.start = t.start, mt.locations && (e$1.loc = new Er(), e$1.loc.start = t.loc.start), mt.ranges && (e$1.range = [t.range[0], 0]), e$1;
}
function Tr(t, e$1) {
	return t.type = e$1, t.end = jt, mt.locations && (t.loc.end = It), mt.ranges && (t.range[1] = jt), t;
}
function xr(t) {
	return mt.ecmaVersion >= 5 && "ExpressionStatement" === t.type && "Literal" === t.expression.type && "use strict" === t.expression.value;
}
function Ar(t) {
	if (xt === t) return _r(), !0;
}
function Rr() {
	return !mt.strictSemicolons && (xt === Jt || xt === Ee || nr.test(bt.slice(jt, Et)));
}
function Cr() {
	Ar(xe) || Rr() || kr();
}
function Nr(t) {
	xt === t ? _r() : kr();
}
function kr() {
	Vt(Et, "Unexpected token");
}
function jr(t) {
	"Identifier" !== t.type && "MemberExpression" !== t.type && Vt(t.start, "Assigning to rvalue"), Lt && "Identifier" === t.type && $e(t.name) && Vt(t.start, "Assigning to " + t.name + " in strict mode");
}
var Ir = { kind: "loop" }, Ur = { kind: "switch" };
function Fr() {
	(xt === Ne || xt === je && "/=" == At) && hr(!0);
	var t = xt, e$1 = Or();
	switch (t) {
		case Ht:
		case $t:
			_r();
			var r$1 = t === Ht;
			Ar(xe) || Rr() ? e$1.label = null : xt !== zt ? kr() : (e$1.label = $r(), Cr());
			for (var n$1 = 0; n$1 < Ft.length; ++n$1) {
				var i$1 = Ft[n$1];
				if (null == e$1.label || i$1.name === e$1.label.name) {
					if (null != i$1.kind && (r$1 || "loop" === i$1.kind)) break;
					if (e$1.label && r$1) break;
				}
			}
			return n$1 === Ft.length && Vt(e$1.start, "Unsyntactic " + t.keyword), Tr(e$1, r$1 ? "BreakStatement" : "ContinueStatement");
		case Kt: return _r(), Cr(), Tr(e$1, "DebuggerStatement");
		case te: return _r(), Ft.push(Ir), e$1.body = Fr(), Ft.pop(), Nr(pe), e$1.test = Lr(), Cr(), Tr(e$1, "DoWhileStatement");
		case ne:
			if (_r(), Ft.push(Ir), Nr(Oe), xt === xe) return Mr(e$1, null);
			if (xt === le) {
				var o$1 = Or();
				return _r(), Vr(o$1, !0), Tr(o$1, "VariableDeclaration"), 1 === o$1.declarations.length && Ar(me) ? Br(e$1, o$1) : Mr(e$1, o$1);
			}
			return o$1 = Gr(!1, !0), Ar(me) ? (jr(o$1), Br(e$1, o$1)) : Mr(e$1, o$1);
		case ie: return _r(), Xr(e$1, !0);
		case oe: return _r(), e$1.test = Lr(), e$1.consequent = Fr(), e$1.alternate = Ar(ee) ? Fr() : null, Tr(e$1, "IfStatement");
		case se: return Ut || Vt(Et, "'return' outside of function"), _r(), Ar(xe) || Rr() ? e$1.argument = null : (e$1.argument = Gr(), Cr()), Tr(e$1, "ReturnStatement");
		case ae:
			_r(), e$1.discriminant = Lr(), e$1.cases = [], Nr(Pe), Ft.push(Ur);
			for (var s$1, a$1; xt != Ee;) if (xt === Xt || xt === Qt) {
				var u$1 = xt === Xt;
				s$1 && Tr(s$1, "SwitchCase"), e$1.cases.push(s$1 = Or()), s$1.consequent = [], _r(), u$1 ? s$1.test = Gr() : (a$1 && Vt(kt, "Multiple default clauses"), a$1 = !0, s$1.test = null), Nr(Ae);
			} else s$1 || kr(), s$1.consequent.push(Fr());
			return s$1 && Tr(s$1, "SwitchCase"), _r(), Ft.pop(), Tr(e$1, "SwitchStatement");
		case ue: return _r(), nr.test(bt.slice(jt, Et)) && Vt(jt, "Illegal newline after throw"), e$1.argument = Gr(), Cr(), Tr(e$1, "ThrowStatement");
		case ce:
			if (_r(), e$1.block = Dr(), e$1.handler = null, xt === Zt) {
				var c$1 = Or();
				_r(), Nr(Oe), c$1.param = $r(), Lt && $e(c$1.param.name) && Vt(c$1.param.start, "Binding " + c$1.param.name + " in strict mode"), Nr(Se), c$1.guard = null, c$1.body = Dr(), e$1.handler = Tr(c$1, "CatchClause");
			}
			return e$1.guardedHandlers = Gt, e$1.finalizer = Ar(re) ? Dr() : null, e$1.handler || e$1.finalizer || Vt(e$1.start, "Missing catch or finally clause"), Tr(e$1, "TryStatement");
		case le: return _r(), Vr(e$1), Cr(), Tr(e$1, "VariableDeclaration");
		case pe: return _r(), e$1.test = Lr(), Ft.push(Ir), e$1.body = Fr(), Ft.pop(), Tr(e$1, "WhileStatement");
		case he: return Lt && Vt(Et, "'with' in strict mode"), _r(), e$1.object = Lr(), e$1.body = Fr(), Tr(e$1, "WithStatement");
		case Pe: return Dr();
		case xe: return _r(), Tr(e$1, "EmptyStatement");
		default:
			var l$1 = At, p$1 = Gr();
			if (t === zt && "Identifier" === p$1.type && Ar(Ae)) {
				for (n$1 = 0; n$1 < Ft.length; ++n$1) Ft[n$1].name === l$1 && Vt(p$1.start, "Label '" + l$1 + "' is already declared");
				var h$1 = xt.isLoop ? "loop" : xt === ae ? "switch" : null;
				return Ft.push({
					name: l$1,
					kind: h$1
				}), e$1.body = Fr(), Ft.pop(), e$1.label = p$1, Tr(e$1, "LabeledStatement");
			}
			return e$1.expression = p$1, Cr(), Tr(e$1, "ExpressionStatement");
	}
}
function Lr() {
	Nr(Oe);
	var t = Gr();
	return Nr(Se), t;
}
function Dr(t) {
	var e$1, r$1 = Or(), n$1 = !0, i$1 = !1;
	for (r$1.body = [], Nr(Pe); !Ar(Ee);) {
		var o$1 = Fr();
		r$1.body.push(o$1), n$1 && t && xr(o$1) && (e$1 = i$1, wr(i$1 = !0)), n$1 = !1;
	}
	return i$1 && !e$1 && wr(!1), Tr(r$1, "BlockStatement");
}
function Mr(t, e$1) {
	return t.init = e$1, Nr(xe), t.test = xt === xe ? null : Gr(), Nr(xe), t.update = xt === Se ? null : Gr(), Nr(Se), t.body = Fr(), Ft.pop(), Tr(t, "ForStatement");
}
function Br(t, e$1) {
	return t.left = e$1, t.right = Gr(), Nr(Se), t.body = Fr(), Ft.pop(), Tr(t, "ForInStatement");
}
function Vr(t, e$1) {
	for (t.declarations = [], t.kind = "var";;) {
		var r$1 = Or();
		if (r$1.id = $r(), Lt && $e(r$1.id.name) && Vt(r$1.id.start, "Binding " + r$1.id.name + " in strict mode"), r$1.init = Ar(ke) ? Gr(!0, e$1) : null, t.declarations.push(Tr(r$1, "VariableDeclarator")), !Ar(Te)) break;
	}
	return t;
}
function Gr(t, e$1) {
	var r$1 = qr(e$1);
	if (!t && xt === Te) {
		var n$1 = Sr(r$1);
		for (n$1.expressions = [r$1]; Ar(Te);) n$1.expressions.push(qr(e$1));
		return Tr(n$1, "SequenceExpression");
	}
	return r$1;
}
function qr(t) {
	var e$1 = function(t$1) {
		var e$2 = function(t$2) {
			return Wr(Yr(), -1, t$2);
		}(t$1);
		if (Ar(Ce)) {
			var r$2 = Sr(e$2);
			return r$2.test = e$2, r$2.consequent = Gr(!0), Nr(Ae), r$2.alternate = Gr(!0, t$1), Tr(r$2, "ConditionalExpression");
		}
		return e$2;
	}(t);
	if (xt.isAssign) {
		var r$1 = Sr(e$1);
		return r$1.operator = At, r$1.left = e$1, _r(), r$1.right = qr(t), jr(e$1), Tr(r$1, "AssignmentExpression");
	}
	return e$1;
}
function Wr(t, e$1, r$1) {
	var n$1 = xt.binop;
	if (null != n$1 && (!r$1 || xt !== me) && n$1 > e$1) {
		var i$1 = Sr(t);
		i$1.left = t, i$1.operator = At;
		var o$1 = xt;
		return _r(), i$1.right = Wr(Yr(), n$1, r$1), Wr(Tr(i$1, o$1 === Fe || o$1 === Le ? "LogicalExpression" : "BinaryExpression"), e$1, r$1);
	}
	return t;
}
function Yr() {
	if (xt.prefix) {
		var t = Or(), e$1 = xt.isUpdate;
		return t.operator = At, t.prefix = !0, Rt = !0, _r(), t.argument = Yr(), e$1 ? jr(t.argument) : Lt && "delete" === t.operator && "Identifier" === t.argument.type && Vt(t.start, "Deleting local variable in strict mode"), Tr(t, e$1 ? "UpdateExpression" : "UnaryExpression");
	}
	for (var r$1 = zr(Jr()); xt.postfix && !Rr();) (t = Sr(r$1)).operator = At, t.prefix = !1, t.argument = r$1, jr(r$1), _r(), r$1 = Tr(t, "UpdateExpression");
	return r$1;
}
function zr(t, e$1) {
	var r$1;
	return Ar(Re) ? ((r$1 = Sr(t)).object = t, r$1.property = $r(!0), r$1.computed = !1, zr(Tr(r$1, "MemberExpression"), e$1)) : Ar(_e) ? ((r$1 = Sr(t)).object = t, r$1.property = Gr(), r$1.computed = !0, Nr(we), zr(Tr(r$1, "MemberExpression"), e$1)) : !e$1 && Ar(Oe) ? ((r$1 = Sr(t)).callee = t, r$1.arguments = Zr(Se, !1), zr(Tr(r$1, "CallExpression"), e$1)) : t;
}
function Jr() {
	switch (xt) {
		case fe:
			var t = Or();
			return _r(), Tr(t, "ThisExpression");
		case zt: return $r();
		case qt:
		case Yt:
		case Wt: return (t = Or()).value = At, t.raw = bt.slice(Et, Ot), _r(), Tr(t, "Literal");
		case ye:
		case ge:
		case ve: return (t = Or()).value = xt.atomValue, t.raw = xt.keyword, _r(), Tr(t, "Literal");
		case Oe:
			var e$1 = St, r$1 = Et;
			_r();
			var n$1 = Gr();
			return n$1.start = r$1, n$1.end = Ot, mt.locations && (n$1.loc.start = e$1, n$1.loc.end = Tt), mt.ranges && (n$1.range = [r$1, Ot]), Nr(Se), n$1;
		case _e: return t = Or(), _r(), t.elements = Zr(we, !0, !0), Tr(t, "ArrayExpression");
		case Pe: return function() {
			var t$1 = Or(), e$2 = !0, r$2 = !1;
			for (t$1.properties = [], _r(); !Ar(Ee);) {
				if (e$2) e$2 = !1;
				else if (Nr(Te), mt.allowTrailingCommas && Ar(Ee)) break;
				var n$2, i$1 = { key: Hr() }, o$1 = !1;
				if (Ar(Ae) ? (i$1.value = Gr(!0), n$2 = i$1.kind = "init") : mt.ecmaVersion >= 5 && "Identifier" === i$1.key.type && ("get" === i$1.key.name || "set" === i$1.key.name) ? (o$1 = r$2 = !0, n$2 = i$1.kind = i$1.key.name, i$1.key = Hr(), xt !== Oe && kr(), i$1.value = Xr(Or(), !1)) : kr(), "Identifier" === i$1.key.type && (Lt || r$2)) for (var s$1 = 0; s$1 < t$1.properties.length; ++s$1) {
					var a$1 = t$1.properties[s$1];
					if (a$1.key.name === i$1.key.name) {
						var u$1 = n$2 == a$1.kind || o$1 && "init" === a$1.kind || "init" === n$2 && ("get" === a$1.kind || "set" === a$1.kind);
						u$1 && !Lt && "init" === n$2 && "init" === a$1.kind && (u$1 = !1), u$1 && Vt(i$1.key.start, "Redefinition of property");
					}
				}
				t$1.properties.push(i$1);
			}
			return Tr(t$1, "ObjectExpression");
		}();
		case ie: return t = Or(), _r(), Xr(t, !1);
		case de: return function() {
			var t$1 = Or();
			return _r(), t$1.callee = zr(Jr(), !0), Ar(Oe) ? t$1.arguments = Zr(Se, !1) : t$1.arguments = Gt, Tr(t$1, "NewExpression");
		}();
		default: kr();
	}
}
function Hr() {
	return xt === qt || xt === Yt ? Jr() : $r(!0);
}
function Xr(t, e$1) {
	xt === zt ? t.id = $r() : e$1 ? kr() : t.id = null, t.params = [];
	var r$1 = !0;
	for (Nr(Oe); !Ar(Se);) r$1 ? r$1 = !1 : Nr(Te), t.params.push($r());
	var n$1 = Ut, i$1 = Ft;
	if (Ut = !0, Ft = [], t.body = Dr(!0), Ut = n$1, Ft = i$1, Lt || t.body.body.length && xr(t.body.body[0])) for (var o$1 = t.id ? -1 : 0; o$1 < t.params.length; ++o$1) {
		var s$1 = o$1 < 0 ? t.id : t.params[o$1];
		if ((Ze(s$1.name) || $e(s$1.name)) && Vt(s$1.start, "Defining '" + s$1.name + "' in strict mode"), o$1 >= 0) for (var a$1 = 0; a$1 < o$1; ++a$1) s$1.name === t.params[a$1].name && Vt(s$1.start, "Argument name clash in strict mode");
	}
	return Tr(t, e$1 ? "FunctionDeclaration" : "FunctionExpression");
}
function Zr(t, e$1, r$1) {
	for (var n$1 = [], i$1 = !0; !Ar(t);) {
		if (i$1) i$1 = !1;
		else if (Nr(Te), e$1 && mt.allowTrailingCommas && Ar(t)) break;
		r$1 && xt === Te ? n$1.push(null) : n$1.push(Gr(!0));
	}
	return n$1;
}
function $r(t) {
	var e$1 = Or();
	return e$1.name = xt === zt ? At : t && !mt.forbidReserved && xt.keyword || kr(), Rt = !1, _r(), Tr(e$1, "Identifier");
}
var Kr = function() {
	function t(e$1, r$1) {
		var n$1, i$1 = "string" == typeof e$1 ? Dt(e$1, t.PARSE_OPTIONS) : e$1;
		this.ast = i$1, this.initFunc_ = r$1, this.paused_ = !1, this.polyfills_ = [], this.functionCounter_ = 0, this.stepFunctions_ = Object.create(null);
		for (var o$1, s$1 = /^step([A-Z]\w*)$/, a$1 = Object.getOwnPropertyNames(t.prototype), u$1 = 0; u$1 < a$1.length; u$1++) {
			var c$1 = a$1[u$1];
			"function" == typeof t.prototype[c$1] && (o$1 = c$1.match(s$1)) && (this.stepFunctions_[o$1[1]] = t.prototype[c$1].bind(this));
		}
		this.global = this.createScope(this.ast, null), this.ast = Dt(this.polyfills_.join("\n"), t.PARSE_OPTIONS), this.polyfills_ = void 0, this.stripLocations_(this.ast, void 0, void 0), (n$1 = new tn(this.ast, this.global)).done = !1, this.stateStack = [n$1], this.run(), this.value = void 0, this.ast = i$1, (n$1 = new tn(this.ast, this.global)).done = !1, this.stateStack.length = 0, this.stateStack[0] = n$1, this.nodeConstructor = n$1.node.constructor, this.stateStack = this.stateStack, this.OBJECT = this.OBJECT, this.OBJECT_PROTO = this.OBJECT_PROTO, this.FUNCTION = this.FUNCTION, this.FUNCTION_PROTO = this.FUNCTION_PROTO, this.ARRAY = this.ARRAY, this.ARRAY_PROTO = this.ARRAY_PROTO, this.REGEXP = this.REGEXP, this.REGEXP_PROTO = this.REGEXP_PROTO, this.UNDEFINED = void 0, this.NULL = null, this.NAN = NaN, this.TRUE = !0, this.FALSE = !1, this.STRING_EMPTY = "", this.NUMBER_ZERO = 0, this.NUMBER_ONE = 1;
	}
	return t.prototype.wrap = function(t$1) {
		return t$1;
	}, t.prototype.unwrap = function(t$1, e$1) {
		return t$1;
	}, t.prototype.appendCode = function(e$1) {
		var r$1 = this.stateStack[0];
		if (!r$1 || "Program" !== r$1.node.type) throw Error("Expecting original AST to start with a Program node.");
		var n$1 = "string" == typeof e$1 ? Dt(e$1, t.PARSE_OPTIONS) : e$1;
		if (!n$1 || "Program" !== n$1.type) throw Error("Expecting new AST to start with a Program node.");
		this.populateScope_(n$1, r$1.scope);
		for (var i$1, o$1 = 0; i$1 = n$1.body[o$1]; o$1++) r$1.node.body.push(i$1);
		r$1.done = !1;
	}, t.prototype.step = function() {
		var e$1 = this.stateStack, r$1 = e$1[e$1.length - 1];
		if (!r$1) return !1;
		var n$1 = r$1.node, i$1 = n$1.type;
		if ("Program" === i$1 && r$1.done) return !1;
		if (this.paused_) return !0;
		try {
			var o$1 = this.stepFunctions_[i$1](e$1, r$1, n$1);
		} catch (e$2) {
			if (e$2 !== t.STEP_ERROR) throw e$2;
		}
		return o$1 && e$1.push(o$1), !!n$1.end || this.step();
	}, t.prototype.run = function() {
		for (; !this.paused_ && this.step(););
		return this.paused_;
	}, t.prototype.initGlobalScope = function(e$1) {
		this.setProperty(e$1, "NaN", NaN, t.READONLY_DESCRIPTOR), this.setProperty(e$1, "Infinity", Infinity, t.READONLY_DESCRIPTOR), this.setProperty(e$1, "undefined", void 0, t.READONLY_DESCRIPTOR), this.setProperty(e$1, "window", e$1, t.READONLY_DESCRIPTOR), this.setProperty(e$1, "this", e$1, t.READONLY_DESCRIPTOR), this.setProperty(e$1, "self", e$1), this.OBJECT_PROTO = new Qr(null), this.FUNCTION_PROTO = new Qr(this.OBJECT_PROTO), this.initFunction(e$1), this.initObject(e$1), e$1.proto = this.OBJECT_PROTO, this.setProperty(e$1, "constructor", this.OBJECT), this.initArray(e$1), this.initString(e$1), this.initBoolean(e$1), this.initNumber(e$1), this.initDate(e$1), this.initRegExp(e$1), this.initError(e$1), this.initMath(e$1), this.initJSON(e$1);
		var r$1 = this, n$1 = this.createNativeFunction((function(t$1) {
			throw EvalError("Can't happen");
		}), !1);
		n$1.eval = !0, this.setProperty(e$1, "eval", n$1), this.setProperty(e$1, "parseInt", this.createNativeFunction(parseInt, !1)), this.setProperty(e$1, "parseFloat", this.createNativeFunction(parseFloat, !1)), this.setProperty(e$1, "isNaN", this.createNativeFunction(isNaN, !1)), this.setProperty(e$1, "isFinite", this.createNativeFunction(isFinite, !1));
		for (var i$1 = [
			[escape, "escape"],
			[unescape, "unescape"],
			[decodeURI, "decodeURI"],
			[decodeURIComponent, "decodeURIComponent"],
			[encodeURI, "encodeURI"],
			[encodeURIComponent, "encodeURIComponent"]
		], o$1 = 0; o$1 < i$1.length; o$1++) {
			var s$1 = function(t$1) {
				return function(e$2) {
					try {
						return t$1(e$2);
					} catch (t$2) {
						r$1.throwException(r$1.URI_ERROR, t$2.message);
					}
				};
			}(i$1[o$1][0]);
			this.setProperty(e$1, i$1[o$1][1], this.createNativeFunction(s$1, !1), t.NONENUMERABLE_DESCRIPTOR);
		}
		this.initFunc_ && this.initFunc_(this, e$1);
	}, t.prototype.initFunction = function(e$1) {
		var r$1, n$1 = this, i$1 = /^[A-Za-z_$][\w$]*$/;
		r$1 = function(e$2) {
			if (n$1.calledWithNew()) var r$2 = this;
			else r$2 = n$1.createObjectProto(n$1.FUNCTION_PROTO);
			if (arguments.length) var o$2 = String(arguments[arguments.length - 1]);
			else o$2 = "";
			for (var s$1 = [], a$1 = 0; a$1 < arguments.length - 1; a$1++) {
				var u$1 = String(arguments[a$1]);
				u$1.match(i$1) || n$1.throwException(n$1.SYNTAX_ERROR, "Invalid function argument: " + u$1), s$1.push(u$1);
			}
			s$1 = s$1.join(", "), r$2.parentScope = n$1.global;
			try {
				var c$1 = Dt("$ = function(" + s$1 + ") {" + o$2 + "};", t.PARSE_OPTIONS);
			} catch (t$1) {
				n$1.throwException(n$1.SYNTAX_ERROR, "Invalid code: " + t$1.message);
			}
			return 1 !== c$1.body.length && n$1.throwException(n$1.SYNTAX_ERROR, "Invalid code in function body."), r$2.node = c$1.body[0].expression.right, n$1.setProperty(r$2, "length", r$2.node.length, t.READONLY_DESCRIPTOR), r$2;
		}, r$1.id = this.functionCounter_++, this.FUNCTION = this.createObjectProto(this.FUNCTION_PROTO), this.setProperty(e$1, "Function", this.FUNCTION), this.setProperty(this.FUNCTION, "prototype", this.FUNCTION_PROTO), this.FUNCTION.nativeFunc = r$1, this.setProperty(this.FUNCTION_PROTO, "constructor", this.FUNCTION, t.NONENUMERABLE_DESCRIPTOR), this.FUNCTION_PROTO.nativeFunc = function() {}, this.FUNCTION_PROTO.nativeFunc.id = this.functionCounter_++, this.setProperty(this.FUNCTION_PROTO, "length", 0, t.READONLY_DESCRIPTOR);
		var o$1 = function(t$1) {
			if (!(t$1 && t$1.isObject || n$1.getScope().strict)) if (null == t$1) t$1 = n$1.global;
			else {
				var e$2 = n$1.createObjectProto(n$1.getPrototype(t$1));
				e$2.data = t$1, t$1 = e$2;
			}
			return t$1;
		};
		r$1 = function(t$1, e$2) {
			var r$2 = n$1.stateStack[n$1.stateStack.length - 1];
			r$2.func_ = this, r$2.funcThis_ = o$1(t$1), r$2.arguments_ = [], null != e$2 && (e$2.isObject ? r$2.arguments_ = n$1.pseudoToNative(e$2) : n$1.throwException(n$1.TYPE_ERROR, "CreateListFromArrayLike called on non-object")), r$2.doneExec_ = !1;
		}, this.setNativeFunctionPrototype(this.FUNCTION, "apply", r$1), r$1 = function(t$1, e$2) {
			var r$2 = n$1.stateStack[n$1.stateStack.length - 1];
			r$2.func_ = this, r$2.funcThis_ = o$1(t$1), r$2.arguments_ = [];
			for (var i$2 = 1; i$2 < arguments.length; i$2++) r$2.arguments_.push(arguments[i$2]);
			r$2.doneExec_ = !1;
		}, this.setNativeFunctionPrototype(this.FUNCTION, "call", r$1), this.polyfills_.push("Object.defineProperty(Function.prototype, 'bind',", "{configurable: true, writable: true, value:", "function(oThis) {", "if (typeof this !== 'function') {", "throw TypeError('What is trying to be bound is not callable');", "}", "var aArgs   = Array.prototype.slice.call(arguments, 1),", "fToBind = this,", "fNOP    = function() {},", "fBound  = function() {", "return fToBind.apply(this instanceof fNOP", "? this", ": oThis,", "aArgs.concat(Array.prototype.slice.call(arguments)));", "};", "if (this.prototype) {", "fNOP.prototype = this.prototype;", "}", "fBound.prototype = new fNOP();", "return fBound;", "}", "});", ""), r$1 = function() {
			return this.toString();
		}, this.setNativeFunctionPrototype(this.FUNCTION, "toString", r$1), this.setProperty(this.FUNCTION, "toString", this.createNativeFunction(r$1, !1), t.NONENUMERABLE_DESCRIPTOR), r$1 = function() {
			return this.valueOf();
		}, this.setNativeFunctionPrototype(this.FUNCTION, "valueOf", r$1), this.setProperty(this.FUNCTION, "valueOf", this.createNativeFunction(r$1, !1), t.NONENUMERABLE_DESCRIPTOR);
	}, t.prototype.initObject = function(e$1) {
		var r$1, n$1 = this;
		r$1 = function(t$1) {
			if (null == t$1) return n$1.calledWithNew() ? this : n$1.createObjectProto(n$1.OBJECT_PROTO);
			if (!t$1.isObject) {
				var e$2 = n$1.createObjectProto(n$1.getPrototype(t$1));
				return e$2.data = t$1, e$2;
			}
			return t$1;
		}, this.OBJECT = this.createNativeFunction(r$1, !0), this.setProperty(this.OBJECT, "prototype", this.OBJECT_PROTO), this.setProperty(this.OBJECT_PROTO, "constructor", this.OBJECT), this.setProperty(e$1, "Object", this.OBJECT);
		var i$1 = function(t$1) {
			t$1 ?? n$1.throwException(n$1.TYPE_ERROR, "Cannot convert '" + t$1 + "' to object");
		};
		r$1 = function(t$1) {
			i$1(t$1);
			var e$2 = t$1.isObject ? t$1.properties : t$1;
			return n$1.nativeToPseudo(Object.getOwnPropertyNames(e$2));
		}, this.setProperty(this.OBJECT, "getOwnPropertyNames", this.createNativeFunction(r$1, !1), t.NONENUMERABLE_DESCRIPTOR), r$1 = function(t$1) {
			return i$1(t$1), t$1.isObject ? n$1.nativeToPseudo(Object.keys(t$1.properties)) : n$1.nativeToPseudo(Object.keys(t$1));
		}, this.setProperty(this.OBJECT, "keys", this.createNativeFunction(r$1, !1), t.NONENUMERABLE_DESCRIPTOR), r$1 = function(t$1) {
			return null === t$1 ? n$1.createObjectProto(null) : (void 0 !== t$1 && t$1.isObject || n$1.throwException(n$1.TYPE_ERROR, "Object prototype may only be an Object or null"), n$1.createObjectProto(t$1));
		}, this.setProperty(this.OBJECT, "create", this.createNativeFunction(r$1, !1), t.NONENUMERABLE_DESCRIPTOR), this.polyfills_.push("(function() {", "var create_ = Object.create;", "Object.create = function(proto, props) {", "var obj = create_(proto);", "props && Object.defineProperties(obj, props);", "return obj;", "};", "})();", ""), r$1 = function(t$1, e$2, r$2) {
			return e$2 = String(e$2), t$1 && t$1.isObject || n$1.throwException(n$1.TYPE_ERROR, "Object.defineProperty called on non-object"), r$2 && r$2.isObject || n$1.throwException(n$1.TYPE_ERROR, "Property description must be an object"), !t$1.properties[e$2] && t$1.preventExtensions && n$1.throwException(n$1.TYPE_ERROR, "Can't define property '" + e$2 + "', object is not extensible"), n$1.setProperty(t$1, e$2, ReferenceError, r$2.properties), t$1;
		}, this.setProperty(this.OBJECT, "defineProperty", this.createNativeFunction(r$1, !1), t.NONENUMERABLE_DESCRIPTOR), this.polyfills_.push("(function() {", "var defineProperty_ = Object.defineProperty;", "Object.defineProperty = function(obj, prop, d1) {", "var d2 = {};", "if ('configurable' in d1) d2.configurable = d1.configurable;", "if ('enumerable' in d1) d2.enumerable = d1.enumerable;", "if ('writable' in d1) d2.writable = d1.writable;", "if ('value' in d1) d2.value = d1.value;", "if ('get' in d1) d2.get = d1.get;", "if ('set' in d1) d2.set = d1.set;", "return defineProperty_(obj, prop, d2);", "};", "})();", "Object.defineProperty(Object, 'defineProperties',", "{configurable: true, writable: true, value:", "function(obj, props) {", "var keys = Object.keys(props);", "for (var i = 0; i < keys.length; i++) {", "Object.defineProperty(obj, keys[i], props[keys[i]]);", "}", "return obj;", "}", "});", ""), r$1 = function(t$1, e$2) {
			if (t$1 && t$1.isObject || n$1.throwException(n$1.TYPE_ERROR, "Object.getOwnPropertyDescriptor called on non-object"), (e$2 = String(e$2)) in t$1.properties) {
				var r$2 = Object.getOwnPropertyDescriptor(t$1.properties, e$2), i$2 = t$1.getter[e$2], o$1 = t$1.setter[e$2];
				(i$2 || o$1) && (r$2.get = i$2, r$2.set = o$1, delete r$2.value, delete r$2.writable);
				var s$1 = n$1.nativeToPseudo(r$2);
				return "value" in r$2 && n$1.setProperty(s$1, "value", r$2.value), s$1;
			}
		}, this.setProperty(this.OBJECT, "getOwnPropertyDescriptor", this.createNativeFunction(r$1, !1), t.NONENUMERABLE_DESCRIPTOR), r$1 = function(t$1) {
			return i$1(t$1), n$1.getPrototype(t$1);
		}, this.setProperty(this.OBJECT, "getPrototypeOf", this.createNativeFunction(r$1, !1), t.NONENUMERABLE_DESCRIPTOR), r$1 = function(t$1) {
			return Boolean(t$1) && !t$1.preventExtensions;
		}, this.setProperty(this.OBJECT, "isExtensible", this.createNativeFunction(r$1, !1), t.NONENUMERABLE_DESCRIPTOR), r$1 = function(t$1) {
			return t$1 && t$1.isObject && (t$1.preventExtensions = !0), t$1;
		}, this.setProperty(this.OBJECT, "preventExtensions", this.createNativeFunction(r$1, !1), t.NONENUMERABLE_DESCRIPTOR), this.setNativeFunctionPrototype(this.OBJECT, "toString", Qr.prototype.toString), this.setNativeFunctionPrototype(this.OBJECT, "toLocaleString", Qr.prototype.toString), this.setNativeFunctionPrototype(this.OBJECT, "valueOf", Qr.prototype.valueOf), r$1 = function(t$1) {
			return i$1(this), this.isObject ? String(t$1) in this.properties : this.hasOwnProperty(t$1);
		}, this.setNativeFunctionPrototype(this.OBJECT, "hasOwnProperty", r$1), r$1 = function(t$1) {
			return i$1(this), Object.prototype.propertyIsEnumerable.call(this.properties, t$1);
		}, this.setNativeFunctionPrototype(this.OBJECT, "propertyIsEnumerable", r$1), r$1 = function(t$1) {
			for (;;) {
				if (!(t$1 = n$1.getPrototype(t$1))) return !1;
				if (t$1 === this) return !0;
			}
		}, this.setNativeFunctionPrototype(this.OBJECT, "isPrototypeOf", r$1);
	}, t.prototype.initArray = function(e$1) {
		var r$1, n$1 = this;
		r$1 = function(e$2) {
			if (n$1.calledWithNew()) var r$2 = this;
			else r$2 = n$1.createObjectProto(n$1.ARRAY_PROTO);
			var i$1 = arguments[0];
			if (1 === arguments.length && "number" == typeof i$1) isNaN(t.legalArrayLength(i$1)) && n$1.throwException(n$1.RANGE_ERROR, "Invalid array length"), r$2.properties.length = i$1;
			else {
				for (var o$1 = 0; o$1 < arguments.length; o$1++) r$2.properties[o$1] = arguments[o$1];
				r$2.properties.length = o$1;
			}
			return r$2;
		}, this.ARRAY = this.createNativeFunction(r$1, !0), this.ARRAY_PROTO = this.ARRAY.properties.prototype, this.setProperty(e$1, "Array", this.ARRAY), r$1 = function(t$1) {
			return t$1 && "Array" === t$1.class;
		}, this.setProperty(this.ARRAY, "isArray", this.createNativeFunction(r$1, !1), t.NONENUMERABLE_DESCRIPTOR), r$1 = function() {
			return Array.prototype.pop.call(this.properties);
		}, this.setNativeFunctionPrototype(this.ARRAY, "pop", r$1), r$1 = function(t$1) {
			return Array.prototype.push.apply(this.properties, arguments);
		}, this.setNativeFunctionPrototype(this.ARRAY, "push", r$1), r$1 = function() {
			return Array.prototype.shift.call(this.properties);
		}, this.setNativeFunctionPrototype(this.ARRAY, "shift", r$1), r$1 = function(t$1) {
			return Array.prototype.unshift.apply(this.properties, arguments);
		}, this.setNativeFunctionPrototype(this.ARRAY, "unshift", r$1), r$1 = function() {
			return Array.prototype.reverse.call(this.properties), this;
		}, this.setNativeFunctionPrototype(this.ARRAY, "reverse", r$1), r$1 = function(t$1, e$2) {
			var r$2 = Array.prototype.splice.apply(this.properties, arguments);
			return n$1.unwrap && (r$2 = r$2.map(n$1.unwrap)), n$1.nativeToPseudo(r$2);
		}, this.setNativeFunctionPrototype(this.ARRAY, "splice", r$1), r$1 = function(t$1, e$2) {
			var r$2 = Array.prototype.slice.call(this.properties, t$1, e$2);
			return n$1.unwrap && (r$2 = r$2.map(n$1.unwrap)), n$1.nativeToPseudo(r$2);
		}, this.setNativeFunctionPrototype(this.ARRAY, "slice", r$1), r$1 = function(t$1) {
			return Array.prototype.join.call(this.properties, t$1);
		}, this.setNativeFunctionPrototype(this.ARRAY, "join", r$1), r$1 = function(t$1) {
			for (var e$2 = [], r$2 = 0, i$1 = n$1.getProperty(this, "length"), o$1 = 0; o$1 < i$1; o$1++) {
				if (n$1.hasProperty(this, o$1)) e$2[r$2] = n$1.getProperty(this, o$1);
				r$2++;
			}
			for (o$1 = 0; o$1 < arguments.length; o$1++) {
				var a$1 = arguments[o$1];
				if (n$1.isa(a$1, n$1.ARRAY)) for (var u$1 = n$1.getProperty(a$1, "length"), c$1 = 0; c$1 < u$1; c$1++) n$1.hasProperty(a$1, c$1) && (e$2[r$2] = n$1.getProperty(a$1, c$1)), r$2++;
				else e$2[r$2] = a$1;
			}
			return n$1.unwrap && (e$2 = e$2.map(n$1.unwrap)), n$1.nativeToPseudo(e$2);
		}, this.setNativeFunctionPrototype(this.ARRAY, "concat", r$1), r$1 = function(t$1, e$2) {
			return Array.prototype.indexOf.apply(this.properties, arguments);
		}, this.setNativeFunctionPrototype(this.ARRAY, "indexOf", r$1), r$1 = function(t$1, e$2) {
			return Array.prototype.lastIndexOf.apply(this.properties, arguments);
		}, this.setNativeFunctionPrototype(this.ARRAY, "lastIndexOf", r$1), r$1 = function() {
			return Array.prototype.sort.call(this.properties), this;
		}, this.setNativeFunctionPrototype(this.ARRAY, "sort", r$1), this.polyfills_.push("Object.defineProperty(Array.prototype, 'every',", "{configurable: true, writable: true, value:", "function(callbackfn, thisArg) {", "if (!this || typeof callbackfn !== 'function') throw TypeError();", "var T, k;", "var O = Object(this);", "var len = O.length >>> 0;", "if (arguments.length > 1) T = thisArg;", "k = 0;", "while (k < len) {", "if (k in O && !callbackfn.call(T, O[k], k, O)) return false;", "k++;", "}", "return true;", "}", "});", "Object.defineProperty(Array.prototype, 'filter',", "{configurable: true, writable: true, value:", "function(fun/*, thisArg*/) {", "if (this === void 0 || this === null || typeof fun !== 'function') throw TypeError();", "var t = Object(this);", "var len = t.length >>> 0;", "var res = [];", "var thisArg = arguments.length >= 2 ? arguments[1] : void 0;", "for (var i = 0; i < len; i++) {", "if (i in t) {", "var val = t[i];", "if (fun.call(thisArg, val, i, t)) res.push(val);", "}", "}", "return res;", "}", "});", "Object.defineProperty(Array.prototype, 'forEach',", "{configurable: true, writable: true, value:", "function(callback, thisArg) {", "if (!this || typeof callback !== 'function') throw TypeError();", "var T, k;", "var O = Object(this);", "var len = O.length >>> 0;", "if (arguments.length > 1) T = thisArg;", "k = 0;", "while (k < len) {", "if (k in O) callback.call(T, O[k], k, O);", "k++;", "}", "}", "});", "Object.defineProperty(Array.prototype, 'map',", "{configurable: true, writable: true, value:", "function(callback, thisArg) {", "if (!this || typeof callback !== 'function') new TypeError;", "var T, A, k;", "var O = Object(this);", "var len = O.length >>> 0;", "if (arguments.length > 1) T = thisArg;", "A = new Array(len);", "k = 0;", "while (k < len) {", "if (k in O) A[k] = callback.call(T, O[k], k, O);", "k++;", "}", "return A;", "}", "});", "Object.defineProperty(Array.prototype, 'reduce',", "{configurable: true, writable: true, value:", "function(callback /*, initialValue*/) {", "if (!this || typeof callback !== 'function') throw TypeError();", "var t = Object(this), len = t.length >>> 0, k = 0, value;", "if (arguments.length === 2) {", "value = arguments[1];", "} else {", "while (k < len && !(k in t)) k++;", "if (k >= len) {", "throw TypeError('Reduce of empty array with no initial value');", "}", "value = t[k++];", "}", "for (; k < len; k++) {", "if (k in t) value = callback(value, t[k], k, t);", "}", "return value;", "}", "});", "Object.defineProperty(Array.prototype, 'reduceRight',", "{configurable: true, writable: true, value:", "function(callback /*, initialValue*/) {", "if (null === this || 'undefined' === typeof this || 'function' !== typeof callback) throw TypeError();", "var t = Object(this), len = t.length >>> 0, k = len - 1, value;", "if (arguments.length >= 2) {", "value = arguments[1];", "} else {", "while (k >= 0 && !(k in t)) k--;", "if (k < 0) {", "throw TypeError('Reduce of empty array with no initial value');", "}", "value = t[k--];", "}", "for (; k >= 0; k--) {", "if (k in t) value = callback(value, t[k], k, t);", "}", "return value;", "}", "});", "Object.defineProperty(Array.prototype, 'some',", "{configurable: true, writable: true, value:", "function(fun/*, thisArg*/) {", "if (!this || typeof fun !== 'function') throw TypeError();", "var t = Object(this);", "var len = t.length >>> 0;", "var thisArg = arguments.length >= 2 ? arguments[1] : void 0;", "for (var i = 0; i < len; i++) {", "if (i in t && fun.call(thisArg, t[i], i, t)) {", "return true;", "}", "}", "return false;", "}", "});", "(function() {", "var sort_ = Array.prototype.sort;", "Array.prototype.sort = function(opt_comp) {", "if (typeof opt_comp !== 'function') {", "return sort_.call(this);", "}", "for (var i = 0; i < this.length; i++) {", "var changes = 0;", "for (var j = 0; j < this.length - i - 1; j++) {", "if (opt_comp(this[j], this[j + 1]) > 0) {", "var swap = this[j];", "this[j] = this[j + 1];", "this[j + 1] = swap;", "changes++;", "}", "}", "if (!changes) break;", "}", "return this;", "};", "})();", "Object.defineProperty(Array.prototype, 'toLocaleString',", "{configurable: true, writable: true, value:", "function() {", "var out = [];", "for (var i = 0; i < this.length; i++) {", "out[i] = (this[i] === null || this[i] === undefined) ? '' : this[i].toLocaleString();", "}", "return out.join(',');", "}", "});", "");
	}, t.prototype.initString = function(e$1) {
		var r$1, n$1 = this;
		r$1 = function(t$1) {
			return t$1 = String(t$1), n$1.calledWithNew() ? (this.data = t$1, this) : t$1;
		}, this.STRING = this.createNativeFunction(r$1, !0), this.setProperty(e$1, "String", this.STRING), this.setProperty(this.STRING, "fromCharCode", this.createNativeFunction(String.fromCharCode, !1), t.NONENUMERABLE_DESCRIPTOR);
		for (var i$1 = [
			"trim",
			"toLowerCase",
			"toUpperCase",
			"toLocaleLowerCase",
			"toLocaleUpperCase",
			"charAt",
			"charCodeAt",
			"substring",
			"slice",
			"substr",
			"indexOf",
			"lastIndexOf",
			"concat"
		], o$1 = 0; o$1 < i$1.length; o$1++) this.setNativeFunctionPrototype(this.STRING, i$1[o$1], String.prototype[i$1[o$1]]);
		r$1 = function(t$1, e$2, r$2) {
			return e$2 = e$2 ? n$1.pseudoToNative(e$2) : void 0, r$2 = r$2 ? n$1.pseudoToNative(r$2) : void 0, String(this).localeCompare(t$1, e$2, r$2);
		}, this.setNativeFunctionPrototype(this.STRING, "localeCompare", r$1), r$1 = function(t$1, e$2) {
			n$1.isa(t$1, n$1.REGEXP) && (t$1 = t$1.data);
			var r$2 = String(this).split(t$1, e$2);
			return n$1.nativeToPseudo(r$2);
		}, this.setNativeFunctionPrototype(this.STRING, "split", r$1), r$1 = function(t$1) {
			t$1 = t$1 ? t$1.data : void 0;
			var e$2 = String(this).match(t$1);
			return e$2 ? n$1.nativeToPseudo(e$2) : null;
		}, this.setNativeFunctionPrototype(this.STRING, "match", r$1), r$1 = function(t$1) {
			return n$1.isa(t$1, n$1.REGEXP) && (t$1 = t$1.data), String(this).search(t$1);
		}, this.setNativeFunctionPrototype(this.STRING, "search", r$1), r$1 = function(t$1, e$2) {
			return String(this).replace(t$1.data || t$1, e$2);
		}, this.setNativeFunctionPrototype(this.STRING, "replace", r$1), this.polyfills_.push("(function() {", "var replace_ = String.prototype.replace;", "String.prototype.replace = function(substr, newSubstr) {", "if (typeof newSubstr !== 'function') {", "return replace_.call(this, substr, newSubstr);", "}", "var str = this;", "if (substr instanceof RegExp) {", "var subs = [];", "var m = substr.exec(str);", "while (m) {", "m.push(m.index, str);", "var inject = newSubstr.apply(null, m);", "subs.push([m.index, m[0].length, inject]);", "m = substr.global ? substr.exec(str) : null;", "}", "for (var i = subs.length - 1; i >= 0; i--) {", "str = str.substring(0, subs[i][0]) + subs[i][2] + str.substring(subs[i][0] + subs[i][1]);", "}", "} else {", "var i = str.indexOf(substr);", "if (i !== -1) {", "var inject = newSubstr(str.substr(i, substr.length), i, str);", "str = str.substring(0, i) + inject + str.substring(i + substr.length);", "}", "}", "return str;", "};", "})();", "");
	}, t.prototype.initBoolean = function(t$1) {
		var e$1, r$1 = this;
		e$1 = function(t$2) {
			return t$2 = Boolean(t$2), r$1.calledWithNew() ? (this.data = t$2, this) : t$2;
		}, this.BOOLEAN = this.createNativeFunction(e$1, !0), this.setProperty(t$1, "Boolean", this.BOOLEAN);
	}, t.prototype.initNumber = function(e$1) {
		var r$1, n$1 = this;
		r$1 = function(t$1) {
			return t$1 = Number(t$1), n$1.calledWithNew() ? (this.data = t$1, this) : t$1;
		}, this.NUMBER = this.createNativeFunction(r$1, !0), this.setProperty(e$1, "Number", this.NUMBER);
		for (var i$1 = [
			"MAX_VALUE",
			"MIN_VALUE",
			"NaN",
			"NEGATIVE_INFINITY",
			"POSITIVE_INFINITY"
		], o$1 = 0; o$1 < i$1.length; o$1++) this.setProperty(this.NUMBER, i$1[o$1], Number[i$1[o$1]], t.READONLY_NONENUMERABLE_DESCRIPTOR);
		r$1 = function(t$1) {
			try {
				return Number(this).toExponential(t$1);
			} catch (t$2) {
				n$1.throwException(n$1.ERROR, t$2.message);
			}
		}, this.setNativeFunctionPrototype(this.NUMBER, "toExponential", r$1), r$1 = function(t$1) {
			try {
				return Number(this).toFixed(t$1);
			} catch (t$2) {
				n$1.throwException(n$1.ERROR, t$2.message);
			}
		}, this.setNativeFunctionPrototype(this.NUMBER, "toFixed", r$1), r$1 = function(t$1) {
			try {
				return Number(this).toPrecision(t$1);
			} catch (t$2) {
				n$1.throwException(n$1.ERROR, t$2.message);
			}
		}, this.setNativeFunctionPrototype(this.NUMBER, "toPrecision", r$1), r$1 = function(t$1) {
			try {
				return Number(this).toString(t$1);
			} catch (t$2) {
				n$1.throwException(n$1.ERROR, t$2.message);
			}
		}, this.setNativeFunctionPrototype(this.NUMBER, "toString", r$1), r$1 = function(t$1, e$2) {
			return t$1 = t$1 ? n$1.pseudoToNative(t$1) : void 0, e$2 = e$2 ? n$1.pseudoToNative(e$2) : void 0, Number(this).toLocaleString(t$1, e$2);
		}, this.setNativeFunctionPrototype(this.NUMBER, "toLocaleString", r$1);
	}, t.prototype.initDate = function(e$1) {
		var r$1, n$1 = this;
		r$1 = function(t$1, e$2) {
			if (!n$1.calledWithNew()) return Date();
			var r$2 = [null].concat([].slice.call(arguments));
			return this.data = new (Function.prototype.bind.apply(Date, r$2))(), this;
		}, this.DATE = this.createNativeFunction(r$1, !0), this.setProperty(e$1, "Date", this.DATE), this.setProperty(this.DATE, "now", this.createNativeFunction(Date.now, !1), t.NONENUMERABLE_DESCRIPTOR), this.setProperty(this.DATE, "parse", this.createNativeFunction(Date.parse, !1), t.NONENUMERABLE_DESCRIPTOR), this.setProperty(this.DATE, "UTC", this.createNativeFunction(Date.UTC, !1), t.NONENUMERABLE_DESCRIPTOR);
		for (var i$1 = [
			"getDate",
			"getDay",
			"getFullYear",
			"getHours",
			"getMilliseconds",
			"getMinutes",
			"getMonth",
			"getSeconds",
			"getTime",
			"getTimezoneOffset",
			"getUTCDate",
			"getUTCDay",
			"getUTCFullYear",
			"getUTCHours",
			"getUTCMilliseconds",
			"getUTCMinutes",
			"getUTCMonth",
			"getUTCSeconds",
			"getYear",
			"setDate",
			"setFullYear",
			"setHours",
			"setMilliseconds",
			"setMinutes",
			"setMonth",
			"setSeconds",
			"setTime",
			"setUTCDate",
			"setUTCFullYear",
			"setUTCHours",
			"setUTCMilliseconds",
			"setUTCMinutes",
			"setUTCMonth",
			"setUTCSeconds",
			"setYear",
			"toDateString",
			"toISOString",
			"toJSON",
			"toGMTString",
			"toLocaleDateString",
			"toLocaleString",
			"toLocaleTimeString",
			"toTimeString",
			"toUTCString"
		], o$1 = 0; o$1 < i$1.length; o$1++) r$1 = function(t$1) {
			return function(e$2) {
				for (var r$2 = [], i$2 = 0; i$2 < arguments.length; i$2++) r$2[i$2] = n$1.pseudoToNative(arguments[i$2]);
				return this.data[t$1].apply(this.data, r$2);
			};
		}(i$1[o$1]), this.setNativeFunctionPrototype(this.DATE, i$1[o$1], r$1);
	}, t.prototype.initRegExp = function(e$1) {
		var r$1, n$1 = this;
		r$1 = function(t$1, e$2) {
			if (n$1.calledWithNew()) var r$2 = this;
			else r$2 = n$1.createObjectProto(n$1.REGEXP_PROTO);
			return t$1 = t$1 ? t$1.toString() : "", e$2 = e$2 ? e$2.toString() : "", n$1.populateRegExp(r$2, new RegExp(t$1, e$2)), r$2;
		}, this.REGEXP = this.createNativeFunction(r$1, !0), this.REGEXP_PROTO = this.REGEXP.properties.prototype, this.setProperty(e$1, "RegExp", this.REGEXP), this.setProperty(this.REGEXP.properties.prototype, "global", void 0, t.READONLY_NONENUMERABLE_DESCRIPTOR), this.setProperty(this.REGEXP.properties.prototype, "ignoreCase", void 0, t.READONLY_NONENUMERABLE_DESCRIPTOR), this.setProperty(this.REGEXP.properties.prototype, "multiline", void 0, t.READONLY_NONENUMERABLE_DESCRIPTOR), this.setProperty(this.REGEXP.properties.prototype, "source", "(?:)", t.READONLY_NONENUMERABLE_DESCRIPTOR), r$1 = function(t$1) {
			return this.data.test(t$1);
		}, this.setNativeFunctionPrototype(this.REGEXP, "test", r$1), r$1 = function(t$1) {
			t$1 = t$1.toString(), this.data.lastIndex = Number(n$1.getProperty(this, "lastIndex"));
			var e$2 = this.data.exec(t$1);
			if (n$1.setProperty(this, "lastIndex", this.data.lastIndex), e$2) {
				for (var r$2 = n$1.createObjectProto(n$1.ARRAY_PROTO), i$1 = 0; i$1 < e$2.length; i$1++) n$1.setProperty(r$2, i$1, e$2[i$1]);
				return n$1.setProperty(r$2, "index", e$2.index), n$1.setProperty(r$2, "input", e$2.input), r$2;
			}
			return null;
		}, this.setNativeFunctionPrototype(this.REGEXP, "exec", r$1);
	}, t.prototype.initError = function(e$1) {
		var r$1 = this;
		this.ERROR = this.createNativeFunction((function(e$2) {
			if (r$1.calledWithNew()) var n$2 = this;
			else n$2 = r$1.createObject(r$1.ERROR);
			return e$2 && r$1.setProperty(n$2, "message", String(e$2), t.NONENUMERABLE_DESCRIPTOR), n$2;
		}), !0), this.setProperty(e$1, "Error", this.ERROR), this.setProperty(this.ERROR.properties.prototype, "message", "", t.NONENUMERABLE_DESCRIPTOR), this.setProperty(this.ERROR.properties.prototype, "name", "Error", t.NONENUMERABLE_DESCRIPTOR);
		var n$1 = function(n$2) {
			var i$1 = r$1.createNativeFunction((function(e$2) {
				if (r$1.calledWithNew()) var n$3 = this;
				else n$3 = r$1.createObject(i$1);
				return e$2 && r$1.setProperty(n$3, "message", String(e$2), t.NONENUMERABLE_DESCRIPTOR), n$3;
			}), !0);
			return r$1.setProperty(i$1, "prototype", r$1.createObject(r$1.ERROR)), r$1.setProperty(i$1.properties.prototype, "name", n$2, t.NONENUMERABLE_DESCRIPTOR), r$1.setProperty(e$1, n$2, i$1), i$1;
		};
		this.EVAL_ERROR = n$1("EvalError"), this.RANGE_ERROR = n$1("RangeError"), this.REFERENCE_ERROR = n$1("ReferenceError"), this.SYNTAX_ERROR = n$1("SyntaxError"), this.TYPE_ERROR = n$1("TypeError"), this.URI_ERROR = n$1("URIError");
	}, t.prototype.initMath = function(e$1) {
		var r$1 = this.createObjectProto(this.OBJECT_PROTO);
		this.setProperty(e$1, "Math", r$1);
		for (var n$1 = [
			"E",
			"LN2",
			"LN10",
			"LOG2E",
			"LOG10E",
			"PI",
			"SQRT1_2",
			"SQRT2"
		], i$1 = 0; i$1 < n$1.length; i$1++) this.setProperty(r$1, n$1[i$1], Math[n$1[i$1]], t.READONLY_NONENUMERABLE_DESCRIPTOR);
		var o$1 = [
			"abs",
			"acos",
			"asin",
			"atan",
			"atan2",
			"ceil",
			"cos",
			"exp",
			"floor",
			"log",
			"max",
			"min",
			"pow",
			"random",
			"round",
			"sin",
			"sqrt",
			"tan"
		];
		for (i$1 = 0; i$1 < o$1.length; i$1++) this.setProperty(r$1, o$1[i$1], this.createNativeFunction(Math[o$1[i$1]], !1), t.NONENUMERABLE_DESCRIPTOR);
	}, t.prototype.initJSON = function(t$1) {
		var e$1 = this, r$1 = e$1.createObjectProto(this.OBJECT_PROTO);
		this.setProperty(t$1, "JSON", r$1);
		var n$1 = function(t$2) {
			try {
				var r$2 = JSON.parse(t$2.toString());
			} catch (t$3) {
				e$1.throwException(e$1.SYNTAX_ERROR, t$3.message);
			}
			return e$1.nativeToPseudo(r$2);
		};
		this.setProperty(r$1, "parse", this.createNativeFunction(n$1, !1)), n$1 = function(t$2) {
			var r$2 = e$1.pseudoToNative(t$2);
			try {
				var n$2 = JSON.stringify(r$2);
			} catch (t$3) {
				e$1.throwException(e$1.TYPE_ERROR, t$3.message);
			}
			return n$2;
		}, this.setProperty(r$1, "stringify", this.createNativeFunction(n$1, !1));
	}, t.prototype.isa = function(t$1, e$1) {
		if (null == t$1 || !e$1) return !1;
		var r$1 = e$1.properties.prototype;
		if (t$1 === r$1) return !0;
		for (var n$1 = this.getPrototype(t$1); n$1;) {
			if (n$1 === r$1) return !0;
			n$1 = n$1.proto;
		}
		return !1;
	}, t.legalArrayLength = function(t$1) {
		var e$1 = t$1 >>> 0;
		return e$1 === Number(t$1) ? e$1 : NaN;
	}, t.legalArrayIndex = function(t$1) {
		var e$1 = t$1 >>> 0;
		return String(e$1) === String(t$1) && 4294967295 !== e$1 ? e$1 : NaN;
	}, t.prototype.createObject = function(t$1) {
		return this.createObjectProto(t$1 && t$1.properties.prototype);
	}, t.prototype.createObjectProto = function(t$1) {
		var e$1 = new Qr(t$1);
		return this.isa(e$1, this.FUNCTION) && (this.setProperty(e$1, "prototype", this.createObjectProto(this.OBJECT_PROTO || null)), e$1.class = "Function"), this.isa(e$1, this.ARRAY) && (this.setProperty(e$1, "length", 0, {
			configurable: !1,
			enumerable: !1,
			writable: !0
		}), e$1.class = "Array"), this.isa(e$1, this.ERROR) && (e$1.class = "Error"), e$1;
	}, t.prototype.populateRegExp = function(e$1, r$1) {
		e$1.data = r$1, this.setProperty(e$1, "lastIndex", r$1.lastIndex, t.NONENUMERABLE_DESCRIPTOR), this.setProperty(e$1, "source", r$1.source, t.READONLY_NONENUMERABLE_DESCRIPTOR), this.setProperty(e$1, "global", r$1.global, t.READONLY_NONENUMERABLE_DESCRIPTOR), this.setProperty(e$1, "ignoreCase", r$1.ignoreCase, t.READONLY_NONENUMERABLE_DESCRIPTOR), this.setProperty(e$1, "multiline", r$1.multiline, t.READONLY_NONENUMERABLE_DESCRIPTOR);
	}, t.prototype.createFunction = function(e$1, r$1) {
		var n$1 = this.createObjectProto(this.FUNCTION_PROTO);
		return n$1.parentScope = r$1, n$1.node = e$1, this.setProperty(n$1, "length", n$1.node.params.length, t.READONLY_DESCRIPTOR), n$1;
	}, t.prototype.createNativeFunction = function(e$1, r$1) {
		var n$1 = this.createObjectProto(this.FUNCTION_PROTO);
		return n$1.nativeFunc = e$1, e$1.id = this.functionCounter_++, this.setProperty(n$1, "length", e$1.length, t.READONLY_DESCRIPTOR), r$1 ? this.setProperty(n$1.properties.prototype, "constructor", n$1, t.NONENUMERABLE_DESCRIPTOR) : !1 === r$1 && (n$1.illegalConstructor = !0, this.setProperty(n$1, "prototype", void 0)), n$1;
	}, t.prototype.createAsyncFunction = function(e$1) {
		var r$1 = this.createObjectProto(this.FUNCTION_PROTO);
		return r$1.asyncFunc = e$1, e$1.id = this.functionCounter_++, this.setProperty(r$1, "length", e$1.length, t.READONLY_DESCRIPTOR), r$1;
	}, t.prototype.nativeToPseudo = function(t$1) {
		if ("boolean" == typeof t$1 || "number" == typeof t$1 || "string" == typeof t$1 || null == t$1) return t$1;
		if (t$1 instanceof RegExp) {
			var e$1 = this.createObjectProto(this.REGEXP_PROTO);
			return this.populateRegExp(e$1, t$1), e$1;
		}
		if (t$1 instanceof Function) {
			var r$1 = this;
			return this.createNativeFunction((function() {
				return r$1.nativeToPseudo(t$1.apply(r$1, Array.prototype.slice.call(arguments).map((function(t$2) {
					return r$1.pseudoToNative(t$2);
				}))));
			}), void 0);
		}
		var n$1;
		if (Array.isArray(t$1)) {
			n$1 = this.createObjectProto(this.ARRAY_PROTO);
			for (var i$1 = 0; i$1 < t$1.length; i$1++) i$1 in t$1 && this.setProperty(n$1, i$1, this.wrap ? this.wrap(t$1[i$1]) : this.nativeToPseudo(t$1[i$1]));
		} else for (var o$1 in n$1 = this.createObjectProto(this.OBJECT_PROTO), t$1) this.setProperty(n$1, o$1, this.wrap ? this.wrap(t$1[i$1]) : this.nativeToPseudo(t$1[i$1]));
		return n$1;
	}, t.prototype.pseudoToNative = function(t$1, e$1) {
		if ("boolean" == typeof t$1 || "number" == typeof t$1 || "string" == typeof t$1 || null == t$1) return t$1;
		if (this.isa(t$1, this.REGEXP)) return t$1.data;
		var r$1, n$1 = e$1 || {
			pseudo: [],
			native: []
		};
		if (-1 !== (o$1 = n$1.pseudo.indexOf(t$1))) return n$1.native[o$1];
		if (n$1.pseudo.push(t$1), this.isa(t$1, this.ARRAY)) {
			r$1 = [], n$1.native.push(r$1);
			for (var i$1 = this.getProperty(t$1, "length"), o$1 = 0; o$1 < i$1; o$1++) this.hasProperty(t$1, o$1) && (r$1[o$1] = this.unwrap ? this.unwrap(this.getProperty(t$1, o$1), n$1) : this.pseudoToNative(this.getProperty(t$1, o$1), n$1));
		} else {
			if (t$1._native) return t$1._native;
			r$1 = {}, n$1.native.push(r$1);
			var s$1 = void 0;
			for (var a$1 in t$1.properties) s$1 = t$1.properties[a$1], r$1[a$1] = this.unwrap ? this.unwrap(s$1, n$1) : this.pseudoToNative(s$1, n$1);
		}
		return n$1.pseudo.pop(), n$1.native.pop(), r$1;
	}, t.prototype.getPrototype = function(t$1) {
		switch (typeof t$1) {
			case "number": return this.NUMBER.properties.prototype;
			case "boolean": return this.BOOLEAN.properties.prototype;
			case "string": return this.STRING.properties.prototype;
		}
		return t$1 ? t$1.proto : null;
	}, t.prototype.getProperty = function(e$1, r$1) {
		if (r$1 = String(r$1), e$1 ?? this.throwException(this.TYPE_ERROR, "Cannot read property '" + r$1 + "' of " + e$1), "length" === r$1) {
			if (this.isa(e$1, this.STRING)) return String(e$1).length;
		} else if (r$1.charCodeAt(0) < 64 && this.isa(e$1, this.STRING)) {
			var n$1 = t.legalArrayIndex(r$1);
			if (!isNaN(n$1) && n$1 < String(e$1).length) return String(e$1)[n$1];
		}
		do {
			var i$1 = e$1;
			if (i$1.properties && r$1 in i$1.properties) {
				var o$1 = i$1.getter[r$1];
				return o$1 ? (o$1.isGetter = !0, o$1) : i$1.properties[r$1];
			}
			if (void 0 !== i$1._native && "_" !== r$1.charAt(0) && "function" != typeof i$1._native[r$1]) return this.wrap ? this.wrap(i$1._native[r$1]) : i$1._native[r$1];
		} while (e$1 = this.getPrototype(e$1));
	}, t.prototype.hasProperty = function(e$1, r$1) {
		if (!e$1.isObject) throw TypeError("Primitive data type has no properties");
		if ("length" === (r$1 = String(r$1)) && this.isa(e$1, this.STRING)) return !0;
		if (this.isa(e$1, this.STRING)) {
			var n$1 = t.legalArrayIndex(r$1);
			if (!isNaN(n$1) && n$1 < String(e$1).length) return !0;
		}
		do {
			var i$1 = e$1;
			if (i$1.properties && r$1 in i$1.properties) return !0;
			if (void 0 !== i$1._native && "_" != r$1.charAt(0)) {
				var o$1 = typeof i$1._native[r$1];
				return "function" !== o$1 && ("undefined" !== o$1 || en(i$1._native.constructor, r$1));
			}
		} while (e$1 = this.getPrototype(e$1));
		return !1;
	}, t.prototype.setProperty = function(e$1, r$1, n$1, i$1) {
		r$1 = String(r$1), e$1 ?? this.throwException(this.TYPE_ERROR, "Cannot set property '" + r$1 + "' of " + e$1), i$1 && ("get" in i$1 || "set" in i$1) && ("value" in i$1 || "writable" in i$1) && this.throwException(this.TYPE_ERROR, "Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");
		var o$1 = !this.stateStack || this.getScope().strict;
		if (e$1.isObject) {
			if (this.isa(e$1, this.STRING)) {
				var s$1 = t.legalArrayIndex(r$1);
				if ("length" === r$1 || !isNaN(s$1) && s$1 < String(e$1).length) return void (o$1 && this.throwException(this.TYPE_ERROR, "Cannot assign to read only property '" + r$1 + "' of String '" + e$1.data + "'"));
			}
			if ("Array" === e$1.class) {
				var a$1 = e$1.properties.length, u$1 = void 0;
				if ("length" === r$1) {
					if (n$1 = t.legalArrayLength(n$1), isNaN(n$1) && this.throwException(this.RANGE_ERROR, "Invalid array length"), n$1 < a$1) for (u$1 in e$1.properties) u$1 = t.legalArrayIndex(u$1), !isNaN(u$1) && n$1 <= u$1 && delete e$1.properties[u$1];
				} else isNaN(u$1 = t.legalArrayIndex(r$1)) || (e$1.properties.length = Math.max(a$1, u$1 + 1));
			}
			if (!e$1.preventExtensions || r$1 in e$1.properties) if (i$1) {
				"get" in i$1 && (i$1.get ? e$1.getter[r$1] = i$1.get : delete e$1.getter[r$1]), "set" in i$1 && (i$1.set ? e$1.setter[r$1] = i$1.set : delete e$1.setter[r$1]);
				var c$1 = {};
				"configurable" in i$1 && (c$1.configurable = i$1.configurable), "enumerable" in i$1 && (c$1.enumerable = i$1.enumerable), "writable" in i$1 && (c$1.writable = i$1.writable, delete e$1.getter[r$1], delete e$1.setter[r$1]), "value" in i$1 ? (c$1.value = i$1.value, delete e$1.getter[r$1], delete e$1.setter[r$1]) : n$1 !== ReferenceError && (c$1.value = n$1, delete e$1.getter[r$1], delete e$1.setter[r$1]);
				try {
					Object.defineProperty(e$1.properties, r$1, c$1);
				} catch (t$1) {
					this.throwException(this.TYPE_ERROR, "Cannot redefine property: " + r$1);
				}
			} else {
				if (n$1 === ReferenceError) throw ReferenceError("Value not specified.");
				if (void 0 !== e$1._native && "_" != r$1.charAt(0)) {
					var l$1 = typeof e$1._native[r$1];
					if ("function" !== l$1 && ("undefined" !== l$1 || en(e$1._native.constructor, r$1))) {
						var p$1 = this.unwrap ? this.unwrap(n$1) : n$1;
						e$1._native[r$1] = p$1;
						return;
					}
				}
				for (var h$1 = e$1; !(r$1 in h$1.properties);) if (!(h$1 = this.getPrototype(h$1))) {
					h$1 = e$1;
					break;
				}
				if (h$1.setter && h$1.setter[r$1]) return h$1.setter[r$1];
				if (h$1.getter && h$1.getter[r$1]) o$1 && this.throwException(this.TYPE_ERROR, "Cannot set property '" + r$1 + "' of object '" + e$1 + "' which only has a getter");
				else try {
					e$1.properties[r$1] = n$1;
				} catch (t$1) {
					o$1 && this.throwException(this.TYPE_ERROR, "Cannot assign to read only property '" + r$1 + "' of object '" + e$1 + "'");
				}
			}
			else o$1 && this.throwException(this.TYPE_ERROR, "Can't add property '" + r$1 + "', object is not extensible");
		} else o$1 && this.throwException(this.TYPE_ERROR, "Can't create property '" + r$1 + "' on '" + e$1 + "'");
	}, t.prototype.setNativeFunctionPrototype = function(e$1, r$1, n$1) {
		this.setProperty(e$1.properties.prototype, r$1, this.createNativeFunction(n$1, !1), t.NONENUMERABLE_DESCRIPTOR);
	}, t.prototype.getScope = function() {
		var t$1 = this.stateStack[this.stateStack.length - 1].scope;
		if (!t$1) throw Error("No scope found.");
		return t$1;
	}, t.prototype.createScope = function(t$1, e$1) {
		var r$1 = this.createObjectProto(null);
		if (r$1.parentScope = e$1, e$1 || this.initGlobalScope(r$1), this.populateScope_(t$1, r$1), r$1.strict = !1, e$1 && e$1.strict) r$1.strict = !0;
		else {
			var n$1 = t$1.body && t$1.body[0];
			n$1 && n$1.expression && "Literal" === n$1.expression.type && "use strict" === n$1.expression.value && (r$1.strict = !0);
		}
		return r$1;
	}, t.prototype.createSpecialScope = function(t$1, e$1) {
		if (!t$1) throw Error("parentScope required");
		var r$1 = e$1 || this.createObjectProto(null);
		return r$1.parentScope = t$1, r$1.strict = t$1.strict, r$1;
	}, t.prototype.getValueFromScope = function(t$1) {
		for (var e$1 = this.getScope(); e$1 && e$1 !== this.global;) {
			if (t$1 in e$1.properties) return e$1.properties[t$1];
			e$1 = e$1.parentScope;
		}
		if (e$1 === this.global && this.hasProperty(e$1, t$1)) return this.getProperty(e$1, t$1);
		var r$1 = this.stateStack[this.stateStack.length - 1].node;
		"UnaryExpression" === r$1.type && "typeof" === r$1.operator || this.throwException(this.REFERENCE_ERROR, t$1 + " is not defined");
	}, t.prototype.setValueToScope = function(t$1, e$1) {
		for (var r$1 = this.getScope(), n$1 = r$1.strict; r$1 && r$1 !== this.global;) {
			if (t$1 in r$1.properties) return void (r$1.properties[t$1] = e$1);
			r$1 = r$1.parentScope;
		}
		if (r$1 === this.global && (!n$1 || this.hasProperty(r$1, t$1))) return this.setProperty(r$1, t$1, e$1);
		this.throwException(this.REFERENCE_ERROR, t$1 + " is not defined");
	}, t.prototype.populateScope_ = function(e$1, r$1) {
		if ("VariableDeclaration" === e$1.type) for (var n$1 = 0; n$1 < e$1.declarations.length; n$1++) this.setProperty(r$1, e$1.declarations[n$1].id.name, void 0, t.VARIABLE_DESCRIPTOR);
		else {
			if ("FunctionDeclaration" === e$1.type) return void this.setProperty(r$1, e$1.id.name, this.createFunction(e$1, r$1), t.VARIABLE_DESCRIPTOR);
			if ("FunctionExpression" === e$1.type) return;
			if ("ExpressionStatement" === e$1.type) return;
		}
		var i$1 = e$1.constructor;
		for (var o$1 in e$1) {
			var s$1 = e$1[o$1];
			if (s$1 && "object" == typeof s$1) if (Array.isArray(s$1)) for (n$1 = 0; n$1 < s$1.length; n$1++) s$1[n$1] && s$1[n$1].constructor === i$1 && this.populateScope_(s$1[n$1], r$1);
			else s$1.constructor === i$1 && this.populateScope_(s$1, r$1);
		}
	}, t.prototype.stripLocations_ = function(t$1, e$1, r$1) {
		for (var n$1 in e$1 ? t$1.start = e$1 : delete t$1.start, r$1 ? t$1.end = r$1 : delete t$1.end, t$1) if (t$1.hasOwnProperty(n$1)) {
			var i$1 = t$1[n$1];
			i$1 && "object" == typeof i$1 && this.stripLocations_(i$1, e$1, r$1);
		}
	}, t.prototype.calledWithNew = function() {
		return this.stateStack[this.stateStack.length - 1].isConstructor;
	}, t.prototype.getValue = function(e$1) {
		return e$1[0] === t.SCOPE_REFERENCE ? this.getValueFromScope(e$1[1]) : this.getProperty(e$1[0], e$1[1]);
	}, t.prototype.setValue = function(e$1, r$1) {
		return e$1[0] === t.SCOPE_REFERENCE ? this.setValueToScope(e$1[1], r$1) : this.setProperty(e$1[0], e$1[1], r$1);
	}, t.prototype.throwException = function(e$1, r$1) {
		if (void 0 === r$1) var n$1 = e$1;
		else n$1 = this.createObject(e$1), this.setProperty(n$1, "message", r$1, t.NONENUMERABLE_DESCRIPTOR);
		throw this.executeException(n$1), t.STEP_ERROR;
	}, t.prototype.executeException = function(t$1) {
		var e$1, r$1 = this.stateStack.slice();
		do {
			this.stateStack.pop();
			var n$1 = this.stateStack[this.stateStack.length - 1];
			if ("TryStatement" === n$1.node.type) return void (n$1.throwValue = t$1);
		} while (n$1 && "Program" !== n$1.node.type);
		if (this.isa(t$1, this.ERROR)) {
			var i$1 = {
				EvalError,
				RangeError,
				ReferenceError,
				SyntaxError,
				TypeError,
				URIError
			}, o$1 = this.getProperty(t$1, "name").toString(), s$1 = this.getProperty(t$1, "message").valueOf();
			e$1 = (i$1[o$1] || Error)(s$1);
		} else e$1 = t$1.toString();
		throw this.stateStack = r$1, e$1;
	}, t.prototype.createGetter_ = function(t$1, e$1) {
		var r$1 = Array.isArray(e$1) ? e$1[0] : e$1, n$1 = new this.nodeConstructor();
		n$1.type = "CallExpression";
		var i$1 = new tn(n$1, this.stateStack[this.stateStack.length - 1].scope);
		return i$1.doneCallee_ = !0, i$1.funcThis_ = r$1, i$1.func_ = t$1, i$1.doneArgs_ = !0, i$1.arguments_ = [], i$1;
	}, t.prototype.createSetter_ = function(t$1, e$1, r$1) {
		var n$1 = Array.isArray(e$1) ? e$1[0] : this.global, i$1 = new this.nodeConstructor();
		i$1.type = "CallExpression";
		var o$1 = new tn(i$1, this.stateStack[this.stateStack.length - 1].scope);
		return o$1.doneCallee_ = !0, o$1.funcThis_ = n$1, o$1.func_ = t$1, o$1.doneArgs_ = !0, o$1.arguments_ = [r$1], o$1;
	}, t.prototype.stepArrayExpression = function(t$1, e$1, r$1) {
		var n$1 = r$1.elements, i$1 = e$1.n_ || 0;
		for (e$1.array_ ? (this.setProperty(e$1.array_, i$1, e$1.value), i$1++) : (e$1.array_ = this.createObjectProto(this.ARRAY_PROTO), e$1.array_.properties.length = n$1.length); i$1 < n$1.length;) {
			if (n$1[i$1]) return e$1.n_ = i$1, new tn(n$1[i$1], e$1.scope);
			i$1++;
		}
		t$1.pop(), t$1[t$1.length - 1].value = e$1.array_;
	}, t.prototype.stepAssignmentExpression = function(t$1, e$1, r$1) {
		if (!e$1.doneLeft_) {
			e$1.doneLeft_ = !0;
			var n$1 = new tn(r$1.left, e$1.scope);
			return n$1.components = !0, n$1;
		}
		if (!e$1.doneRight_) {
			if (e$1.leftReference_ || (e$1.leftReference_ = e$1.value), e$1.doneGetter_ && (e$1.leftValue_ = e$1.value), !e$1.doneGetter_ && "=" !== r$1.operator) {
				var i$1 = this.getValue(e$1.leftReference_);
				if (e$1.leftValue_ = i$1, i$1 && "object" == typeof i$1 && i$1.isGetter) {
					i$1.isGetter = !1, e$1.doneGetter_ = !0;
					var o$1 = i$1;
					return this.createGetter_(o$1, e$1.leftReference_);
				}
			}
			return e$1.doneRight_ = !0, new tn(r$1.right, e$1.scope);
		}
		if (e$1.doneSetter_) return t$1.pop(), void (t$1[t$1.length - 1].value = e$1.doneSetter_);
		var s$1 = e$1.leftValue_, a$1 = e$1.value;
		switch (r$1.operator) {
			case "=":
				s$1 = a$1;
				break;
			case "+=":
				s$1 += a$1;
				break;
			case "-=":
				s$1 -= a$1;
				break;
			case "*=":
				s$1 *= a$1;
				break;
			case "/=":
				s$1 /= a$1;
				break;
			case "%=":
				s$1 %= a$1;
				break;
			case "<<=":
				s$1 <<= a$1;
				break;
			case ">>=":
				s$1 >>= a$1;
				break;
			case ">>>=":
				s$1 >>>= a$1;
				break;
			case "&=":
				s$1 &= a$1;
				break;
			case "^=":
				s$1 ^= a$1;
				break;
			case "|=":
				s$1 |= a$1;
				break;
			default: throw SyntaxError("Unknown assignment expression: " + r$1.operator);
		}
		var u$1 = this.setValue(e$1.leftReference_, s$1);
		if (u$1) return e$1.doneSetter_ = s$1, this.createSetter_(u$1, e$1.leftReference_, s$1);
		t$1.pop(), t$1[t$1.length - 1].value = s$1;
	}, t.prototype.stepBinaryExpression = function(t$1, e$1, r$1) {
		if (!e$1.doneLeft_) return e$1.doneLeft_ = !0, new tn(r$1.left, e$1.scope);
		if (!e$1.doneRight_) return e$1.doneRight_ = !0, e$1.leftValue_ = e$1.value, new tn(r$1.right, e$1.scope);
		t$1.pop();
		var n$1, i$1 = e$1.leftValue_, o$1 = e$1.value;
		switch (r$1.operator) {
			case "==":
				n$1 = i$1 == o$1;
				break;
			case "!=":
				n$1 = i$1 != o$1;
				break;
			case "===":
				n$1 = i$1 === o$1;
				break;
			case "!==":
				n$1 = i$1 !== o$1;
				break;
			case ">":
				n$1 = i$1 > o$1;
				break;
			case ">=":
				n$1 = i$1 >= o$1;
				break;
			case "<":
				n$1 = i$1 < o$1;
				break;
			case "<=":
				n$1 = i$1 <= o$1;
				break;
			case "+":
				n$1 = i$1 + o$1;
				break;
			case "-":
				n$1 = i$1 - o$1;
				break;
			case "*":
				n$1 = i$1 * o$1;
				break;
			case "/":
				n$1 = i$1 / o$1;
				break;
			case "%":
				n$1 = i$1 % o$1;
				break;
			case "&":
				n$1 = i$1 & o$1;
				break;
			case "|":
				n$1 = i$1 | o$1;
				break;
			case "^":
				n$1 = i$1 ^ o$1;
				break;
			case "<<":
				n$1 = i$1 << o$1;
				break;
			case ">>":
				n$1 = i$1 >> o$1;
				break;
			case ">>>":
				n$1 = i$1 >>> o$1;
				break;
			case "in":
				o$1 && o$1.isObject || this.throwException(this.TYPE_ERROR, "'in' expects an object, not '" + o$1 + "'"), n$1 = this.hasProperty(o$1, i$1);
				break;
			case "instanceof":
				this.isa(o$1, this.FUNCTION) || this.throwException(this.TYPE_ERROR, "Right-hand side of instanceof is not an object"), n$1 = !!i$1.isObject && this.isa(i$1, o$1);
				break;
			default: throw SyntaxError("Unknown binary operator: " + r$1.operator);
		}
		t$1[t$1.length - 1].value = n$1;
	}, t.prototype.stepBlockStatement = function(t$1, e$1, r$1) {
		var n$1 = e$1.n_ || 0, i$1 = r$1.body[n$1];
		if (i$1) return e$1.n_ = n$1 + 1, new tn(i$1, e$1.scope);
		t$1.pop();
	}, t.prototype.stepBreakStatement = function(t$1, e$1, r$1) {
		t$1.pop();
		var n$1 = null;
		for (r$1.label && (n$1 = r$1.label.name); e$1 && "CallExpression" !== e$1.node.type && "NewExpression" !== e$1.node.type;) {
			if (n$1) {
				if (e$1.labels && -1 !== e$1.labels.indexOf(n$1)) return;
			} else if (e$1.isLoop || e$1.isSwitch) return;
			e$1 = t$1.pop();
		}
		throw SyntaxError("Illegal break statement");
	}, t.prototype.stepCallExpression = function(e$1, r$1, n$1) {
		if (!r$1.doneCallee_) {
			r$1.doneCallee_ = 1;
			var i$1 = new tn(n$1.callee, r$1.scope);
			return i$1.components = !0, i$1;
		}
		if (1 === r$1.doneCallee_) {
			r$1.doneCallee_ = 2;
			var o$1 = r$1.value;
			if (Array.isArray(o$1)) {
				if (r$1.func_ = this.getValue(o$1), o$1[0] !== t.SCOPE_REFERENCE && (r$1.funcThis_ = o$1[0]), (o$1 = r$1.func_) && "object" == typeof o$1 && o$1.isGetter) return o$1.isGetter = !1, r$1.doneCallee_ = 1, this.createGetter_(o$1, r$1.value);
			} else r$1.func_ = o$1;
			r$1.arguments_ = [], r$1.n_ = 0;
		}
		if (o$1 = r$1.func_, !r$1.doneArgs_) {
			if (0 !== r$1.n_ && r$1.arguments_.push(r$1.value), n$1.arguments[r$1.n_]) return new tn(n$1.arguments[r$1.n_++], r$1.scope);
			"NewExpression" === n$1.type ? (o$1.illegalConstructor && this.throwException(this.TYPE_ERROR, o$1 + " is not a constructor"), r$1.funcThis_ = this.createObject(o$1), r$1.isConstructor = !0) : void 0 === r$1.funcThis_ && (r$1.funcThis_ = r$1.scope.strict ? void 0 : this.global), r$1.doneArgs_ = !0;
		}
		if (r$1.doneExec_) e$1.pop(), r$1.isConstructor && "object" != typeof r$1.value ? e$1[e$1.length - 1].value = r$1.funcThis_ : e$1[e$1.length - 1].value = r$1.value;
		else {
			r$1.doneExec_ = !0, o$1 && o$1.isObject || (console.log("non-function called", o$1, r$1), this.throwException(this.TYPE_ERROR, o$1 + " is not a function"));
			var s$1 = o$1.node;
			if (s$1) {
				for (var a$1 = this.createScope(s$1.body, o$1.parentScope), u$1 = 0; u$1 < s$1.params.length; u$1++) {
					var c$1 = s$1.params[u$1].name, l$1 = r$1.arguments_.length > u$1 ? r$1.arguments_[u$1] : void 0;
					this.setProperty(a$1, c$1, l$1);
				}
				var p$1 = this.createObjectProto(this.ARRAY_PROTO);
				for (u$1 = 0; u$1 < r$1.arguments_.length; u$1++) this.setProperty(p$1, u$1, r$1.arguments_[u$1]);
				this.setProperty(a$1, "arguments", p$1);
				var h$1 = s$1.id && s$1.id.name;
				return h$1 && this.setProperty(a$1, h$1, o$1), this.setProperty(a$1, "this", r$1.funcThis_, t.READONLY_DESCRIPTOR), r$1.value = void 0, new tn(s$1.body, a$1);
			}
			if (o$1.eval) {
				var d$1 = r$1.arguments_[0];
				if ("string" == typeof d$1) {
					try {
						var f$1 = Dt(d$1.toString(), t.PARSE_OPTIONS);
					} catch (t$1) {
						this.throwException(this.SYNTAX_ERROR, "Invalid code: " + t$1.message);
					}
					var y$1 = new this.nodeConstructor();
					return y$1.type = "EvalProgram_", y$1.body = f$1.body, this.stripLocations_(y$1, n$1.start, n$1.end), (a$1 = r$1.scope).strict ? a$1 = this.createScope(f$1, a$1) : this.populateScope_(f$1, a$1), this.value = void 0, new tn(y$1, a$1);
				}
				r$1.value = d$1;
			} else if (o$1.nativeFunc) void 0 !== r$1.funcThis_ && void 0 !== r$1.funcThis_._native ? r$1.value = o$1.nativeFunc.call(r$1.funcThis_, r$1.arguments_) : r$1.value = o$1.nativeFunc.apply(r$1.funcThis_, r$1.arguments_);
			else {
				if (o$1.asyncFunc) {
					var g$1 = this, v$1 = r$1.arguments_.concat((function(t$1) {
						r$1.value = t$1, g$1.paused_ = !1;
					}));
					this.paused_ = !0, o$1.asyncFunc.apply(r$1.funcThis_, v$1);
					return;
				}
				this.throwException(this.TYPE_ERROR, o$1.class + " is not a function");
			}
		}
	}, t.prototype.stepCatchClause = function(t$1, e$1, r$1) {
		if (!e$1.done_) {
			e$1.done_ = !0;
			var n$1 = this.createSpecialScope(e$1.scope);
			return this.setProperty(n$1, r$1.param.name, e$1.throwValue), new tn(r$1.body, n$1);
		}
		t$1.pop();
	}, t.prototype.stepConditionalExpression = function(t$1, e$1, r$1) {
		var n$1 = e$1.mode_ || 0;
		if (0 === n$1) return e$1.mode_ = 1, new tn(r$1.test, e$1.scope);
		if (1 === n$1) {
			e$1.mode_ = 2;
			var i$1 = Boolean(e$1.value);
			if (i$1 && r$1.consequent) return new tn(r$1.consequent, e$1.scope);
			if (!i$1 && r$1.alternate) return new tn(r$1.alternate, e$1.scope);
			this.value = void 0;
		}
		t$1.pop(), "ConditionalExpression" === r$1.type && (t$1[t$1.length - 1].value = e$1.value);
	}, t.prototype.stepContinueStatement = function(t$1, e$1, r$1) {
		t$1.pop();
		var n$1 = null;
		for (r$1.label && (n$1 = r$1.label.name), e$1 = t$1[t$1.length - 1]; e$1 && "CallExpression" !== e$1.node.type && "NewExpression" !== e$1.node.type;) {
			if (e$1.isLoop && (!n$1 || e$1.labels && -1 !== e$1.labels.indexOf(n$1))) return;
			t$1.pop(), e$1 = t$1[t$1.length - 1];
		}
		throw SyntaxError("Illegal continue statement");
	}, t.prototype.stepDebuggerStatement = function(t$1, e$1, r$1) {
		t$1.pop();
	}, t.prototype.stepDoWhileStatement = function(t$1, e$1, r$1) {
		if ("DoWhileStatement" === r$1.type && void 0 === e$1.test_ && (e$1.value = !0, e$1.test_ = !0), !e$1.test_) return e$1.test_ = !0, new tn(r$1.test, e$1.scope);
		if (e$1.value) {
			if (r$1.body) return e$1.test_ = !1, e$1.isLoop = !0, new tn(r$1.body, e$1.scope);
		} else t$1.pop();
	}, t.prototype.stepEmptyStatement = function(t$1, e$1, r$1) {
		t$1.pop();
	}, t.prototype.stepEvalProgram_ = function(t$1, e$1, r$1) {
		var n$1 = e$1.n_ || 0, i$1 = r$1.body[n$1];
		if (i$1) return e$1.n_ = n$1 + 1, new tn(i$1, e$1.scope);
		t$1.pop(), t$1[t$1.length - 1].value = this.value;
	}, t.prototype.stepExpressionStatement = function(t$1, e$1, r$1) {
		if (!e$1.done_) return e$1.done_ = !0, new tn(r$1.expression, e$1.scope);
		t$1.pop(), this.value = e$1.value;
	}, t.prototype.stepForInStatement = function(e$1, r$1, n$1) {
		if (!r$1.doneInit_ && (r$1.doneInit_ = !0, n$1.left.declarations && n$1.left.declarations[0].init)) return r$1.scope.strict && this.throwException(this.SYNTAX_ERROR, "for-in loop variable declaration may not have an initializer."), new tn(n$1.left, r$1.scope);
		if (!r$1.doneObject_) return r$1.doneObject_ = !0, r$1.variable_ || (r$1.variable_ = r$1.value), new tn(n$1.right, r$1.scope);
		if (r$1.isLoop || (r$1.isLoop = !0, r$1.object_ = r$1.value, r$1.visited_ = Object.create(null)), void 0 === r$1.name_) {
			t: do {
				if (r$1.object_ && r$1.object_.isObject) {
					r$1.props_ || (r$1.props_ = Object.getOwnPropertyNames(r$1.object_.properties));
					do
						var i$1 = r$1.props_.shift();
					while (i$1 && (r$1.visited_[i$1] || !Object.prototype.hasOwnProperty.call(r$1.object_.properties, i$1)));
					if (i$1 && (r$1.visited_[i$1] = !0, Object.prototype.propertyIsEnumerable.call(r$1.object_.properties, i$1))) {
						r$1.name_ = i$1;
						break t;
					}
				} else if (null !== r$1.object_) {
					r$1.props_ || (r$1.props_ = Object.getOwnPropertyNames(r$1.object_));
					do
						i$1 = r$1.props_.shift();
					while (i$1 && r$1.visited_[i$1]);
					if (i$1) {
						r$1.visited_[i$1] = !0, r$1.name_ = i$1;
						break t;
					}
				}
				r$1.object_ = this.getPrototype(r$1.object_), r$1.props_ = null;
			} while (null !== r$1.object_);
			if (null === r$1.object_) return void e$1.pop();
		}
		if (!r$1.doneVariable_) {
			r$1.doneVariable_ = !0;
			var o$1 = n$1.left;
			if ("VariableDeclaration" !== o$1.type) {
				r$1.variable_ = null;
				var s$1 = new tn(o$1, r$1.scope);
				return s$1.components = !0, s$1;
			}
			r$1.variable_ = [t.SCOPE_REFERENCE, o$1.declarations[0].id.name];
		}
		if (r$1.variable_ || (r$1.variable_ = r$1.value), !r$1.doneSetter_) {
			r$1.doneSetter_ = !0;
			var a$1 = r$1.name_, u$1 = this.setValue(r$1.variable_, a$1);
			if (u$1) return this.createSetter_(u$1, r$1.variable_, a$1);
		}
		return r$1.name_ = void 0, r$1.doneVariable_ = !1, r$1.doneSetter_ = !1, n$1.body ? new tn(n$1.body, r$1.scope) : void 0;
	}, t.prototype.stepForStatement = function(t$1, e$1, r$1) {
		var n$1 = e$1.mode_ || 0;
		if (0 === n$1) {
			if (e$1.mode_ = 1, r$1.init) return new tn(r$1.init, e$1.scope);
		} else if (1 === n$1) {
			if (e$1.mode_ = 2, r$1.test) return new tn(r$1.test, e$1.scope);
		} else if (2 === n$1) {
			if (e$1.mode_ = 3, !r$1.test || e$1.value) return e$1.isLoop = !0, new tn(r$1.body, e$1.scope);
			t$1.pop();
		} else if (3 === n$1 && (e$1.mode_ = 1, r$1.update)) return new tn(r$1.update, e$1.scope);
	}, t.prototype.stepFunctionDeclaration = function(t$1, e$1, r$1) {
		t$1.pop();
	}, t.prototype.stepFunctionExpression = function(t$1, e$1, r$1) {
		t$1.pop(), t$1[t$1.length - 1].value = this.createFunction(r$1, e$1.scope);
	}, t.prototype.stepIdentifier = function(e$1, r$1, n$1) {
		if (e$1.pop(), r$1.components) e$1[e$1.length - 1].value = [t.SCOPE_REFERENCE, n$1.name];
		else {
			var i$1 = this.getValueFromScope(n$1.name);
			if (i$1 && "object" == typeof i$1 && i$1.isGetter) {
				i$1.isGetter = !1;
				for (var o$1 = r$1.scope; !this.hasProperty(o$1, n$1.name);) o$1 = o$1.parentScope;
				var s$1 = i$1;
				return this.createGetter_(s$1, this.global);
			}
			e$1[e$1.length - 1].value = i$1;
		}
	}, t.prototype.stepIfStatement = function(t$1, e$1, r$1) {
		return this.stepConditionalExpression(t$1, e$1, r$1);
	}, t.prototype.stepLabeledStatement = function(t$1, e$1, r$1) {
		t$1.pop();
		var n$1 = e$1.labels || [];
		n$1.push(r$1.label.name);
		var i$1 = new tn(r$1.body, e$1.scope);
		return i$1.labels = n$1, i$1;
	}, t.prototype.stepLiteral = function(t$1, e$1, r$1) {
		t$1.pop();
		var n$1 = r$1.value;
		if (n$1 instanceof RegExp) {
			var i$1 = this.createObjectProto(this.REGEXP_PROTO);
			this.populateRegExp(i$1, n$1), n$1 = i$1;
		}
		t$1[t$1.length - 1].value = n$1;
	}, t.prototype.stepLogicalExpression = function(t$1, e$1, r$1) {
		if ("&&" !== r$1.operator && "||" !== r$1.operator) throw SyntaxError("Unknown logical operator: " + r$1.operator);
		if (!e$1.doneLeft_) return e$1.doneLeft_ = !0, new tn(r$1.left, e$1.scope);
		if (e$1.doneRight_) t$1.pop(), t$1[t$1.length - 1].value = e$1.value;
		else {
			if (!("&&" === r$1.operator && !e$1.value || "||" === r$1.operator && e$1.value)) return e$1.doneRight_ = !0, new tn(r$1.right, e$1.scope);
			t$1.pop(), t$1[t$1.length - 1].value = e$1.value;
		}
	}, t.prototype.stepMemberExpression = function(t$1, e$1, r$1) {
		if (!e$1.doneObject_) return e$1.doneObject_ = !0, new tn(r$1.object, e$1.scope);
		var n$1;
		if (r$1.computed) {
			if (!e$1.doneProperty_) return e$1.object_ = e$1.value, e$1.doneProperty_ = !0, new tn(r$1.property, e$1.scope);
			n$1 = e$1.value;
		} else e$1.object_ = e$1.value, n$1 = r$1.property.name;
		if (t$1.pop(), e$1.components) t$1[t$1.length - 1].value = [e$1.object_, n$1];
		else {
			var i$1 = this.getProperty(e$1.object_, n$1);
			if (i$1 && "object" == typeof i$1 && i$1.isGetter) {
				i$1.isGetter = !1;
				var o$1 = i$1;
				return this.createGetter_(o$1, e$1.object_);
			}
			t$1[t$1.length - 1].value = i$1;
		}
	}, t.prototype.stepNewExpression = function(t$1, e$1, r$1) {
		return this.stepCallExpression(t$1, e$1, r$1);
	}, t.prototype.stepObjectExpression = function(t$1, e$1, r$1) {
		var n$1 = e$1.n_ || 0, i$1 = r$1.properties[n$1];
		if (e$1.object_) {
			var o$1 = i$1.key;
			if ("Identifier" === o$1.type) var s$1 = o$1.name;
			else {
				if ("Literal" !== o$1.type) throw SyntaxError("Unknown object structure: " + o$1.type);
				s$1 = o$1.value;
			}
			e$1.properties_[s$1] || (e$1.properties_[s$1] = {}), e$1.properties_[s$1][i$1.kind] = e$1.value, e$1.n_ = ++n$1, i$1 = r$1.properties[n$1];
		} else e$1.object_ = this.createObjectProto(this.OBJECT_PROTO), e$1.properties_ = Object.create(null);
		if (i$1) return new tn(i$1.value, e$1.scope);
		for (var a$1 in e$1.properties_) {
			var u$1 = e$1.properties_[a$1];
			if ("get" in u$1 || "set" in u$1) {
				var c$1 = {
					configurable: !0,
					enumerable: !0,
					get: u$1.get,
					set: u$1.set
				};
				this.setProperty(e$1.object_, a$1, null, c$1);
			} else this.setProperty(e$1.object_, a$1, u$1.init);
		}
		t$1.pop(), t$1[t$1.length - 1].value = e$1.object_;
	}, t.prototype.stepProgram = function(t$1, e$1, r$1) {
		var n$1 = e$1.n_ || 0, i$1 = r$1.body[n$1];
		if (i$1) return e$1.done = !1, e$1.n_ = n$1 + 1, new tn(i$1, e$1.scope);
		e$1.done = !0;
	}, t.prototype.stepReturnStatement = function(t$1, e$1, r$1) {
		if (r$1.argument && !e$1.done_) return e$1.done_ = !0, new tn(r$1.argument, e$1.scope);
		var n$1 = e$1.value, i$1 = t$1.length - 1;
		for (e$1 = t$1[i$1]; "CallExpression" !== e$1.node.type && "NewExpression" !== e$1.node.type;) {
			if ("TryStatement" !== e$1.node.type && t$1.splice(i$1, 1), --i$1 < 0) throw SyntaxError("Illegal return statement");
			e$1 = t$1[i$1];
		}
		e$1.value = n$1;
	}, t.prototype.stepSequenceExpression = function(t$1, e$1, r$1) {
		var n$1 = e$1.n_ || 0, i$1 = r$1.expressions[n$1];
		if (i$1) return e$1.n_ = n$1 + 1, new tn(i$1, e$1.scope);
		t$1.pop(), t$1[t$1.length - 1].value = e$1.value;
	}, t.prototype.stepSwitchStatement = function(t$1, e$1, r$1) {
		if (!e$1.test_) return e$1.test_ = 1, new tn(r$1.discriminant, e$1.scope);
		for (1 === e$1.test_ && (e$1.test_ = 2, e$1.switchValue_ = e$1.value);;) {
			var n$1 = e$1.index_ || 0, i$1 = r$1.cases[n$1];
			if (e$1.matched_ || !i$1 || i$1.test) if (i$1 || e$1.matched_ || !e$1.defaultCase_) {
				if (!i$1) return void t$1.pop();
				if (!e$1.matched_ && !e$1.tested_ && i$1.test) return e$1.tested_ = !0, new tn(i$1.test, e$1.scope);
				if (e$1.matched_ || e$1.value === e$1.switchValue_) {
					e$1.matched_ = !0;
					var o$1 = e$1.n_ || 0;
					if (i$1.consequent[o$1]) return e$1.isSwitch = !0, e$1.n_ = o$1 + 1, new tn(i$1.consequent[o$1], e$1.scope);
				}
				e$1.tested_ = !1, e$1.n_ = 0, e$1.index_ = n$1 + 1;
			} else e$1.matched_ = !0, e$1.index_ = e$1.defaultCase_;
			else e$1.defaultCase_ = n$1, e$1.index_ = n$1 + 1;
		}
	}, t.prototype.stepThisExpression = function(t$1, e$1, r$1) {
		t$1.pop(), t$1[t$1.length - 1].value = this.getValueFromScope("this");
	}, t.prototype.stepThrowStatement = function(t$1, e$1, r$1) {
		if (!e$1.done_) return e$1.done_ = !0, new tn(r$1.argument, e$1.scope);
		this.throwException(e$1.value);
	}, t.prototype.stepTryStatement = function(t$1, e$1, r$1) {
		if (!e$1.doneBlock_) return e$1.doneBlock_ = !0, new tn(r$1.block, e$1.scope);
		if (e$1.throwValue && !e$1.doneHandler_ && r$1.handler) {
			e$1.doneHandler_ = !0;
			var n$1 = new tn(r$1.handler, e$1.scope);
			return n$1.throwValue = e$1.throwValue, e$1.throwValue = null, n$1;
		}
		if (!e$1.doneFinalizer_ && r$1.finalizer) return e$1.doneFinalizer_ = !0, new tn(r$1.finalizer, e$1.scope);
		e$1.throwValue ? this.executeException(e$1.throwValue) : t$1.pop();
	}, t.prototype.stepUnaryExpression = function(e$1, r$1, n$1) {
		if (!r$1.done_) {
			r$1.done_ = !0;
			var i$1 = new tn(n$1.argument, r$1.scope);
			return i$1.components = "delete" === n$1.operator, i$1;
		}
		e$1.pop();
		var o$1 = r$1.value;
		if ("-" === n$1.operator) o$1 = -o$1;
		else if ("+" === n$1.operator) o$1 = +o$1;
		else if ("!" === n$1.operator) o$1 = !o$1;
		else if ("~" === n$1.operator) o$1 = ~o$1;
		else if ("delete" === n$1.operator) {
			var s$1 = !0;
			if (Array.isArray(o$1)) {
				var a$1 = o$1[0];
				a$1 === t.SCOPE_REFERENCE && (a$1 = r$1.scope);
				var u$1 = String(o$1[1]);
				try {
					delete a$1.properties[u$1];
				} catch (t$1) {
					r$1.scope.strict ? this.throwException(this.TYPE_ERROR, "Cannot delete property '" + u$1 + "' of '" + a$1 + "'") : s$1 = !1;
				}
			}
			o$1 = s$1;
		} else if ("typeof" === n$1.operator) o$1 = o$1 && "Function" === o$1.class ? "function" : typeof o$1;
		else {
			if ("void" !== n$1.operator) throw SyntaxError("Unknown unary operator: " + n$1.operator);
			o$1 = void 0;
		}
		e$1[e$1.length - 1].value = o$1;
	}, t.prototype.stepUpdateExpression = function(t$1, e$1, r$1) {
		if (!e$1.doneLeft_) {
			e$1.doneLeft_ = !0;
			var n$1 = new tn(r$1.argument, e$1.scope);
			return n$1.components = !0, n$1;
		}
		if (e$1.leftSide_ || (e$1.leftSide_ = e$1.value), e$1.doneGetter_ && (e$1.leftValue_ = e$1.value), !e$1.doneGetter_) {
			var i$1 = this.getValue(e$1.leftSide_);
			if (e$1.leftValue_ = i$1, i$1 && "object" == typeof i$1 && i$1.isGetter) {
				i$1.isGetter = !1, e$1.doneGetter_ = !0;
				var o$1 = i$1;
				return this.createGetter_(o$1, e$1.leftSide_);
			}
		}
		if (e$1.doneSetter_) return t$1.pop(), void (t$1[t$1.length - 1].value = e$1.doneSetter_);
		var s$1;
		if (i$1 = Number(e$1.leftValue_), "++" === r$1.operator) s$1 = i$1 + 1;
		else {
			if ("--" !== r$1.operator) throw SyntaxError("Unknown update expression: " + r$1.operator);
			s$1 = i$1 - 1;
		}
		var a$1 = r$1.prefix ? s$1 : i$1, u$1 = this.setValue(e$1.leftSide_, s$1);
		if (u$1) return e$1.doneSetter_ = a$1, this.createSetter_(u$1, e$1.leftSide_, s$1);
		t$1.pop(), t$1[t$1.length - 1].value = a$1;
	}, t.prototype.stepVariableDeclaration = function(t$1, e$1, r$1) {
		var n$1 = r$1.declarations, i$1 = e$1.n_ || 0, o$1 = n$1[i$1];
		for (e$1.init_ && o$1 && (this.setValueToScope(o$1.id.name, e$1.value), e$1.init_ = !1, o$1 = n$1[++i$1]); o$1;) {
			if (o$1.init) return e$1.n_ = i$1, e$1.init_ = !0, new tn(o$1.init, e$1.scope);
			o$1 = n$1[++i$1];
		}
		t$1.pop();
	}, t.prototype.stepWithStatement = function(t$1, e$1, r$1) {
		if (!e$1.doneObject_) return e$1.doneObject_ = !0, new tn(r$1.object, e$1.scope);
		if (!e$1.doneBody_) {
			e$1.doneBody_ = !0;
			var n$1 = this.createSpecialScope(e$1.scope, e$1.value);
			return new tn(r$1.body, n$1);
		}
		t$1.pop();
	}, t.prototype.stepWhileStatement = function(t$1, e$1, r$1) {
		return this.stepDoWhileStatement(t$1, e$1, r$1);
	}, t.PARSE_OPTIONS = { ecmaVersion: 5 }, t.READONLY_DESCRIPTOR = {
		configurable: !0,
		enumerable: !0,
		writable: !1
	}, t.NONENUMERABLE_DESCRIPTOR = {
		configurable: !0,
		enumerable: !1,
		writable: !0
	}, t.READONLY_NONENUMERABLE_DESCRIPTOR = {
		configurable: !0,
		enumerable: !1,
		writable: !1
	}, t.VARIABLE_DESCRIPTOR = {
		configurable: !1,
		enumerable: !0,
		writable: !0
	}, t.STEP_ERROR = {}, t.SCOPE_REFERENCE = {}, t.toStringCycles_ = [], t;
}(), Qr = function() {
	function t(t$1) {
		this.proto = null, this.isObject = !0, this.class = "Object", this.data = null, this._native = void 0, this.getter = Object.create(null), this.setter = Object.create(null), this.properties = Object.create(null), this.proto = t$1;
	}
	return t.prototype.toString = function() {
		if ("Array" === this.class) {
			(n$1 = Kr.toStringCycles_).push(this);
			try {
				for (var t$1 = [], e$1 = 0; e$1 < this.properties.length; e$1++) {
					var r$1 = this.properties[e$1];
					t$1[e$1] = r$1 && r$1.isObject && -1 !== n$1.indexOf(r$1) ? "..." : r$1;
				}
			} finally {
				n$1.pop();
			}
			return t$1.join(",");
		}
		if ("Error" === this.class) {
			var n$1;
			if (-1 !== (n$1 = Kr.toStringCycles_).indexOf(this)) return "[object Error]";
			var i$1, o$1 = void 0, s$1 = this;
			do
				if ("name" in s$1.properties) {
					i$1 = s$1.properties.name;
					break;
				}
			while (s$1 = s$1.proto);
			s$1 = this;
			do
				if ("message" in s$1.properties) {
					o$1 = s$1.properties.message;
					break;
				}
			while (s$1 = s$1.proto);
			n$1.push(this);
			try {
				i$1 = i$1 && i$1.toString(), o$1 = o$1 && o$1.toString();
			} finally {
				n$1.pop();
			}
			return o$1 ? i$1 + ": " + o$1 : String(i$1);
		}
		return null !== this.data ? String(this.data) : "[object " + this.class + "]";
	}, t.prototype.valueOf = function() {
		return void 0 === this.data || null === this.data || this.data instanceof RegExp ? this : this.data instanceof Date ? this.data.valueOf() : this.data;
	}, t;
}(), tn = function(t, e$1) {
	this.node = t, this.scope = e$1;
}, en = function(t, e$1) {
	for (var r$1 = t; r$1 && r$1.prototype;) {
		if (Object.getOwnPropertyNames(r$1.prototype).indexOf(e$1) >= 0) return !0;
		r$1 = Object.getPrototypeOf(r$1);
	}
	return !1;
};
function rn(t, e$1) {
	var r$1 = {}, n$1 = Dt(t, {
		locations: !0,
		onComment: function(t$1, e$2, n$2, i$2, o$2, s$2) {
			r$1[s$2.line] = e$2;
		}
	});
	if ("Program" !== n$1.type || 1 !== n$1.body.length || "FunctionDeclaration" !== n$1.body[0].type) throw new Error("JavaScript program should only have one function definition");
	var i$1 = n$1.body[0].body.body, o$1 = [], s$1 = [];
	return i$1.forEach((function(t$1) {
		if ("ExpressionStatement" === t$1.type) {
			var n$2 = t$1.expression;
			if ("AssignmentExpression" === n$2.type && "=" === n$2.operator && "MemberExpression" === n$2.left.type && "ThisExpression" === n$2.left.object.type && "Identifier" === n$2.left.property.type) {
				for (var i$2 = [], a$1 = n$2.loc.start.line - 1; a$1 >= 0 && void 0 !== r$1[a$1]; a$1--) i$2.push(r$1[a$1]);
				if (!(i$2.length <= 0)) {
					var u$1 = n$2.left.property.name;
					if (!(Array.isArray(e$1) && e$1.indexOf(u$1) >= 0) && "FunctionExpression" !== n$2.right.type) {
						var c$1 = function(t$2, e$2, r$2) {
							var n$3 = {
								name: t$2,
								title: {},
								className: null,
								proposed: !1,
								initialValue: null
							};
							if (e$2.forEach((function(t$3) {
								var e$3 = t$3.indexOf("@ui ");
								if (e$3 >= 0) n$3.description = t$3.substring(e$3 + 4).trim();
								else {
									var r$3 = t$3.indexOf("@title ");
									if (r$3 >= 0) {
										var i$4 = t$3.substring(r$3 + 7).trim();
										0 === i$4.indexOf("@ja ") ? n$3.title.ja = i$4.substring(4).trim() : n$3.title.default = i$4;
									} else if (t$3.indexOf("@proposed") >= 0) n$3.proposed = !0;
									else {
										var o$3 = t$3.indexOf("@comment ");
										if (o$3 >= 0) {
											var s$3 = t$3.substring(o$3 + 9).trim();
											n$3.comment || (n$3.comment = {}), 0 === s$3.indexOf("@ja ") ? n$3.comment.ja = s$3.substring(4).trim() : n$3.comment.default = s$3;
											return;
										}
									}
								}
							})), !n$3.description && !n$3.comment) return null;
							if (n$3.proposed || n$3.comment) return n$3;
							var i$3 = n$3.description.indexOf("("), o$2 = n$3.description.indexOf(")", i$3);
							if (!(i$3 < 0 || o$2 < 0)) {
								n$3.className = n$3.description.substr(0, i$3);
								try {
									var s$2 = new Kr("[".concat(n$3.description.substr(i$3 + 1, o$2 - i$3 - 1), "]")), a$2 = Date.now();
									for (s$2.unwrap = null, s$2.wrap = null; s$2.step() && !(Date.now() - a$2 > 100););
									n$3.params = s$2.pseudoToNative(s$2.value);
								} catch (t$3) {}
								return n$3.params || (n$3.params = []), n$3;
							}
						}(u$1, i$2);
						s$1.push(n$2), c$1 && o$1.push(c$1);
					}
				}
			}
		}
	})), {
		widgets: o$1,
		fields: s$1,
		ast: n$1
	};
}
function nn(t, e$1) {
	if (void 0 === e$1 && (e$1 = -1), !t) return {
		dependencyAtCursor: null,
		dependencies: []
	};
	for (var r$1 = [], n$1 = null, i$1 = ("string" == typeof t ? Dt(t, Kr.PARSE_OPTIONS) : t).body[0].body.body.slice(0); i$1.length > 0;) {
		var o$1 = i$1.shift();
		if (null != o$1) {
			if ("CallExpression" !== o$1.type) o$1.expression && i$1.push(o$1.expression), o$1.object && i$1.push(o$1.object), o$1.property && i$1.push(o$1.property), o$1.name && "string" != typeof name && i$1.push(o$1.name), o$1.left && i$1.push(o$1.left), o$1.right && i$1.push(o$1.right), o$1.id && i$1.push(o$1.id), o$1.init && i$1.push(o$1.init), o$1.callee && i$1.push(o$1.callee), o$1.body && Array.isArray(o$1.body) && i$1.push.apply(i$1, o$1.body), o$1.declarations && Array.isArray(o$1.declarations) && i$1.push.apply(i$1, o$1.declarations), o$1.arguments && Array.isArray(o$1.arguments) && i$1.push.apply(i$1, o$1.arguments), o$1.params && Array.isArray(o$1.params) && i$1.push.apply(i$1, o$1.params);
			else if (o$1.callee.name && "require" === o$1.callee.name) {
				var s$1 = o$1.arguments;
				if (s$1 && Array.isArray(s$1) && 1 === s$1.length) {
					var a$1 = s$1[0];
					if ("Literal" === a$1.type) {
						var u$1 = a$1.value;
						r$1.push(u$1), o$1.start && o$1.end && o$1.start <= e$1 && o$1.end >= e$1 && (n$1 = u$1);
					}
				}
			}
		}
	}
	return {
		dependencyAtCursor: n$1,
		dependencies: r$1
	};
}
Kr.Object = Qr, Kr.State = tn;
var on = function() {
	return on = Object.assign || function(t) {
		for (var e$1, r$1 = 1, n$1 = arguments.length; r$1 < n$1; r$1++) for (var i$1 in e$1 = arguments[r$1]) Object.prototype.hasOwnProperty.call(e$1, i$1) && (t[i$1] = e$1[i$1]);
		return t;
	}, on.apply(this, arguments);
};
function sn(t, e$1, r$1) {
	for (var n$1, i$1 = 0, o$1 = e$1.length; i$1 < o$1; i$1++) !n$1 && i$1 in e$1 || (n$1 || (n$1 = Array.prototype.slice.call(e$1, 0, i$1)), n$1[i$1] = e$1[i$1]);
	return t.concat(n$1 || Array.prototype.slice.call(e$1));
}
function an(t) {
	return "boolean" == typeof t || "number" == typeof t || "string" == typeof t || null == t;
}
var un = {
	type: "ExpressionStatement",
	start: null,
	end: null,
	expression: {
		type: "CallExpression",
		start: null,
		end: null,
		expression: null,
		arguments: null
	},
	arguments: null
}, cn = function() {
	function t(t$1, e$1, r$1) {
		void 0 === r$1 && (r$1 = null), this.wrapperTable = t$1, this.ignoredPropNames = e$1, this.wrapMethodParameter = r$1, this.verbose = !1, this.initialize();
	}
	return t.prototype.initialize = function() {
		var t$1 = this;
		this.interpreter = new Kr("", (function(e$1, r$1) {
			t$1.globalScope = r$1;
		})), this.interpreter.wrap = function(e$1) {
			return t$1.wrap(e$1);
		}, this.interpreter.unwrap = function(e$1, r$1) {
			return t$1.unwrap(e$1, r$1);
		}, this.wrappers = {}, Object.keys(this.wrapperTable).forEach((function(e$1) {
			return t$1.wrapClass(t$1.wrapperTable[e$1], e$1);
		}));
	}, t.prototype.createGlobalFunction = function(t$1, e$1) {
		var r$1, n$1 = this, i$1 = e$1.func, o$1 = e$1.raw, s$1 = e$1.isConstructor, a$1 = e$1.async, u$1 = function() {
			for (var t$2 = [], e$2 = 0; e$2 < arguments.length; e$2++) t$2[e$2] = arguments[e$2];
			var r$2 = i$1(o$1 ? t$2 : t$2.map((function(e$3, r$3) {
				return r$3 < t$2.length - 1 || !a$1 ? n$1.unwrap(e$3) : e$3;
			})));
			return o$1 ? r$2 : n$1.wrap(r$2);
		};
		r$1 = a$1 ? this.interpreter.createAsyncFunction(u$1) : this.interpreter.createNativeFunction(u$1, s$1), this.interpreter.setProperty(this.globalScope, t$1, r$1);
	}, t.prototype.createFunction = function(t$1, e$1) {
		return void 0 === e$1 && (e$1 = !1), this.interpreter.createNativeFunction(t$1, e$1);
	}, t.prototype.setProperty = function(t$1, e$1, r$1) {
		this.interpreter.setProperty(t$1, e$1, this.wrap(r$1));
	}, t.prototype.setRawProperty = function(t$1, e$1, r$1) {
		this.interpreter.setProperty(t$1, e$1, r$1);
	}, t.prototype.getProperty = function(t$1, e$1) {
		return this.unwrap(this.interpreter.getProperty(t$1, e$1));
	}, t.prototype.getRawProperty = function(t$1, e$1) {
		return this.interpreter.getProperty(t$1, e$1);
	}, t.prototype.prepareRun = function(t$1) {
		var e$1 = "string" == typeof t$1 ? Dt(t$1, Kr.PARSE_OPTIONS) : t$1;
		var r$1 = this.interpreter.createScope(e$1, this.globalScope);
		return this.interpreter.stateStack = [{
			node: e$1,
			scope: r$1,
			done: !1
		}], r$1;
	}, t.prototype.newStatementFor = function(t$1) {
		return Dt("new " + t$1 + "();", Kr.PARSE_OPTIONS);
	}, t.prototype.prepareNewInstance = function(t$1, e$1) {
		var r$1 = this.interpreter.createScope(Dt("", Kr.PARSE_OPTIONS), e$1);
		return this.interpreter.stateStack = [{
			node: t$1,
			scope: r$1,
			thisExpression: r$1
		}], r$1;
	}, t.prototype.exec = function(t$1, e$1, r$1, n$1) {
		var i$1 = this, o$1 = this.interpreter;
		un.expression.arguments = [];
		var s$1 = [];
		return r$1.forEach((function(t$2) {
			un.expression.arguments.push(null), s$1.push(i$1.wrap(t$2));
		})), o$1.stateStack = [
			{
				node: {
					type: "Program",
					body: [un]
				},
				scope: this.globalScope,
				done: !0,
				n_: 1
			},
			{
				node: un,
				scope: this.globalScope,
				done_: !0
			},
			{
				node: un.expression,
				doneCallee_: 2,
				doneArgs_: !0,
				arguments_: s$1,
				funcThis_: t$1,
				func_: o$1.getProperty(t$1, e$1),
				scope: t$1,
				n_: s$1.length,
				value: [t$1, e$1]
			}
		], this.run(700, "call a method (" + t$1.className + "." + e$1 + (n$1 || "") + ")");
	}, t.prototype.run = function(t$1, e$1) {
		var r$1 = this.interpreter, n$1 = Date.now(), i$1 = !1;
		try {
			for (; r$1.step();) if (Date.now() - n$1 > t$1) {
				i$1 = !0;
				break;
			}
		} catch (o$2) {
			throw this.verbose && console.log(r$1.stateStack), "string" == typeof o$2 && (o$2 = new Error(o$2)), r$1.stateStack.length > 0 && (o$2.node = r$1.stateStack[r$1.stateStack.length - 1].node), o$2;
		}
		if (i$1) {
			var o$1 = /* @__PURE__ */ new Error("timeout: spent too long time (> " + t$1 + "ms) to " + e$1);
			throw r$1.stateStack.length > 0 && (o$1.node = r$1.stateStack[0].node), o$1;
		}
		return this.interpreter.value;
	}, t.prototype.cleanupProperties = function(t$1) {
		if (!t$1) return null;
		for (var e$1 in this.ignoredPropNames.forEach((function(e$2) {
			void 0 !== t$1.properties[e$2] && delete t$1.properties[e$2];
		})), t$1.properties) this.cleanupProperty(t$1.properties[e$1]) || delete t$1.properties[e$1];
		return t$1.properties;
	}, t.prototype.cleanupProperty = function(t$1) {
		if (an(t$1)) return !0;
		var e$1 = t$1;
		if (e$1._native) return !0;
		var r$1 = this.globalScope.properties;
		if (e$1.parent === r$1.Array) {
			for (var n$1 = e$1.length, i$1 = 0; i$1 < e$1.length; i$1++) this.cleanupProperty(e$1.properties[i$1]) || (delete e$1.properties[i$1], n$1--);
			return e$1.length = n$1, n$1 > 0;
		}
		if (e$1.parent === r$1.Object) {
			var o$1 = !0;
			for (var s$1 in e$1.properties) this.cleanupProperty(e$1.properties[s$1]) ? o$1 = !1 : delete e$1.properties[s$1];
			return !o$1;
		}
		return !1;
	}, t.prototype.restoreProperties = function(t$1, e$1) {
		e$1 && (t$1.properties = on(on({}, t$1.properties), e$1));
	}, t.prototype.wrap = function(t$1) {
		if ("object" == typeof t$1 && null !== t$1 && void 0 !== t$1.constructor && "string" == typeof t$1.constructor.className) {
			var e$1 = t$1.constructor.className, r$1 = this.wrappers[e$1];
			if (void 0 === r$1) return;
			var n$1 = this.interpreter.createObject(r$1);
			return n$1._native = t$1, n$1;
		}
		return this.verbose && (an(t$1) || Array.isArray(t$1) || console.log("wrap complex obj:", String(t$1))), this.interpreter.nativeToPseudo(t$1);
	}, t.prototype.unwrap = function(t$1, e$1) {
		return "object" == typeof t$1 && null !== t$1 && t$1._native ? t$1._native : this.interpreter.pseudoToNative(t$1, e$1);
	}, t.prototype.wrapClass = function(t$1, e$1) {
		this.verbose && console.log("--- wrapping " + e$1 + " ---"), t$1.className = e$1;
		var r$1 = this, n$1 = this.interpreter.createNativeFunction((function(e$2) {
			var i$1, o$1;
			if (i$1 = r$1.interpreter.calledWithNew() ? this : r$1.interpreter.createObjectProto(n$1.properties.prototype), void 0 !== e$2) if (Array.isArray(e$2)) for (var s$1 = 0; s$1 < e$2.length; s$1++) o$1[s$1] = r$1.unwrap(e$2[s$1]);
			else o$1 = r$1.unwrap(e$2);
			if (t$1) {
				var a$1 = Object.create(t$1.prototype), u$1 = t$1.apply(a$1, [null].concat(o$1).splice(1));
				i$1._native = null !== u$1 && "object" == typeof u$1 ? u$1 : a$1;
			}
			return i$1;
		}));
		return this.interpreter.setProperty(this.globalScope, e$1, n$1), this.wrapStaticMembers(n$1, t$1), this.wrapInstanceMembers(n$1, t$1), this.wrappers[e$1] = n$1, n$1;
	}, t.prototype.wrapStaticMembers = function(t$1, e$1) {
		var r$1 = this, n$1 = function(n$2) {
			var o$2 = n$2;
			if (i$1.interpreter.setProperty(t$1, n$2, ReferenceError, {
				get: function() {
					return r$1.wrap(e$1[o$2]);
				},
				set: function(t$2) {
					return e$1[o$2] = r$1.unwrap(t$2);
				}
			}), i$1.verbose) {
				var s$1 = void 0;
				try {
					s$1 = typeof e$1[o$2];
				} catch (t$2) {
					s$1 = "not accessible";
				}
				console.log("static " + o$2 + " (" + s$1 + ")");
			}
		}, i$1 = this;
		for (var o$1 in e$1) n$1(o$1);
	}, t.prototype.wrapInstanceMembers = function(t$1, e$1) {
		for (var r$1, n$1 = new e$1(), i$1 = 0, o$1 = sn(sn([], Object.keys(n$1)), function(t$2) {
			for (var e$2 = t$2, r$2 = []; e$2 && e$2.prototype;) r$2 = sn(sn([], r$2), Object.getOwnPropertyNames(e$2.prototype)), e$2 = Object.getPrototypeOf(e$2);
			return r$2;
		}(e$1)).filter((function(t$2, e$2, r$2) {
			return r$2.indexOf(t$2) === e$2;
		})); i$1 < o$1.length; i$1++) {
			var s$1 = o$1[i$1];
			if ("constructor" !== s$1 && !this.interpreter.hasProperty(t$1, s$1) && !this.interpreter.hasProperty(t$1.properties.prototype, s$1) && "_" !== s$1.charAt(0)) {
				if (this.verbose) {
					var a$1 = void 0;
					try {
						a$1 = typeof n$1[s$1];
					} catch (t$2) {
						a$1 = "not accessible";
					}
					r$1 = s$1 + " (" + a$1 + ")";
				}
				try {
					if ("function" == typeof n$1[s$1]) {
						var u$1 = function(e$2, r$2) {
							return function(n$2) {
								var i$2;
								return r$2.wrap((i$2 = this._native)[e$2].apply(i$2, n$2.map((function(e$3) {
									var n$3 = r$2.unwrap(e$3);
									return r$2.wrapMethodParameter ? r$2.wrapMethodParameter(t$1, n$3) : n$3;
								}))));
							};
						}(s$1, this);
						this.interpreter.setProperty(t$1.properties.prototype, s$1, this.interpreter.createNativeFunction(u$1)), this.verbose && (r$1 += " native method");
					}
				} catch (t$2) {}
				this.verbose && console.log(r$1);
			}
		}
	}, t;
}();
function ln(t) {
	var e$1 = parseFloat(t);
	return isNaN(e$1) ? 0 : e$1;
}
function pn(t) {
	var e$1;
	if ("undefined" == typeof window || !(null === (e$1 = null === window || void 0 === window ? void 0 : window.location) || void 0 === e$1 ? void 0 : e$1.search)) return null;
	for (var r$1 = 0, n$1 = window.location.search.substring(1).split("&"); r$1 < n$1.length; r$1++) {
		var i$1 = n$1[r$1].split("=");
		if (decodeURIComponent(i$1[0]) === t) return decodeURIComponent(i$1[1]);
	}
	return null;
}
var hn = function(t, e$1) {
	return hn = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t$1, e$2) {
		t$1.__proto__ = e$2;
	} || function(t$1, e$2) {
		for (var r$1 in e$2) Object.prototype.hasOwnProperty.call(e$2, r$1) && (t$1[r$1] = e$2[r$1]);
	}, hn(t, e$1);
};
function dn(t, e$1) {
	if ("function" != typeof e$1 && null !== e$1) throw new TypeError("Class extends value " + String(e$1) + " is not a constructor or null");
	function r$1() {
		this.constructor = t;
	}
	hn(t, e$1), t.prototype = null === e$1 ? Object.create(e$1) : (r$1.prototype = e$1.prototype, new r$1());
}
var fn = function() {
	return fn = Object.assign || function(t) {
		for (var e$1, r$1 = 1, n$1 = arguments.length; r$1 < n$1; r$1++) for (var i$1 in e$1 = arguments[r$1]) Object.prototype.hasOwnProperty.call(e$1, i$1) && (t[i$1] = e$1[i$1]);
		return t;
	}, fn.apply(this, arguments);
};
function yn(t, e$1, r$1, n$1) {
	return new (r$1 || (r$1 = Promise))((function(e$2, i$1) {
		function o$1(t$1) {
			try {
				a$1(n$1.next(t$1));
			} catch (t$2) {
				i$1(t$2);
			}
		}
		function s$1(t$1) {
			try {
				a$1(n$1.throw(t$1));
			} catch (t$2) {
				i$1(t$2);
			}
		}
		function a$1(t$1) {
			var n$2;
			t$1.done ? e$2(t$1.value) : (n$2 = t$1.value, n$2 instanceof r$1 ? n$2 : new r$1((function(t$2) {
				t$2(n$2);
			}))).then(o$1, s$1);
		}
		a$1((n$1 = n$1.apply(t, [])).next());
	}));
}
function gn(t, e$1) {
	var r$1, n$1, i$1, o$1, s$1 = {
		label: 0,
		sent: function() {
			if (1 & i$1[0]) throw i$1[1];
			return i$1[1];
		},
		trys: [],
		ops: []
	};
	return o$1 = {
		next: a$1(0),
		throw: a$1(1),
		return: a$1(2)
	}, "function" == typeof Symbol && (o$1[Symbol.iterator] = function() {
		return this;
	}), o$1;
	function a$1(a$2) {
		return function(u$1) {
			return function(a$3) {
				if (r$1) throw new TypeError("Generator is already executing.");
				for (; o$1 && (o$1 = 0, a$3[0] && (s$1 = 0)), s$1;) try {
					if (r$1 = 1, n$1 && (i$1 = 2 & a$3[0] ? n$1.return : a$3[0] ? n$1.throw || ((i$1 = n$1.return) && i$1.call(n$1), 0) : n$1.next) && !(i$1 = i$1.call(n$1, a$3[1])).done) return i$1;
					switch (n$1 = 0, i$1 && (a$3 = [2 & a$3[0], i$1.value]), a$3[0]) {
						case 0:
						case 1:
							i$1 = a$3;
							break;
						case 4: return s$1.label++, {
							value: a$3[1],
							done: !1
						};
						case 5:
							s$1.label++, n$1 = a$3[1], a$3 = [0];
							continue;
						case 7:
							a$3 = s$1.ops.pop(), s$1.trys.pop();
							continue;
						default:
							if (!((i$1 = (i$1 = s$1.trys).length > 0 && i$1[i$1.length - 1]) || 6 !== a$3[0] && 2 !== a$3[0])) {
								s$1 = 0;
								continue;
							}
							if (3 === a$3[0] && (!i$1 || a$3[1] > i$1[0] && a$3[1] < i$1[3])) {
								s$1.label = a$3[1];
								break;
							}
							if (6 === a$3[0] && s$1.label < i$1[1]) {
								s$1.label = i$1[1], i$1 = a$3;
								break;
							}
							if (i$1 && s$1.label < i$1[2]) {
								s$1.label = i$1[2], s$1.ops.push(a$3);
								break;
							}
							i$1[2] && s$1.ops.pop(), s$1.trys.pop();
							continue;
					}
					a$3 = e$1.call(t, s$1);
				} catch (t$1) {
					a$3 = [6, t$1], n$1 = 0;
				} finally {
					r$1 = i$1 = 0;
				}
				if (5 & a$3[0]) throw a$3[1];
				return {
					value: a$3[0] ? a$3[1] : void 0,
					done: !0
				};
			}([a$2, u$1]);
		};
	}
}
function vn(t, e$1, r$1) {
	if (2 === arguments.length) for (var n$1, i$1 = 0, o$1 = e$1.length; i$1 < o$1; i$1++) !n$1 && i$1 in e$1 || (n$1 || (n$1 = Array.prototype.slice.call(e$1, 0, i$1)), n$1[i$1] = e$1[i$1]);
	return t.concat(n$1 || Array.prototype.slice.call(e$1));
}
var mn, bn, _n = [
	0,
	0,
	0,
	0
], wn = function() {
	function t() {
		this._position = 0, this._wait = 50, this.update = this.update.bind(this);
	}
	return Object.defineProperty(t.prototype, "wait", {
		get: function() {
			return this._wait;
		},
		set: function(t$1) {
			this._wait = t$1, this._isPlaying && this.start();
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "isPlaying", {
		get: function() {
			return this._isPlaying;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "position", {
		get: function() {
			if (!this.isPlaying) return this._position;
			var t$1 = this.basePosition.position + (Date.now() - this.basePosition.time);
			return Math.min(t$1, this.player.video.duration);
		},
		enumerable: !1,
		configurable: !0
	}), t.prototype.initialize = function(t$1) {
		var e$1 = t$1.player, r$1 = t$1.updater, n$1 = t$1.emitter;
		return yn(this, 0, void 0, (function() {
			return gn(this, (function(t$2) {
				return this.player = e$1, this.updateMediaPosition = r$1, this.emitter = n$1, [2];
			}));
		}));
	}, t.prototype.play = function() {
		this.start(), this.emitter.onPlay();
	}, t.prototype.stop = function() {
		this.clearInterval(), this._isPlaying = !1, this.seek(0), this.pause(), this.emitter.onStop();
	}, t.prototype.pause = function() {
		this.clearInterval(), this._isPlaying = !1, this.emitter.onPause();
	}, t.prototype.seek = function(t$1) {
		var e$1 = this;
		this._position = t$1, this.updateMediaPosition(t$1).then((function() {
			e$1.emitter.onSeek(t$1), e$1.emitter.onSeekComplete(t$1);
		})), this.isPlaying && this.start();
	}, t.prototype.dispose = function() {
		this.clearInterval();
	}, t.prototype.clearInterval = function() {
		window.clearInterval(this.intervalId);
	}, t.prototype.start = function() {
		this.clearInterval(), this._isPlaying = !0, this.basePosition = {
			time: Date.now(),
			position: this._position
		}, this.intervalId = window.setInterval(this.update, this.wait);
	}, t.prototype.update = function() {
		this.player.video || this.stop();
		var t$1 = this.basePosition.position + (Date.now() - this.basePosition.time);
		this._position = Math.min(t$1, this.player.video.duration), this.updateMediaPosition(this.position), this._position >= this.player.video.duration && this.stop();
	}, t;
}();
function Pn() {
	return yn(this, 0, void 0, (function() {
		return gn(this, (function(t) {
			return bn && bn.Player ? [2, bn] : "undefined" == typeof window ? [2, import("./main-CqD3vHGc.js").then(__toDynamicImportESM(1))] : window.Songle && window.Songle.Player ? [2, window.Songle] : (mn || (mn = new Promise((function(t$1) {
				var e$1 = !1;
				window.onSongleAPIReady = function(r$1) {
					e$1 = !0, t$1(bn = r$1);
				}, setTimeout((function() {
					if (!e$1) {
						var t$2 = [];
						document.querySelectorAll("script").forEach((function(e$2) {
							var r$2 = e$2.getAttribute("src");
							r$2 && r$2.indexOf("songle.jp/v2/api.js") >= 0 && t$2.push(e$2);
						})), t$2.forEach((function(t$3) {
							return t$3.parentElement.removeChild(t$3);
						}));
						var r$1 = document.createElement("script");
						r$1.src = "https://api.songle.jp/v2/api.js", document.head.appendChild(r$1);
					}
				}), 1e3);
			}))), [2, mn]);
		}));
	}));
}
var En = function() {
	function t(t$1) {
		void 0 === t$1 && (t$1 = {}), this.options = t$1, this.wait = 50, this.volumeListener = { onVolumeUpdate: this.onVolumeUpdate.bind(this) }, this.resetProps();
	}
	return Object.defineProperty(t.prototype, "songlePlayer", {
		get: function() {
			return this._songlePlayer;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "isPlaying", {
		get: function() {
			return !!this._songlePlayer && this._songlePlayer.isPlaying;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "withSync", {
		get: function() {
			var t$1, e$1;
			return !(!(null === (t$1 = this.options) || void 0 === t$1 ? void 0 : t$1.accessToken) && !(null === (e$1 = this.options) || void 0 === e$1 ? void 0 : e$1.secretToken));
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "position", {
		get: function() {
			var t$1;
			if (!this._songlePlayer) return 0;
			if (this.lastPosition > 0 && this.lastTime > 0) return Date.now() + this.lastPosition - this.lastTime;
			var e$1 = this._songlePlayer.positionTime;
			if ("songle-api-html-media-element-media" === (null === (t$1 = this._songlePlayer.media) || void 0 === t$1 ? void 0 : t$1.dispatcherName)) {
				var r$1 = this.lastTime, n$1 = this.lastPosition, i$1 = void 0;
				if (r$1 > 0) {
					var o$1 = Date.now() - r$1;
					i$1 = Math.max(0, this.wait - o$1);
				} else i$1 = this.wait;
				0 === n$1 && e$1 >= 500 ? e$1 = 0 : 0 === r$1 && e$1 - n$1 >= 800 && (e$1 = n$1 + i$1);
			}
			return e$1;
		},
		enumerable: !1,
		configurable: !0
	}), t.prototype.initialize = function(t$1) {
		var e$1, r$1, n$1, i$1, o$1 = t$1.player, s$1 = t$1.updater, a$1 = t$1.emitter, u$1 = t$1.altSourceUrl;
		return yn(this, 0, void 0, (function() {
			var t$2, l$1, p$1;
			return gn(this, (function(h$1) {
				switch (h$1.label) {
					case 0: return this.player && this.player.removeListener(this.volumeListener), this.player = o$1, this.player.addListener(this.volumeListener), this.updateMediaPosition = s$1, this.emitter = a$1, this._songlePlayer ? [3, 2] : [4, this.initializeSonglePlayer()];
					case 1: h$1.sent(), h$1.label = 2;
					case 2: return t$2 = this.options.headless, l$1 = u$1 || this.options.altSourceUrls && (null === (e$1 = this.player.data.song) || void 0 === e$1 ? void 0 : e$1.permalink) && this.options.altSourceUrls[null === (r$1 = this.player.data.song) || void 0 === r$1 ? void 0 : r$1.permalink] || (null === (n$1 = this.player.data.song) || void 0 === n$1 ? void 0 : n$1.permalink) || void 0, c.isUploaderUrl(l$1) && (l$1 = c.getAltSongUrlFromUploaderGuid(c.getUploaderGuid(c.getSongPathFromUrl(l$1)))), (p$1 = (null === (i$1 = this.player.data.song) || void 0 === i$1 ? void 0 : i$1.permalink) || l$1) === l$1 && (l$1 = void 0), [4, this._songlePlayer.useMedia(p$1, {
						headless: t$2,
						altSourceUrl: l$1
					})];
					case 3: return h$1.sent(), this.ignoreSonglePlayerEvents = !0, this._songlePlayer.volume = 0 * (1 - this.player.volume / 100) + 100 * this.player.volume / 100, this._songlePlayer.play(), this._songlePlayer.stop(), this.ignoreSonglePlayerEvents = !1, this.resetProps(), [2];
				}
			}));
		}));
	}, t.prototype.resetProps = function() {
		this.lastPosition = 0, this.lastTime = 0, this.elapsedTimes = [];
	}, t.prototype.initializeSonglePlayer = function() {
		var t$1;
		return yn(this, 0, void 0, (function() {
			var e$1, r$1, n$1, i$1, o$1, s$1, a$1, u$1 = this;
			return gn(this, (function(c$1) {
				switch (c$1.label) {
					case 0: return e$1 = this.options, r$1 = e$1.accessToken, n$1 = e$1.secretToken, (o$1 = this.options.songle) ? [3, 2] : [4, Pn()];
					case 1: o$1 = c$1.sent(), c$1.label = 2;
					case 2: return (i$1 = o$1).System && (i$1.System.showLicense = !1), s$1 = null === (t$1 = this.options) || void 0 === t$1 ? void 0 : t$1.autoUseMedia, this._songlePlayer = this.withSync ? new i$1.SyncPlayer({
						mediaElement: this.player.mediaSourceElement,
						accessToken: r$1,
						secretToken: n$1,
						autoUseMedia: s$1
					}) : new i$1.Player({ mediaElement: this.player.mediaSourceElement }), a$1 = !1, this._songlePlayer.on("play", (function() {
						u$1.ignoreSonglePlayerEvents || (a$1 = !1, u$1.handler || (u$1.startPolling(), u$1.emitter.onPlay()));
					})), this._songlePlayer.on("pause", (function() {
						return yn(u$1, 0, void 0, (function() {
							return gn(this, (function(t$2) {
								switch (t$2.label) {
									case 0: return this.ignoreSonglePlayerEvents ? [2] : (a$1 = !1, this.stopPolling(), this.emitter.onPause(), this.stopping ? (this.stopping = !1, [4, this.updateMediaPosition(0)]) : [3, 2]);
									case 1: t$2.sent(), this.resetProps(), this.emitter.onStop(), t$2.label = 2;
									case 2: return [2];
								}
							}));
						}));
					})), this._songlePlayer.on("finish", (function() {
						return yn(u$1, 0, void 0, (function() {
							return gn(this, (function(t$2) {
								switch (t$2.label) {
									case 0: return a$1 = !1, this.handler ? (this.stopPolling(), [4, this.updateMediaPosition(0)]) : [3, 2];
									case 1: t$2.sent(), this.emitter.onStop(), t$2.label = 2;
									case 2: return [2];
								}
							}));
						}));
					})), this._songlePlayer.on("seek", (function(t$2) {
						var e$2 = t$2.data;
						return yn(u$1, 0, void 0, (function() {
							return gn(this, (function(t$3) {
								switch (t$3.label) {
									case 0: return this._songlePlayer.isPlaying ? [3, 2] : (a$1 = !1, [4, this.updateMediaPosition(e$2.positionTime)]);
									case 1: return t$3.sent(), this.emitter.onSeekComplete(e$2.positionTime), [3, 4];
									case 2: return a$1 = !0, [4, this.updateMediaPosition(this._songlePlayer.positionTime)];
									case 3: t$3.sent(), t$3.label = 4;
									case 4: return [2];
								}
							}));
						}));
					})), this._songlePlayer.on("mediaSeek", (function() {
						a$1 && (u$1.emitter.onSeekComplete(u$1.position), a$1 = !1);
					})), this.withSync && (this._songlePlayer.on("mediaPlay", (function() {
						u$1.handler || (u$1.startPolling(), u$1.emitter.onPlay());
					})), this._songlePlayer.on("mediaFinish", (function() {
						u$1.handler && (u$1.stopPolling(), u$1.emitter.onStop());
					}))), [2];
				}
			}));
		}));
	}, t.prototype.play = function() {
		if (this._songlePlayer) return this._songlePlayer.play();
		this.emitter.onPlay();
	}, t.prototype.stop = function() {
		if (this._songlePlayer) return this.stopping = this._songlePlayer.isPlaying, this._songlePlayer.stop();
		this.emitter.onStop();
	}, t.prototype.pause = function() {
		if (this._songlePlayer) return this.stopping = !1, this._songlePlayer.pause();
		this.emitter.onPause();
	}, t.prototype.seek = function(t$1) {
		var e$1 = this;
		this._songlePlayer ? (this._songlePlayer.seekTo(t$1), this.emitter.onSeek(t$1)) : this.updateMediaPosition(t$1).then((function() {
			e$1.emitter.onSeek(t$1);
		}));
	}, t.prototype.startPolling = function() {
		var t$1, e$1 = this;
		if (this.lastTime > 0) {
			var r$1 = Date.now() - this.lastTime;
			t$1 = Math.max(0, this.wait - r$1);
		} else t$1 = this.wait;
		this.handler = setTimeout((function() {
			return yn(e$1, 0, void 0, (function() {
				var e$2, r$2, n$1, i$1, o$1, s$1, a$1, u$1, c$1;
				return gn(this, (function(l$1) {
					switch (l$1.label) {
						case 0: return this._songlePlayer ? (r$2 = (e$2 = this).lastTime, n$1 = e$2.lastPosition, i$1 = this._songlePlayer.positionTime, o$1 = !1, "songle-api-html-media-element-media" === (null === (c$1 = this._songlePlayer.media) || void 0 === c$1 ? void 0 : c$1.dispatcherName) && (0 === n$1 && i$1 >= 500 ? (i$1 = 0, o$1 = !0) : 0 === r$2 && i$1 - n$1 >= 800 && (i$1 = n$1 + t$1, o$1 = !0)), s$1 = r$2 > 0 ? Date.now() - r$2 : t$1, this.updateElapsedTimes(s$1), a$1 = n$1 > 0 ? n$1 + s$1 : i$1, u$1 = Math.abs(i$1 - a$1), (a$1 = u$1 > 2 * this.wait ? i$1 : a$1 <= i$1 ? .5 * (a$1 + i$1) : Math.max(n$1, i$1)) < this.lastPosition && (this.lastPosition - a$1 > 5 * this.wait || (a$1 = this.lastPosition)), o$1 || (this.lastTime = Date.now()), this.lastPosition = a$1, [4, this.updateMediaPosition(a$1)]) : [2];
						case 1: return l$1.sent(), this.handler && this.startPolling(), [2];
					}
				}));
			}));
		}), t$1);
	}, t.prototype.updateElapsedTimes = function(t$1) {
		if (this.elapsedTimes.unshift(t$1), this.elapsedTimes = this.elapsedTimes.slice(0, 10), this.elapsedTimes.length >= 10) {
			var e$1 = this.elapsedTimes.reduce((function(t$2, e$2) {
				return t$2 + e$2;
			})) / 10;
			e$1 > 5 * this.wait && (this.player.stageScale = Math.max(.25, .9 * this.player.stageScale), this.elapsedTimes = []), e$1 < 1.2 * this.wait && this.player.stageScale < 1 && (this.player.stageScale = Math.min(1, this.player.stageScale / .9), this.elapsedTimes = []);
		}
	}, t.prototype.stopPolling = function() {
		var t$1;
		if (this.handler) {
			if (clearTimeout(this.handler), this._songlePlayer) if ("songle-api-html-media-element-media" === (null === (t$1 = this._songlePlayer.media) || void 0 === t$1 ? void 0 : t$1.dispatcherName)) {
				var e$1 = this.lastTime, r$1 = this.lastPosition, n$1 = Date.now() - e$1;
				this.lastPosition = r$1 + n$1;
			} else this.lastPosition = this._songlePlayer.positionTime;
			this.lastTime = 0;
		}
		this.handler = null;
	}, t.prototype.dispose = function() {
		if (this.player && this.player.removeListener(this.volumeListener), this._songlePlayer) {
			try {
				this._songlePlayer.stop();
			} catch (t$1) {}
			this._songlePlayer = null;
		}
	}, t.prototype.onVolumeUpdate = function(t$1) {
		this._songlePlayer && (this._songlePlayer.volume = t$1);
	}, t;
}(), On = function() {
	function t(t$1) {
		this.listeners = [], this.throttleInterval = t$1 && t$1.throttleInterval ? Number(t$1.throttleInterval) : 100;
	}
	return t.prototype.onVideoLoad = function(t$1, e$1) {
		this.listeners.forEach((function(r$1) {
			return r$1.onVideoLoad && r$1.onVideoLoad(t$1, e$1);
		}));
	}, t.prototype.onSongLoad = function(t$1, e$1) {
		this.listeners.forEach((function(r$1) {
			return r$1.onSongLoad && r$1.onSongLoad(t$1, e$1);
		}));
	}, t.prototype.onSongMapLoad = function(t$1, e$1) {
		this.listeners.forEach((function(r$1) {
			return r$1.onSongMapLoad && r$1.onSongMapLoad(t$1, e$1);
		}));
	}, t.prototype.onSongInfoLoad = function(t$1, e$1) {
		var r$1 = !1;
		this.listeners.forEach((function(n$1) {
			n$1.onSongInfoLoad && (n$1.onSongInfoLoad(t$1, e$1), r$1 = !0);
		})), r$1 && console.warn("[TextAlive API] \"onSongInfoLoad\" event is deprecated; use \"onSongMapLoad\" event instead");
	}, t.prototype.onVocalAmplitudeLoad = function(t$1, e$1) {
		this.listeners.forEach((function(r$1) {
			return r$1.onVocalAmplitudeLoad && r$1.onVocalAmplitudeLoad(t$1, e$1);
		}));
	}, t.prototype.onValenceArousalLoad = function(t$1, e$1) {
		this.listeners.forEach((function(r$1) {
			return r$1.onValenceArousalLoad && r$1.onValenceArousalLoad(t$1, e$1);
		}));
	}, t.prototype.onLyricsLoad = function(t$1, e$1) {
		this.listeners.forEach((function(r$1) {
			return r$1.onLyricsLoad && r$1.onLyricsLoad(t$1, e$1);
		}));
	}, t.prototype.onTextLoad = function(t$1, e$1) {
		this.listeners.forEach((function(r$1) {
			return r$1.onTextLoad && r$1.onTextLoad(t$1, e$1);
		}));
	}, t.prototype.onAppLoad = function(t$1) {
		this.listeners.forEach((function(e$1) {
			return e$1.onAppLoad && e$1.onAppLoad(t$1);
		}));
	}, t.prototype.onAppReady = function(t$1) {
		this.listeners.forEach((function(e$1) {
			return e$1.onAppReady && e$1.onAppReady(t$1);
		}));
	}, t.prototype.onAppParameterUpdate = function(t$1, e$1) {
		this.listeners.forEach((function(r$1) {
			return r$1.onAppParameterUpdate && r$1.onAppParameterUpdate(t$1, e$1);
		}));
	}, t.prototype.onAppMediaChange = function(t$1, e$1) {
		this.listeners.forEach((function(r$1) {
			return r$1.onAppMediaChange && r$1.onAppMediaChange(t$1, e$1);
		}));
	}, t.prototype.onTemplateUpdate = function(t$1) {
		this.listeners.forEach((function(e$1) {
			return e$1.onTemplateUpdate && e$1.onTemplateUpdate(t$1);
		}));
	}, t.prototype.onTemplateCommit = function(t$1) {
		this.listeners.forEach((function(e$1) {
			return e$1.onTemplateCommit && e$1.onTemplateCommit(t$1);
		}));
	}, t.prototype.onTemplatesLoad = function(t$1, e$1) {
		this.listeners.forEach((function(r$1) {
			return r$1.onTemplatesLoad && r$1.onTemplatesLoad(t$1, e$1);
		}));
	}, t.prototype.onFontsLoad = function(t$1, e$1) {
		this.listeners.forEach((function(r$1) {
			return r$1.onFontsLoad && r$1.onFontsLoad(t$1, e$1);
		}));
	}, t.prototype.onVideoReady = function(t$1) {
		this.listeners.forEach((function(e$1) {
			return e$1.onVideoReady && e$1.onVideoReady(t$1);
		}));
	}, t.prototype.onTimerReady = function(t$1) {
		this.listeners.forEach((function(e$1) {
			return e$1.onTimerReady && e$1.onTimerReady(t$1);
		}));
	}, t.prototype.onStageElementSet = function(t$1) {
		this.listeners.forEach((function(e$1) {
			return e$1.onStageElementSet && e$1.onStageElementSet(t$1);
		}));
	}, t.prototype.onMediaElementSet = function(t$1) {
		this.listeners.forEach((function(e$1) {
			return e$1.onMediaElementSet && e$1.onMediaElementSet(t$1);
		}));
	}, t.prototype.onTimeUpdate = function(t$1) {
		var e$1 = this;
		this.listeners.forEach((function(e$2) {
			return e$2.onTimeUpdate && e$2.onTimeUpdate(t$1);
		})), this.position = t$1, this.throttledTimeUpdate || (this.throttledTimeUpdate = new Promise((function(t$2, r$1) {
			setTimeout((function() {
				e$1.onThrottledTimeUpdate(e$1.position), e$1.throttledTimeUpdate = null, t$2();
			}), e$1.throttleInterval);
		})));
	}, t.prototype.onThrottledTimeUpdate = function(t$1) {
		this.listeners.forEach((function(e$1) {
			return e$1.onThrottledTimeUpdate && e$1.onThrottledTimeUpdate(t$1);
		}));
	}, t.prototype.onBackgroundGraphicsUpdate = function(t$1) {
		this.listeners.forEach((function(e$1) {
			return e$1.onBackgroundGraphicsUpdate && e$1.onBackgroundGraphicsUpdate(t$1);
		}));
	}, t.prototype.onMediaSeek = function(t$1) {
		this.listeners.forEach((function(e$1) {
			return e$1.onMediaSeek && e$1.onMediaSeek(t$1);
		}));
	}, t.prototype.onVideoSeekStart = function() {
		this.listeners.forEach((function(t$1) {
			return t$1.onVideoSeekStart && t$1.onVideoSeekStart();
		}));
	}, t.prototype.onVideoSeekEnd = function() {
		this.listeners.forEach((function(t$1) {
			return t$1.onVideoSeekEnd && t$1.onVideoSeekEnd();
		}));
	}, t.prototype.onVideoSeek = function(t$1) {
		this.listeners.forEach((function(e$1) {
			return e$1.onVideoSeek && e$1.onVideoSeek(t$1);
		}));
	}, t.prototype.onPlay = function() {
		this.listeners.forEach((function(t$1) {
			return t$1.onPlay && t$1.onPlay();
		}));
	}, t.prototype.onPause = function() {
		this.listeners.forEach((function(t$1) {
			return t$1.onPause && t$1.onPause();
		}));
	}, t.prototype.onSeek = function(t$1) {
		this.listeners.forEach((function(e$1) {
			return e$1.onSeek && e$1.onSeek(t$1);
		}));
	}, t.prototype.onSeekComplete = function(t$1) {
		this.listeners.forEach((function(e$1) {
			return e$1.onSeekComplete && e$1.onSeekComplete(t$1);
		}));
	}, t.prototype.onStop = function() {
		this.listeners.forEach((function(t$1) {
			return t$1.onStop && t$1.onStop();
		}));
	}, t.prototype.onDispose = function() {
		this.listeners.forEach((function(t$1) {
			return t$1.onDispose && t$1.onDispose();
		}));
	}, t.prototype.onResize = function(t$1) {
		this.listeners.forEach((function(e$1) {
			return e$1.onResize && e$1.onResize(t$1);
		}));
	}, t.prototype.onVolumeUpdate = function(t$1) {
		this.listeners.forEach((function(e$1) {
			return e$1.onVolumeUpdate && e$1.onVolumeUpdate(t$1);
		}));
	}, t.prototype.addListener = function(t$1) {
		!t$1 || this.listeners.indexOf(t$1) >= 0 || this.listeners.push(t$1);
	}, t.prototype.removeListener = function(t$1) {
		var e$1 = !1;
		return this.listeners = this.listeners.filter((function(r$1) {
			var n$1 = r$1 === t$1;
			return e$1 = e$1 || n$1, !n$1;
		})), e$1;
	}, t;
}(), Sn = function() {
	function t(t$1, e$1, r$1) {
		var n$1 = this;
		this.player = t$1, this.manager = e$1, this.emitter = r$1, this._defaultBackgroundCss = null, this._background = null, t$1.addListener({ onStageElementSet: function(t$2) {
			return n$1.doUpdateBackground(n$1.background);
		} });
	}
	return Object.defineProperty(t.prototype, "background", {
		get: function() {
			return this._background;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "defaultBackgroundCss", {
		get: function() {
			return this._defaultBackgroundCss ? this._defaultBackgroundCss : "";
		},
		set: function(t$1) {
			this._defaultBackgroundCss = t$1, this.updateBackground(this._background);
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "ready", {
		get: function() {
			return null !== this._background;
		},
		enumerable: !1,
		configurable: !0
	}), t.prototype.settingBackground = function(t$1) {
		return yn(this, 0, void 0, (function() {
			return gn(this, (function(e$1) {
				switch (e$1.label) {
					case 0: return [4, this.doSetBackground(t$1)];
					case 1: return [2, e$1.sent() && this.doUpdateBackground(t$1)];
				}
			}));
		}));
	}, t.prototype.setBackground = function(t$1) {
		return yn(this, 0, void 0, (function() {
			var e$1;
			return gn(this, (function(r$1) {
				switch (r$1.label) {
					case 0: return [4, this.doSetBackground(t$1)];
					case 1: return [2, (e$1 = r$1.sent()) && this.updateBackground(e$1)];
				}
			}));
		}));
	}, t.prototype.doSetBackground = function(t$1) {
		return yn(this, 0, void 0, (function() {
			var e$1, r$1, n$1;
			return gn(this, (function(i$1) {
				switch (i$1.label) {
					case 0: return e$1 = t$1 && t$1.originalUrl ? t$1.originalUrl : "", this.manager.isBackgroundColorAsset(t$1) ? [2, {
						css: e$1,
						originalUrl: e$1
					}] : this.manager.isBackgroundPiaproImageAsset(t$1) ? [4, this.manager.read(e$1)] : [3, 2];
					case 1: return (r$1 = i$1.sent()) && r$1.url && this.manager.checkBackgroundImageLicense(r$1.license) ? (r$1.originalUrl = e$1, t$1 && (r$1.x = t$1.x, r$1.y = t$1.y), [2, r$1]) : [2, {
						css: "",
						originalUrl: e$1,
						x: t$1 ? t$1.x : void 0,
						y: t$1 ? t$1.y : void 0,
						license: r$1 ? r$1.license : void 0
					}];
					case 2: return this.manager.isBackgroundSpecialImageAsset(t$1) ? [2, {
						css: "url(\"https://api.textalive.jp/images/backgrounds/snowmiku2016/" + (n$1 = /^snowmiku2016-([0-9]{2})$/.exec(e$1))[1] + ".jpg\")",
						contentUrl: "https://api.textalive.jp/images/backgrounds/snowmiku2016/" + n$1[1] + ".jpg",
						url: "https://snowmiku.com/2016/info_chara.html",
						name: "SNOW MIKU 2016",
						authorName: "",
						originalUrl: e$1,
						x: t$1 ? t$1.x : void 0,
						y: t$1 ? t$1.y : void 0,
						defaultY: 0
					}] : [2, {
						originalUrl: null,
						css: "",
						x: t$1 ? t$1.x : void 0,
						y: t$1 ? t$1.y : void 0
					}];
				}
			}));
		}));
	}, t.prototype.updateBackground = function(t$1) {
		return !!this.doUpdateBackground(t$1) && (this.emitter && this.emitter.onBackgroundGraphicsUpdate && this.emitter.onBackgroundGraphicsUpdate(t$1), !0);
	}, t.prototype.doUpdateBackground = function(t$1) {
		if (!t$1) return !1;
		if (!this.player.stageElement) return this._background = t$1, !0;
		var e$1 = this.player.stageElement.style;
		return t$1.css.length <= 0 ? e$1.background = this.defaultBackgroundCss : e$1.background = t$1.css, "number" == typeof t$1.x || this._background && "number" == typeof this._background.x ? ("number" != typeof t$1.x && (t$1.x = this._background.x), e$1.backgroundPositionX = e$1.backgroundPositionX + "%") : e$1.backgroundPositionX = "number" == typeof t$1.defaultX ? t$1.defaultX + "%" : "center", "number" == typeof t$1.y || this._background && "number" == typeof this._background.y ? ("number" != typeof t$1.y && (t$1.y = this._background.y), e$1.backgroundPositionY = e$1.backgroundPositionY + "%") : e$1.backgroundPositionY = "number" == typeof t$1.defaultY ? t$1.defaultY + "%" : "center", e$1.backgroundSize = "cover", this._background = t$1, !0;
	}, t.prototype.export = function() {
		if (!this.background || !this.background.originalUrl) return null;
		var t$1 = { originalUrl: this.background.originalUrl };
		return void 0 !== this.background.x && (t$1.x = this.background.x), void 0 !== this.background.y && (t$1.y = this.background.y), t$1;
	}, t.prototype.exportPartialVideoEntry = function(t$1) {
		return { background: this.export() };
	}, t;
}();
function Tn(t, e$1, r$1) {
	return yn(this, 0, void 0, (function() {
		var n$1, i$1, o$1, s$1, a$1, u$1, c$1, l$1, p$1, h$1, d$1, f$1, y$1, g$1;
		return gn(this, (function(v$1) {
			switch (v$1.label) {
				case 0:
					if (n$1 = {
						loaded: [],
						failed: []
					}, "undefined" == typeof window || !window.document || !window.document.head) return n$1.failed = t.slice(), [2, n$1];
					for (i$1 = r$1.split("").filter((function(t$1, e$2, r$2) {
						return r$2.indexOf(t$1) === e$2;
					})).sort(), o$1 = !0, s$1 = 0, i$1.forEach((function(t$1) {
						var r$2 = e$1.indexOf(t$1, s$1);
						o$1 = o$1 && r$2 >= 0, s$1 = r$2;
					})), a$1 = window.document.head, u$1 = [], c$1 = 0; c$1 < a$1.children.length; c$1++) "link" === (l$1 = a$1.children.item(c$1)).tagName.toLowerCase() && "stylesheet" === l$1.getAttribute("rel") && u$1.push(l$1.getAttribute("href"));
					if (p$1 = [], h$1 = [], d$1 = [], t.forEach((function(t$1) {
						if (t$1.google) d$1.push(t$1.key);
						else {
							var e$2 = o$1 && t$1.compactUrl || t$1.url;
							u$1.includes(e$2) ? n$1.loaded.push(t$1) : (h$1.push(t$1.en), p$1.push(e$2));
						}
					})), f$1 = {
						classes: !1,
						active: null,
						inactive: null,
						fontactive: function(e$2) {
							n$1.loaded.push(t.find((function(t$1) {
								return t$1.en === e$2;
							}))), n$1.failed = n$1.failed.filter((function(t$1) {
								return t$1.en !== e$2;
							}));
						},
						fontinactive: function(e$2) {
							n$1.failed.push(t.find((function(t$1) {
								return t$1.en === e$2;
							})));
						},
						timeout: 5e3
					}, d$1.length > 0 && (f$1.google = { families: d$1 }), h$1.length > 0 && (f$1.custom = {
						families: h$1,
						urls: p$1
					}), !f$1.google && !f$1.custom) return [3, 6];
					v$1.label = 1;
				case 1: return v$1.trys.push([
					1,
					5,
					,
					6
				]), (g$1 = "undefined" != typeof window && (null === window || void 0 === window ? void 0 : window.WebFont)) ? [3, 3] : [4, import("./webfontloader-DlhxpZFT.js").then(__toDynamicImportESM(1))];
				case 2: g$1 = v$1.sent(), v$1.label = 3;
				case 3: return y$1 = g$1, [4, new Promise((function(t$1) {
					f$1.active = f$1.inactive = t$1, y$1.load(f$1);
				}))];
				case 4:
				case 5: return v$1.sent(), [3, 6];
				case 6: return [2, n$1];
			}
		}));
	}));
}
function xn(t, e$1) {
	return yn(this, 0, void 0, (function() {
		var r$1, n$1, i$1, o$1, s$1, a$1, u$1;
		return gn(this, (function(c$1) {
			switch (c$1.label) {
				case 0:
					if (r$1 = {
						loaded: [],
						failed: []
					}, !("undefined" != typeof window && window.document && window.document.head && window.Ts && window.Ts.loadFontAsync)) return r$1.failed = t.slice(), [2, r$1];
					for (n$1 = window.document.head, i$1 = {}, o$1 = function(t$1) {
						var e$2 = n$1.children.item(t$1);
						if ("style" !== e$2.tagName.toLowerCase() || "text/css" !== e$2.getAttribute("type") || "stylesheet" !== e$2.getAttribute("rel") || !e$2.hasAttribute("data-cssName")) return "continue";
						var r$2 = e$2.getAttribute("data-cssName");
						if (void 0 === i$1[r$2]) return i$1[r$2] = new Set(e$2.getAttribute("data-text")), "continue";
						e$2.getAttribute("data-text").split("").forEach((function(t$2) {
							return i$1[r$2].add(t$2);
						}));
					}, s$1 = 0; s$1 < n$1.children.length; s$1++) o$1(s$1);
					return a$1 = window.Ts, u$1 = [], t.forEach((function(t$1) {
						var n$2 = new Set(e$1 + t$1.en + t$1.ja);
						if (i$1[t$1.en] && i$1[t$1.en].forEach((function(t$2) {
							return n$2.delete(t$2);
						})), n$2.size <= 0) return r$1.loaded.push(t$1), r$1;
						u$1.push(new Promise((function(e$2) {
							return function(t$2, e$3, r$2, n$3, i$2) {
								var o$2 = e$3.en;
								t$2.loadFontAsync({
									cssName: o$2,
									text: n$3,
									outputType: "json",
									callback: function(t$3) {
										try {
											(function(t$4, e$4, r$3) {
												var n$4 = JSON.parse(r$3), i$3 = JSON.parse(n$4.res), o$3 = document.createElement("style");
												o$3.setAttribute("data-cssName", t$4), o$3.setAttribute("data-text", e$4), o$3.setAttribute("type", "text/css"), o$3.setAttribute("rel", "stylesheet"), o$3.innerHTML = "@font-face {font-family: '" + i$3.fontFamily + "';font-weight: " + i$3["font-weight"] + ";src: url(data:font/woff;base64," + i$3.src + ");}", document.head.appendChild(o$3);
											})(o$2, n$3, t$3.data), r$2.loaded.push(e$3);
										} catch (t$4) {
											r$2.failed.push(e$3);
										}
										i$2();
									}
								});
							}(a$1, t$1, r$1, Array.from(n$2.values()).join(""), e$2);
						})));
					})), [4, Promise.all(u$1)];
				case 1: return c$1.sent(), [2, r$1];
			}
		}));
	}));
}
var An = function(t) {
	function e$1(e$2, r$1) {
		var n$1 = this.constructor, i$1 = t.call(this, e$2) || this;
		return i$1.fonts = r$1, Object.setPrototypeOf(i$1, n$1.prototype), i$1;
	}
	return dn(e$1, t), e$1;
}(Error), Rn = function() {
	function t(t$1, e$1, r$1) {
		this.fontInfoManager = t$1, this.textFetcher = e$1, this.listener = r$1, this._failed = [], this._loaded = [];
	}
	return Object.defineProperty(t.prototype, "failed", {
		get: function() {
			return this._failed;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "loaded", {
		get: function() {
			return this._loaded;
		},
		enumerable: !1,
		configurable: !0
	}), t.prototype.loadAll = function() {
		return yn(this, 0, void 0, (function() {
			var t$1;
			return gn(this, (function(e$1) {
				switch (e$1.label) {
					case 0: return [4, this.listAvailableFonts()];
					case 1: return t$1 = e$1.sent(), [2, this.loadFonts(t$1)];
				}
			}));
		}));
	}, t.prototype.loadForVideo = function(t$1) {
		return yn(this, 0, void 0, (function() {
			var e$1, r$1;
			return gn(this, (function(n$1) {
				switch (n$1.label) {
					case 0: return (e$1 = this.listFontFamiliesInVideo(t$1)) ? [4, this.listAvailableFonts()] : (this.listener && this.listener.onFontsLoad && this.listener.onFontsLoad(this.loaded), [2, Promise.resolve(this.loaded)]);
					case 1: return r$1 = n$1.sent(), [2, this.loadFonts(r$1.filter((function(t$2) {
						return e$1.indexOf(t$2.en) >= 0;
					})))];
				}
			}));
		}));
	}, t.prototype.listFontFamiliesInVideo = function(t$1) {
		if (!t$1 || !t$1.phrases) return null;
		var e$1 = [];
		return t$1.phrases.forEach((function(t$2) {
			return t$2.words.forEach((function(t$3) {
				return t$3.characters.forEach((function(t$4) {
					return e$1.push(t$4.fontFamily);
				}));
			}));
		})), e$1.filter((function(t$2, e$2, r$1) {
			return r$1.indexOf(t$2) === e$2;
		}));
	}, t.prototype.listAvailableFonts = function() {
		return yn(this, 0, void 0, (function() {
			return gn(this, (function(t$1) {
				return [2, this.fontInfoManager.listAvailableFonts()];
			}));
		}));
	}, t.prototype.isLoading = function() {
		return !!this.queue;
	}, t.prototype.load = function(t$1) {
		return yn(this, 0, void 0, (function() {
			var e$1, r$1;
			return gn(this, (function(n$1) {
				switch (n$1.label) {
					case 0: return e$1 = [], r$1 = [], t$1.forEach((function(t$2) {
						"string" == typeof t$2 ? e$1.push(t$2) : r$1.push(t$2);
					})), [4, this.fontInfoManager.listAvailableFonts()];
					case 1: return n$1.sent().forEach((function(t$2) {
						e$1.indexOf(t$2.key) >= 0 && r$1.push(t$2);
					})), [2, this.loadFonts(r$1)];
				}
			}));
		}));
	}, t.prototype.loadFonts = function(t$1) {
		return yn(this, 0, void 0, (function() {
			var e$1 = this;
			return gn(this, (function(r$1) {
				return this.queue ? (this.listener && this.listener.onFontsLoad && this.listener.onFontsLoad(null, new An("Failed to load some fonts because there is an ongoing font loding process", this.failed.slice())), [2, this.loaded]) : (this.queue = this.doLoad(t$1).then((function(t$2) {
					return e$1.queue = null, t$2;
				})), [2, this.queue]);
			}));
		}));
	}, t.prototype.doLoad = function(t$1) {
		return yn(this, 0, void 0, (function() {
			var e$1, r$1, n$1, i$1, o$1 = this;
			return gn(this, (function(s$1) {
				switch (s$1.label) {
					case 0: return e$1 = [], r$1 = [], [4, this.fontInfoManager.getFrequentChars()];
					case 1: return n$1 = s$1.sent(), t$1.forEach((function(t$2) {
						t$2.typesquare || t$2.typekit || e$1.push(t$2), t$2.typesquare && r$1.push(t$2);
					})), i$1 = (this.textFetcher && this.textFetcher() || "").split("").filter((function(t$2, e$2, r$2) {
						return r$2.indexOf(t$2) === e$2;
					})).sort().join(""), [2, Promise.all([Tn(e$1, n$1, i$1), xn(r$1, i$1)]).then((function(t$2) {
						var e$2 = t$2[0], r$2 = t$2[1], n$2 = e$2.loaded.concat(r$2.loaded);
						if (o$1.addLoadedFonts(n$2), e$2.failed.length > 0 || r$2.failed.length > 0) {
							var i$2 = e$2.failed.concat(r$2.failed);
							o$1.addFailedFonts(i$2), o$1.listener && o$1.listener.onFontsLoad && o$1.listener.onFontsLoad(null, new An("Failed to load some fonts", o$1.failed.slice()));
						} else o$1.listener && o$1.listener.onFontsLoad && o$1.listener.onFontsLoad(n$2);
						return o$1.loaded;
					})).catch((function(t$2) {
						return o$1.listener && o$1.listener.onFontsLoad && o$1.listener.onFontsLoad(null, new An(t$2, o$1.failed.slice())), o$1.loaded;
					}))];
				}
			}));
		}));
	}, t.prototype.addLoadedFonts = function(t$1) {
		var e$1 = this;
		this._loaded = this.loaded.concat(t$1.filter((function(t$2) {
			return e$1.failed.findIndex((function(e$2) {
				return e$2.key === t$2.key;
			})) < 0;
		})));
	}, t.prototype.addFailedFonts = function(t$1) {
		var e$1 = this;
		this._failed = this.failed.concat(t$1.filter((function(t$2) {
			return e$1.failed.findIndex((function(e$2) {
				return e$2.key === t$2.key;
			})) < 0;
		})));
	}, t;
}(), Cn = function() {
	function t() {}
	return Object.defineProperty(t.prototype, "duration", {
		get: function() {
			return this.endTime - this.startTime;
		},
		enumerable: !1,
		configurable: !0
	}), t.prototype.contains = function(t$1) {
		return t$1 >= this.startTime && t$1 <= this.endTime;
	}, t.prototype.overlaps = function(t$1, e$1) {
		if ("object" == typeof t$1) return this.overlaps(t$1.startTime, t$1.endTime);
		var r$1 = t$1;
		return this.contains(r$1) || this.contains(e$1) || this.startTime <= r$1 && this.endTime >= e$1;
	}, t.prototype.progress = function(t$1) {
		return this.contains(t$1) ? this.startTime === this.endTime ? 0 : (t$1 - this.startTime) / (this.endTime - this.startTime) : -1;
	}, t;
}(), Nn = function(t) {
	function e$1() {
		var e$2 = t.call(this) || this;
		return e$2.previous = e$2.next = null, e$2;
	}
	return dn(e$1, t), Object.defineProperty(e$1.prototype, "endTime", {
		get: function() {
			return this.next ? this.next.startTime : this.startTime;
		},
		enumerable: !1,
		configurable: !0
	}), e$1;
}(Cn), kn = function(t) {
	function e$1() {
		var e$2 = t.call(this) || this;
		return e$2.previous = e$2.next = null, e$2;
	}
	return dn(e$1, t), e$1;
}(Cn), jn = function(t) {
	function e$1() {
		var e$2 = t.call(this) || this;
		return e$2.previous = e$2.next = null, e$2;
	}
	return dn(e$1, t), e$1;
}(Cn), In = function(t) {
	function e$1() {
		var e$2 = t.call(this) || this;
		return e$2.previous = e$2.next = null, e$2;
	}
	return dn(e$1, t), e$1;
}(Cn), Un = function() {
	function t(t$1) {
		var e$1 = t$1.analysis, r$1 = t$1.info;
		this.beats = [], this.chords = [], this.segments = [], this.voice = [], this._revisions = {
			beatId: (null == r$1 ? void 0 : r$1.beatRevisionId) || -1,
			chordId: (null == r$1 ? void 0 : r$1.chordRevisionId) || -1,
			repetitiveSegmentId: (null == r$1 ? void 0 : r$1.chorusRevisionId) || -1
		}, this.parseBeats(null == e$1 ? void 0 : e$1.beats), this.parseSegments(null == e$1 ? void 0 : e$1.repetitive_segment), this.parseChords(null == e$1 ? void 0 : e$1.chords), this.parseVoice(e$1.voice);
	}
	return Object.defineProperty(t.prototype, "revisions", {
		get: function() {
			return this._revisions;
		},
		enumerable: !1,
		configurable: !0
	}), t.prototype.parseBeats = function(t$1) {
		var e$1 = this;
		if (this.beats.splice(0, this.beats.length), Array.isArray(t$1) && Array.isArray(t$1[0])) {
			var r$1 = null, n$1 = 0;
			t$1[0].forEach((function(t$2) {
				var i$1 = new Nn();
				i$1.startTime = 1e3 * t$2[0], i$1.length = t$2[2], i$1.position = t$2[3], i$1.previous = r$1, null !== r$1 && (r$1.next = i$1), i$1.index = n$1++, e$1.beats.push(i$1), r$1 = i$1;
			})), null !== r$1 && (r$1.next = null);
		}
	}, t.prototype.parseChords = function(t$1) {
		var e$1 = this;
		if (this.chords.splice(0, this.chords.length), Array.isArray(t$1)) {
			var r$1 = null, n$1 = 0;
			t$1.forEach((function(t$2) {
				var i$1 = new kn();
				i$1.startTime = 1e3 * t$2[0], i$1.endTime = 1e3 * t$2[1], i$1.name = t$2[2], i$1.previous = r$1, null !== r$1 && (r$1.next = i$1), i$1.index = n$1++, e$1.chords.push(i$1), r$1 = i$1;
			})), null !== r$1 && (r$1.next = null);
		}
	}, t.prototype.parseSegments = function(t$1) {
		var e$1 = this;
		this.segments.splice(0, this.segments.length), Array.isArray(t$1) && t$1.forEach((function(t$2) {
			var r$1 = {
				chorus: !!t$2.chorus,
				duration: 10 * t$2.segment_length,
				segments: null
			}, n$1 = null, i$1 = 0;
			r$1.segments = t$2.start_frames.map((function(t$3) {
				var e$2 = new jn();
				return e$2.startTime = 10 * t$3, e$2.endTime = e$2.startTime + r$1.duration, e$2.previous = n$1, null !== n$1 && (n$1.next = e$2), e$2.index = i$1++, n$1 = e$2, e$2;
			})), null !== n$1 && (n$1.next = null), e$1.segments.push(r$1);
		}));
	}, t.prototype.parseVoice = function(t$1) {
		var e$1 = this;
		this.voice.splice(0, this.voice.length), Array.isArray(t$1) && t$1.forEach((function(t$2) {
			var r$1 = [], n$1 = null, i$1 = 0, o$1 = 0;
			t$2.forEach((function(t$3) {
				var e$2 = new In();
				e$2.startTime = o$1, e$2.endTime = e$2.startTime + 10 * t$3[1], e$2.f0 = t$3[0][0], e$2.initialF0 = t$3[0][1], e$2.previous = n$1, null !== n$1 && (n$1.next = e$2), e$2.index = i$1++, r$1.push(e$2), n$1 = e$2, o$1 = e$2.endTime;
			})), null !== n$1 && (n$1.next = null), e$1.voice.push(r$1);
		}));
	}, t;
}(), Fn = function() {
	function t(t$1) {
		var e$1 = t$1.song, r$1 = t$1.analysis, n$1 = t$1.vocalAmplitude, i$1 = t$1.maxVocalAmplitude, o$1 = t$1.valenceArousal;
		this._song = e$1, this._analysis = r$1, this._vocalAmplitude = n$1, this._maxVocalAmplitude = i$1, this._valenceArousal = o$1;
	}
	return Object.defineProperty(t.prototype, "song", {
		get: function() {
			return this._song;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "analysis", {
		get: function() {
			return this._analysis;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "vocalAmplitude", {
		get: function() {
			return this._vocalAmplitude;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "maxVocalAmplitude", {
		get: function() {
			return this._maxVocalAmplitude;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "valenceArousal", {
		get: function() {
			return this._valenceArousal;
		},
		enumerable: !1,
		configurable: !0
	}), t.prototype.getChoruses = function() {
		var t$1;
		if (!this._analysis) return [];
		var e$1 = this._analysis.segments.filter((function(t$2) {
			return t$2.chorus;
		}));
		return e$1.length <= 0 ? [] : (null === (t$1 = e$1[0].segments) || void 0 === t$1 ? void 0 : t$1.slice()) || [];
	}, t.prototype.findChorus = function(t$1, e$1) {
		return st(this.getChoruses(), t$1, e$1);
	}, t.prototype.findChorusBetween = function(t$1, e$1) {
		return this.findChorus(t$1, { endTime: e$1 });
	}, t.prototype.findChorusChange = function(t$1, e$1) {
		return at(this.getChoruses(), t$1, e$1);
	}, t.prototype.getBeats = function() {
		var t$1, e$1;
		return (null === (e$1 = null === (t$1 = this._analysis) || void 0 === t$1 ? void 0 : t$1.beats) || void 0 === e$1 ? void 0 : e$1.slice()) || [];
	}, t.prototype.findBeat = function(t$1, e$1) {
		return st(this.getBeats(), t$1, e$1);
	}, t.prototype.findBeatChange = function(t$1, e$1) {
		return at(this.getBeats(), t$1, e$1);
	}, t.prototype.getChords = function() {
		var t$1, e$1;
		return (null === (e$1 = null === (t$1 = this._analysis) || void 0 === t$1 ? void 0 : t$1.chords) || void 0 === e$1 ? void 0 : e$1.slice()) || [];
	}, t.prototype.findChord = function(t$1, e$1) {
		return st(this.getChords(), t$1, e$1);
	}, t.prototype.findChordChange = function(t$1, e$1) {
		return at(this.getChords(), t$1, e$1);
	}, t.prototype.getVocalFrequency = function(t$1) {
		var e$1;
		if (!Array.isArray(null === (e$1 = this._analysis) || void 0 === e$1 ? void 0 : e$1.voice)) return -1;
		var n$1 = this._analysis.voice[0];
		if (n$1.length <= 0) return -1;
		var i$1 = r.sortedIndex(n$1, t$1, (function(t$2) {
			return t$2.endTime;
		}));
		return n$1[i$1].contains(t$1) ? n$1[i$1].f0 : -1;
	}, t.prototype.getVocalAmplitude = function(t$1) {
		var e$1 = this._vocalAmplitude, r$1 = Math.round(t$1 / 10);
		return !Array.isArray(this._vocalAmplitude) || r$1 < 0 || r$1 >= e$1.length ? -1 : this._vocalAmplitude[r$1];
	}, t.prototype.getMaxVocalAmplitude = function() {
		return "number" == typeof this._maxVocalAmplitude ? this._maxVocalAmplitude : -1;
	}, t.prototype.getValenceArousal = function(t$1) {
		var e$1 = this._valenceArousal;
		if (!e$1) return null;
		var n$1 = r.sortedIndex(e$1.seq, t$1, (function(t$2) {
			return 1e3 * t$2.t[1];
		}));
		if (n$1 < 0) return {
			a: e$1.seq[0].a,
			v: e$1.seq[0].v
		};
		if (n$1 + 1 >= e$1.seq.length || t$1 < 1e3 * e$1.seq[n$1 + 1].t[0]) return {
			a: e$1.seq[Math.min(n$1, e$1.seq.length - 1)].a,
			v: e$1.seq[Math.min(n$1, e$1.seq.length - 1)].v
		};
		var i$1 = e$1.seq[n$1], o$1 = e$1.seq[n$1 + 1], s$1 = t$1 / 1e3, a$1 = o$1.t[0], u$1 = i$1.t[1], c$1 = u$1 - a$1;
		return {
			a: (i$1.a * (u$1 - s$1) + o$1.a * (s$1 - a$1)) / c$1,
			v: (i$1.v * (u$1 - s$1) + o$1.v * (s$1 - a$1)) / c$1
		};
	}, t.prototype.getMedianValenceArousal = function() {
		var t$1 = this._valenceArousal;
		return t$1 ? t$1.stats.median : null;
	}, t;
}(), Ln = function() {
	function t(t$1, e$1, r$1) {
		this.songManager = t$1, this.options = r$1, this.listener = e$1;
	}
	return Object.defineProperty(t.prototype, "song", {
		get: function() {
			return this._song;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "analysis", {
		get: function() {
			return this._analysis;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "vocalAmplitude", {
		get: function() {
			return this._vocalAmplitude;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "maxVocalAmplitude", {
		get: function() {
			return this._maxVocalAmplitude;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "valenceArousal", {
		get: function() {
			return this._valenceArousal;
		},
		enumerable: !1,
		configurable: !0
	}), t.prototype.loadSong = function(t$1, e$1) {
		var r$1, n$1, i$1;
		return yn(this, 0, void 0, (function() {
			var o$1, s$1;
			return gn(this, (function(a$1) {
				switch (a$1.label) {
					case 0: return "number" == typeof t$1 && t$1 < 0 || !t$1 ? (this.onSongLoad(null, /* @__PURE__ */ new Error("Neither Songle ID or code provided")), [2, null]) : [4, this.songManager.load("number" == typeof t$1 ? { id: t$1 } : { code: t$1 })];
					case 1: return o$1 = a$1.sent(), this.onSongLoad(o$1, o$1 ? void 0 : /* @__PURE__ */ new Error("Song data not found")), o$1 ? (s$1 = {
						chord: null == e$1 ? void 0 : e$1.chordId,
						beat: null == e$1 ? void 0 : e$1.beatId,
						chorus: null == e$1 ? void 0 : e$1.repetitiveSegmentId
					}, [4, Promise.all([
						(null === (r$1 = this.options) || void 0 === r$1 ? void 0 : r$1.vocalFrequencyEnabled) ? this.loadSongDetailInfo(o$1.song.code, { revisions: s$1 }) : this.loadSongInfo(o$1.song.code, { revisions: s$1 }),
						(null === (n$1 = this.options) || void 0 === n$1 ? void 0 : n$1.vocalAmplitudeEnabled) ? this.loadVocalAmplitude(o$1.song.code) : Promise.resolve(null),
						(null === (i$1 = this.options) || void 0 === i$1 ? void 0 : i$1.valenceArousalEnabled) ? this.loadValenceArousal(o$1.song.code) : Promise.resolve(null)
					])]) : [2, null];
					case 2: return a$1.sent(), [2, new Fn(this)];
				}
			}));
		}));
	}, t.prototype.onSongLoad = function(t$1, e$1) {
		this._song = t$1, this.listener && this.listener.onSongLoad && this.listener.onSongLoad(t$1, e$1);
	}, t.prototype.loadSongInfo = function(t$1, e$1) {
		return yn(this, 0, void 0, (function() {
			var r$1;
			return gn(this, (function(n$1) {
				switch (n$1.label) {
					case 0: return [4, this.songManager.loadInfo(String(t$1), e$1)];
					case 1: return r$1 = n$1.sent(), this.onSongMapLoad(r$1, r$1 ? void 0 : /* @__PURE__ */ new Error("Song analysis data not found")), [2, r$1];
				}
			}));
		}));
	}, t.prototype.loadSongDetailInfo = function(t$1, e$1) {
		return yn(this, 0, void 0, (function() {
			var r$1;
			return gn(this, (function(n$1) {
				switch (n$1.label) {
					case 0: return [4, this.songManager.loadDetailInfo(String(t$1), e$1)];
					case 1: return r$1 = n$1.sent(), this.onSongMapLoad(r$1, r$1 ? void 0 : /* @__PURE__ */ new Error("Song analysis data not found")), [2, r$1];
				}
			}));
		}));
	}, t.prototype.mockSongInfo = function(t$1) {
		var e$1 = function(t$2) {
			for (var e$2 = t$2.beat, r$1 = t$2.chorusSegment, n$1 = t$2.duration, i$1 = [], o$1 = 0; 60 * o$1 / e$2.bpm < n$1 / 1e3;) i$1.push([
				60 * o$1 / e$2.bpm,
				1,
				e$2.length,
				o$1 % e$2.length + 1,
				1
			]), o$1++;
			return {
				beats: [i$1],
				chords: null,
				repetitive_segment: [{
					chorus: !0,
					index: 0,
					segment_length: r$1.duration / 10,
					start_frames: r$1.startTimes.map((function(t$3) {
						return t$3 / 10;
					}))
				}],
				voice: null
			};
		}(t$1);
		return this._song = null, this.onSongMapLoad({
			analysis: e$1,
			info: null
		}), new Fn(this);
	}, t.prototype.onSongMapLoad = function(t$1, e$1) {
		var r$1, n$1;
		this._analysis = new Un(t$1), !(null === (r$1 = this.listener) || void 0 === r$1) && r$1.onSongMapLoad && this.listener.onSongMapLoad(this._analysis, e$1), !(null === (n$1 = this.listener) || void 0 === n$1) && n$1.onSongInfoLoad && this.listener.onSongInfoLoad(t$1, e$1);
	}, t.prototype.loadVocalAmplitude = function(t$1) {
		var e$1;
		return yn(this, 0, void 0, (function() {
			var r$1;
			return gn(this, (function(n$1) {
				switch (n$1.label) {
					case 0: return r$1 = this, [4, this.songManager.loadVocalAmplitude(String(t$1))];
					case 1: return r$1._vocalAmplitude = n$1.sent(), this._maxVocalAmplitude = Math.max.apply(Math, this._vocalAmplitude), !(null === (e$1 = this.listener) || void 0 === e$1) && e$1.onVocalAmplitudeLoad && this.listener.onVocalAmplitudeLoad(this._vocalAmplitude, this._vocalAmplitude ? void 0 : /* @__PURE__ */ new Error("Vocal amplitude data not found")), [2, this._vocalAmplitude];
				}
			}));
		}));
	}, t.prototype.loadValenceArousal = function(t$1) {
		var e$1;
		return yn(this, 0, void 0, (function() {
			var r$1;
			return gn(this, (function(n$1) {
				switch (n$1.label) {
					case 0: return r$1 = this, [4, this.songManager.loadValenceArousal(String(t$1))];
					case 1: return r$1._valenceArousal = n$1.sent(), !(null === (e$1 = this.listener) || void 0 === e$1) && e$1.onValenceArousalLoad && this.listener.onValenceArousalLoad(this._valenceArousal, this._valenceArousal ? void 0 : /* @__PURE__ */ new Error("Valence arousal data not found")), [2, this._valenceArousal];
				}
			}));
		}));
	}, t;
}(), Dn = function() {
	function t(t$1, e$1, r$1) {
		this.managers = t$1, this.listener = e$1, this.options = r$1;
	}
	return t.prototype.loadRawText = function(t$1) {
		var e$1;
		return e$1 = !t$1.phrases || t$1.phrases.length < 0 ? "" : t$1.phrases.map((function(t$2) {
			return t$2.words.map((function(t$3) {
				return t$3.characters.map((function(t$4) {
					return t$4.char;
				})).join("");
			})).join("");
		})).join(""), this.onTextLoad({ text: e$1 }), {
			lyricsId: -1,
			lyrics: null,
			lyricsBody: {
				text: e$1,
				artist: null,
				name: null,
				url: null
			}
		};
	}, t.prototype.loadLyrics = function(t$1) {
		var e$1 = t$1.songCode, r$1 = t$1.lyricId, n$1 = void 0 === r$1 ? -1 : r$1, i$1 = t$1.lyricDiffId, o$1 = void 0 === i$1 ? -1 : i$1, s$1 = t$1.altLyricsUrl, a$1 = t$1.directAccess;
		return yn(this, 0, void 0, (function() {
			var t$2, r$2, i$2, u$1;
			return gn(this, (function(c$1) {
				switch (c$1.label) {
					case 0: return n$1 <= 0 ? (0 === n$1 ? this.onLyricsLoad(null, /* @__PURE__ */ new Error("Lyrics not loaded")) : this.onLyricsLoad(null, /* @__PURE__ */ new Error("Lyrics not found")), [2, null]) : [4, this.managers.lyrics.loadDiff(e$1, n$1, o$1)];
					case 1: return (null == (t$2 = c$1.sent()) ? void 0 : t$2.data) ? (r$2 = fn(fn({}, t$2), {
						processing: !1,
						failed: !1,
						id: n$1,
						diff: { id: o$1 }
					}), this.onLyricsLoad(r$2), s$1 || a$1 ? [3, 3] : [4, this.managers.lyrics.fetchLocalLyricBody(n$1)]) : (this.onLyricsLoad(null, /* @__PURE__ */ new Error("Lyrics timing information not found")), [2, null]);
					case 2: i$2 = c$1.sent(), c$1.label = 3;
					case 3:
						if (null == i$2 ? void 0 : i$2.text) return [3, 7];
						c$1.label = 4;
					case 4: return c$1.trys.push([
						4,
						6,
						,
						7
					]), [4, this.loadLyricsText(t$2, {
						altLyricsUrl: s$1,
						directAccess: a$1
					})];
					case 5: return i$2 = c$1.sent(), [3, 7];
					case 6: return u$1 = c$1.sent(), this.onTextLoad(null, u$1), [3, 7];
					case 7: return i$2 && this.onTextLoad(i$2), [2, {
						lyricsId: r$2.id,
						lyrics: r$2,
						lyricsBody: i$2
					}];
				}
			}));
		}));
	}, t.prototype.loadLyricsText = function(t$1, e$1) {
		var r$1 = void 0 === e$1 ? {} : e$1, n$1 = r$1.altLyricsUrl, i$1 = r$1.directAccess;
		return yn(this, 0, void 0, (function() {
			var e$2, r$2, o$1 = this;
			return gn(this, (function(s$1) {
				switch (s$1.label) {
					case 0: return e$2 = this.options && "number" == typeof this.options.lyricsFetchTimeout && this.options.lyricsFetchTimeout >= 0, r$2 = this.managers.lyrics.fetchLyricBody(n$1 || t$1.url, {
						parserPath: t$1.parser_path,
						directAccess: i$1
					}), [4, e$2 ? Promise.race([r$2, new Promise((function(t$2, e$3) {
						return setTimeout((function() {
							return e$3(/* @__PURE__ */ new Error("Fetching lyrics text timeout"));
						}), o$1.options.lyricsFetchTimeout);
					}))]) : r$2];
					case 1: return [2, s$1.sent()];
				}
			}));
		}));
	}, t.prototype.onLyricsLoad = function(t$1, e$1) {
		this.listener && this.listener.onLyricsLoad && this.listener.onLyricsLoad(t$1, e$1);
	}, t.prototype.onTextLoad = function(t$1, e$1) {
		this.listener && this.listener.onTextLoad && this.listener.onTextLoad(t$1, e$1);
	}, t;
}(), Mn = function() {
	function t(t$1) {
		this._video = t$1.video;
	}
	return Object.defineProperty(t.prototype, "video", {
		get: function() {
			return this._video;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "data", {
		get: function() {
			return this._video.json;
		},
		enumerable: !1,
		configurable: !0
	}), t;
}(), Bn = function() {
	function t(t$1, e$1) {
		this.managers = t$1, this.listener = e$1, this.listener = e$1;
	}
	return Object.defineProperty(t.prototype, "video", {
		get: function() {
			return this._video;
		},
		enumerable: !1,
		configurable: !0
	}), t.prototype.onVideoLoad = function(t$1, e$1) {
		var r$1 = t$1 ? Object.assign(t$1, e$1) : null;
		return r$1 && ("string" == typeof r$1.json ? r$1.json = JSON.parse(r$1.json) : "object" == typeof r$1.json && null !== r$1.json || (r$1.json = {}), "string" == typeof r$1.config ? r$1.config = JSON.parse(r$1.config) : "object" == typeof r$1.config && null !== r$1.config || (r$1.config = {})), this._video = r$1, this.listener && this.listener.onVideoLoad && this.listener.onVideoLoad(r$1), new Mn({ video: r$1 });
	}, t.prototype.createFromVideoId = function(t$1, e$1) {
		return yn(this, 0, void 0, (function() {
			var r$1;
			return gn(this, (function(n$1) {
				switch (n$1.label) {
					case 0: return [4, this.managers.video.load(t$1)];
					case 1: return r$1 = n$1.sent(), [2, this.onVideoLoad(r$1, e$1)];
				}
			}));
		}));
	}, t.prototype.createFromVideo = function(t$1, e$1) {
		return this.onVideoLoad(t$1, e$1);
	}, t.prototype.createFromSongUrl = function(t$1, e$1) {
		return yn(this, 0, void 0, (function() {
			return gn(this, (function(r$1) {
				return [2, this.createFromSongPath(this.managers.song.getSongPathFromUrl(t$1), e$1)];
			}));
		}));
	}, t.prototype.createFromSongPath = function(t$1, e$1) {
		return yn(this, 0, void 0, (function() {
			var r$1;
			return gn(this, (function(n$1) {
				switch (n$1.label) {
					case 0: return [4, this.managers.song.load({ songPath: t$1 })];
					case 1: return (r$1 = n$1.sent()) ? [2, this.createFromSong(r$1.song, e$1)] : [2, null];
				}
			}));
		}));
	}, t.prototype.createFromSongId = function(t$1, e$1) {
		return yn(this, 0, void 0, (function() {
			var r$1;
			return gn(this, (function(n$1) {
				switch (n$1.label) {
					case 0: return [4, this.managers.song.load({ id: t$1 })];
					case 1: return (r$1 = n$1.sent()) ? [2, this.createFromSong(r$1.song, e$1)] : [2, null];
				}
			}));
		}));
	}, t.prototype.createFromSongCode = function(t$1, e$1) {
		return yn(this, 0, void 0, (function() {
			var r$1;
			return gn(this, (function(n$1) {
				switch (n$1.label) {
					case 0: return [4, this.managers.song.load({ code: t$1 })];
					case 1: return (r$1 = n$1.sent()) ? [2, this.createFromSong(r$1.song, e$1)] : [2, null];
				}
			}));
		}));
	}, t.prototype.createFromSong = function(t$1, e$1) {
		var r$1;
		return yn(this, 0, void 0, (function() {
			var n$1, i$1, o$1, s$1, a$1, u$1;
			return gn(this, (function(c$1) {
				switch (c$1.label) {
					case 0: return n$1 = null == e$1 ? void 0 : e$1.lyricId, i$1 = null == e$1 ? void 0 : e$1.lyricDiffId, "number" != typeof n$1 || n$1 < 0 ? [4, this.managers.lyrics.load(t$1.code)] : [3, 4];
					case 1: return o$1 = c$1.sent(), (a$1 = o$1 && !o$1.status.failed && !o$1.status.processing && Array.isArray(o$1.lyrics) && o$1.lyrics.length > 0) ? [4, this.managers.lyrics.loadDetail(t$1.code, o$1.lyrics[0].id)] : [3, 3];
					case 2: a$1 = c$1.sent(), c$1.label = 3;
					case 3: (s$1 = a$1) && (n$1 = s$1.id, i$1 = null === (r$1 = s$1.diff) || void 0 === r$1 ? void 0 : r$1.id), c$1.label = 4;
					case 4: return "number" != typeof n$1 && (n$1 = -1), "number" != typeof i$1 && (i$1 = -1), u$1 = {
						id: -1,
						sourceId: -1,
						sourceOriginId: -1,
						songleId: t$1.id,
						songleCode: t$1.code,
						lyricId: n$1,
						lyricDiffId: i$1,
						title: null,
						log: null,
						background: null,
						config: null,
						json: null,
						synthJson: null,
						author: null,
						createdDate: null,
						accessCount: -1,
						altUrl: null
					}, [2, this.onVideoLoad(u$1, e$1)];
				}
			}));
		}));
	}, t.prototype.createFromText = function(t$1, e$1) {
		return yn(this, 0, void 0, (function() {
			var r$1, n$1, i$1, o$1, s$1, a$1;
			return gn(this, (function(u$1) {
				switch (u$1.label) {
					case 0: return [4, this.managers.text.parse(t$1)];
					case 1: return r$1 = u$1.sent(), n$1 = r$1 && "success" === r$1.status ? this.createVideoDataFromParsedText(r$1, t$1) : this.createVideoDataFromText(t$1), i$1 = n$1[n$1.length - 1], o$1 = i$1 && i$1.words[i$1.words.length - 1], s$1 = o$1 && o$1.characters[o$1.characters.length - 1], a$1 = s$1 ? s$1.endTime : 0, [2, this.createFromJSON({
						phrases: n$1,
						startTime: 0,
						endTime: a$1,
						duration: a$1
					}, e$1)];
				}
			}));
		}));
	}, t.prototype.createFromJSON = function(t$1, e$1) {
		var r$1 = {
			id: -1,
			sourceId: -1,
			sourceOriginId: -1,
			songleId: -1,
			lyricId: -1,
			lyricDiffId: -1,
			title: null,
			log: null,
			background: null,
			config: null,
			json: t$1,
			synthJson: null,
			author: null,
			createdDate: null,
			accessCount: -1,
			altUrl: null
		};
		return this.onVideoLoad(r$1, e$1);
	}, t.prototype.createVideoDataFromParsedText = function(t$1, e$1) {
		var r$1 = 0, n$1 = e$1.split(/\r\n|[\n\v\f\r\x85\u2028\u2029]/);
		return t$1.result.map((function(t$2, e$2) {
			return {
				words: t$2.map((function(t$3) {
					return {
						characters: n$1[e$2].substr(t$3.startPosition, t$3.wordLength).split("").map((function(t$4) {
							return {
								char: t$4,
								startTime: 300 * r$1,
								endTime: 300 * ++r$1
							};
						})),
						pos: t$3.PoS,
						rawPoS: t$3.rawPoS,
						language: t$3.language
					};
				})),
				templates: [{ type: "DefaultAlignment" }]
			};
		}));
	}, t.prototype.createVideoDataFromText = function(t$1) {
		for (var e$1, r$1 = { characters: [] }, n$1 = {
			words: [r$1],
			templates: [{ type: "DefaultAlignment" }]
		}, i$1 = 0, o$1 = [n$1], s$1 = 0; s$1 < t$1.length; s$1++) {
			var a$1 = t$1.charAt(s$1);
			"\n" !== a$1 ? " " !== a$1 ? (e$1 = {
				char: a$1,
				startTime: 300 * i$1,
				endTime: 300 * ++i$1
			}, r$1.characters.push(e$1)) : (r$1 = { characters: [] }, n$1.words.push(r$1)) : (n$1 = {
				words: [r$1 = { characters: [] }],
				templates: [{ type: "DefaultAlignment" }]
			}, o$1.push(n$1));
		}
		return r$1.characters.length <= 0 && n$1.words.pop(), n$1.words.length <= 0 && o$1.pop(), o$1;
	}, t;
}(), Vn = function() {
	function t(t$1, e$1, r$1) {
		void 0 === e$1 && (e$1 = null);
		var n$1 = this;
		this.managers = t$1, this.listener = e$1, this.options = r$1, this.fontLoader = new Rn(t$1.font, (function() {
			return n$1.text;
		}), e$1);
	}
	return Object.defineProperty(t.prototype, "permalink", {
		get: function() {
			var t$1;
			return "https://textalive.jp".concat((null === (t$1 = this.song) || void 0 === t$1 ? void 0 : t$1.permalink) ? "/songs/".concat(encodeURIComponent(c.getSongPathFromUrl(this.song.permalink))) : "");
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "video", {
		get: function() {
			var t$1;
			return null === (t$1 = this.videoProvider) || void 0 === t$1 ? void 0 : t$1.video;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "song", {
		get: function() {
			var t$1, e$1;
			return null === (e$1 = null === (t$1 = this.songProvider) || void 0 === t$1 ? void 0 : t$1.song) || void 0 === e$1 ? void 0 : e$1.song;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "songStatus", {
		get: function() {
			var t$1, e$1;
			return null === (e$1 = null === (t$1 = this.songProvider) || void 0 === t$1 ? void 0 : t$1.song) || void 0 === e$1 ? void 0 : e$1.status;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "songMap", {
		get: function() {
			var t$1;
			return null === (t$1 = this.songProvider) || void 0 === t$1 ? void 0 : t$1.analysis;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "lyricsId", {
		get: function() {
			var t$1, e$1;
			return null === (e$1 = null === (t$1 = this.textProvider) || void 0 === t$1 ? void 0 : t$1.lyrics) || void 0 === e$1 ? void 0 : e$1.id;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "lyrics", {
		get: function() {
			var t$1;
			return null === (t$1 = this.textProvider) || void 0 === t$1 ? void 0 : t$1.lyrics;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "lyricsBody", {
		get: function() {
			var t$1;
			return null === (t$1 = this.textProvider) || void 0 === t$1 ? void 0 : t$1.lyricsBody;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "text", {
		get: function() {
			var t$1, e$1;
			return null === (e$1 = null === (t$1 = this.textProvider) || void 0 === t$1 ? void 0 : t$1.lyricsBody) || void 0 === e$1 ? void 0 : e$1.text;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "fonts", {
		get: function() {
			return this.fontLoader;
		},
		enumerable: !1,
		configurable: !0
	}), t.prototype.createFromVideoId = function(t$1, e$1) {
		return yn(this, 0, void 0, (function() {
			var r$1;
			return gn(this, (function(n$1) {
				switch (n$1.label) {
					case 0: return r$1 = this, [4, new Bn(this.managers, this.listener).createFromVideoId(t$1, e$1)];
					case 1: return r$1.videoProvider = n$1.sent(), [2, this.videoProvider];
				}
			}));
		}));
	}, t.prototype.createFromVideo = function(t$1, e$1) {
		return this.videoProvider = new Bn(this.managers, this.listener).createFromVideo(t$1, e$1), this.videoProvider;
	}, t.prototype.createFromSongUrl = function(t$1, e$1) {
		return yn(this, 0, void 0, (function() {
			var r$1;
			return gn(this, (function(n$1) {
				switch (n$1.label) {
					case 0: return r$1 = this, [4, new Bn(this.managers, this.listener).createFromSongUrl(t$1, e$1)];
					case 1: return r$1.videoProvider = n$1.sent(), [2, this.videoProvider];
				}
			}));
		}));
	}, t.prototype.createFromSongPath = function(t$1, e$1) {
		return yn(this, 0, void 0, (function() {
			var r$1;
			return gn(this, (function(n$1) {
				switch (n$1.label) {
					case 0: return r$1 = this, [4, new Bn(this.managers, this.listener).createFromSongPath(t$1, e$1)];
					case 1: return r$1.videoProvider = n$1.sent(), [2, this.videoProvider];
				}
			}));
		}));
	}, t.prototype.createFromSongId = function(t$1, e$1) {
		return yn(this, 0, void 0, (function() {
			var r$1;
			return gn(this, (function(n$1) {
				switch (n$1.label) {
					case 0: return r$1 = this, [4, new Bn(this.managers, this.listener).createFromSongId(t$1, e$1)];
					case 1: return r$1.videoProvider = n$1.sent(), [2, this.videoProvider];
				}
			}));
		}));
	}, t.prototype.createFromSongCode = function(t$1, e$1) {
		return yn(this, 0, void 0, (function() {
			var r$1;
			return gn(this, (function(n$1) {
				switch (n$1.label) {
					case 0: return r$1 = this, [4, new Bn(this.managers, this.listener).createFromSongCode(t$1, e$1)];
					case 1: return r$1.videoProvider = n$1.sent(), [2, this.videoProvider];
				}
			}));
		}));
	}, t.prototype.createFromText = function(t$1, e$1) {
		return yn(this, 0, void 0, (function() {
			var r$1;
			return gn(this, (function(n$1) {
				switch (n$1.label) {
					case 0: return r$1 = this, [4, new Bn(this.managers, this.listener).createFromText(t$1, e$1)];
					case 1: return r$1.videoProvider = n$1.sent(), [2, this.videoProvider];
				}
			}));
		}));
	}, t.prototype.createFromJSON = function(t$1, e$1) {
		return this.videoProvider = new Bn(this.managers, this.listener).createFromJSON(t$1, e$1), this.videoProvider;
	}, t.prototype.finalize = function(t$1) {
		return yn(this, 0, void 0, (function() {
			return gn(this, (function(e$1) {
				switch (e$1.label) {
					case 0: return this.video ? [4, this.loadSong()] : [2, null];
					case 1: return e$1.sent(), [4, this.loadText(t$1)];
					case 2: return e$1.sent(), [4, this.loadFonts()];
					case 3: return e$1.sent(), [2];
				}
			}));
		}));
	}, t.prototype.mockSongInfo = function(t$1) {
		this.songProvider = new Ln(this.managers.song, this.listener, this.options).mockSongInfo(t$1);
	}, t.prototype.loadSong = function() {
		return yn(this, 0, void 0, (function() {
			var t$1;
			return gn(this, (function(e$1) {
				switch (e$1.label) {
					case 0: return t$1 = this, [4, new Ln(this.managers.song, this.listener, this.options).loadSong(this.video.songleCode || this.video.songleId, this.video)];
					case 1: return t$1.songProvider = e$1.sent(), [2];
				}
			}));
		}));
	}, t.prototype.loadText = function(t$1) {
		var e$1, r$1;
		return yn(this, 0, void 0, (function() {
			var n$1, i$1, o$1, s$1, a$1, u$1, c$1, l$1;
			return gn(this, (function(p$1) {
				switch (p$1.label) {
					case 0: return n$1 = this.video, i$1 = n$1.lyricId, o$1 = n$1.lyricDiffId, s$1 = this.song ? this.song.code : null, a$1 = new Dn(this.managers, this.listener, this.options), !s$1 && i$1 < 0 ? (u$1 = a$1.loadRawText(null === (e$1 = this.videoProvider) || void 0 === e$1 ? void 0 : e$1.data), [3, 3]) : [3, 1];
					case 1: return c$1 = (null == t$1 ? void 0 : t$1.altLyricsUrl) || void 0, l$1 = (null == t$1 ? void 0 : t$1.lyricsDirectAccess) || void 0, [4, a$1.loadLyrics({
						songCode: s$1,
						lyricId: i$1,
						lyricDiffId: o$1,
						altLyricsUrl: c$1,
						directAccess: l$1
					})];
					case 2: u$1 = p$1.sent(), p$1.label = 3;
					case 3: return this.textProvider = u$1, null != u$1 && u$1.lyrics && !(null === (r$1 = null == u$1 ? void 0 : u$1.lyricsBody) || void 0 === r$1) && r$1.text && this.importLyrics(), [2];
				}
			}));
		}));
	}, t.prototype.loadFonts = function() {
		var t$1, e$1, r$1;
		return yn(this, 0, void 0, (function() {
			return gn(this, (function(n$1) {
				switch (n$1.label) {
					case 0: return "number" == typeof this.video.id && this.video.id >= 0 ? [4, this.fontLoader.loadForVideo(null === (t$1 = this.videoProvider) || void 0 === t$1 ? void 0 : t$1.data)] : [3, 2];
					case 1:
					case 3:
					case 5: return n$1.sent(), [2];
					case 2: return Array.isArray(null === (e$1 = this.options) || void 0 === e$1 ? void 0 : e$1.fontFamilies) ? [4, this.fontLoader.load(this.options.fontFamilies)] : [3, 4];
					case 4: return null !== (null === (r$1 = this.options) || void 0 === r$1 ? void 0 : r$1.fontFamilies) ? [3, 6] : [4, this.fontLoader.loadAll()];
					case 6: return [2];
				}
			}));
		}));
	}, t.prototype.importLyrics = function() {
		var t$1 = this.text.replace(/[\s\r\n]/g, ""), e$1 = 0, r$1 = { phrases: this.lyrics.data.map((function(r$2) {
			return { words: r$2.map((function(r$3) {
				return { characters: r$3.map((function(r$4) {
					return {
						char: t$1.charAt(e$1++),
						startTime: 1e3 * r$4.start_time,
						endTime: 1e3 * r$4.end_time
					};
				})) };
			})) };
		})) };
		this.video.json && Array.isArray(this.video.json.phrases) ? this.video.json.phrases.forEach((function(t$2, e$2) {
			t$2.words.forEach((function(t$3, n$1) {
				t$3.characters.forEach((function(t$4, i$1) {
					var o$1 = r$1.phrases[e$2].words[n$1].characters[i$1];
					t$4.char = o$1.char, t$4.startTime = o$1.startTime, t$4.endTime = o$1.endTime;
				}));
			}));
		})) : this.video.json = r$1;
	}, t.prototype.getChoruses = function() {
		var t$1;
		return null === (t$1 = this.songProvider) || void 0 === t$1 ? void 0 : t$1.getChoruses();
	}, t.prototype.findChorus = function(t$1, e$1) {
		var r$1;
		return null === (r$1 = this.songProvider) || void 0 === r$1 ? void 0 : r$1.findChorus(t$1, e$1);
	}, t.prototype.findChorusBetween = function(t$1, e$1) {
		var r$1;
		return null === (r$1 = this.songProvider) || void 0 === r$1 ? void 0 : r$1.findChorusBetween(t$1, e$1);
	}, t.prototype.findChorusChange = function(t$1, e$1) {
		var r$1;
		return null === (r$1 = this.songProvider) || void 0 === r$1 ? void 0 : r$1.findChorusChange(t$1, e$1);
	}, t.prototype.getBeats = function() {
		var t$1;
		return null === (t$1 = this.songProvider) || void 0 === t$1 ? void 0 : t$1.getBeats();
	}, t.prototype.findBeat = function(t$1, e$1) {
		var r$1;
		return null === (r$1 = this.songProvider) || void 0 === r$1 ? void 0 : r$1.findBeat(t$1, e$1);
	}, t.prototype.findBeatChange = function(t$1, e$1) {
		var r$1;
		return null === (r$1 = this.songProvider) || void 0 === r$1 ? void 0 : r$1.findBeatChange(t$1, e$1);
	}, t.prototype.getChords = function() {
		var t$1;
		return null === (t$1 = this.songProvider) || void 0 === t$1 ? void 0 : t$1.getChords();
	}, t.prototype.findChord = function(t$1, e$1) {
		var r$1;
		return null === (r$1 = this.songProvider) || void 0 === r$1 ? void 0 : r$1.findChord(t$1, e$1);
	}, t.prototype.findChordChange = function(t$1, e$1) {
		var r$1;
		return null === (r$1 = this.songProvider) || void 0 === r$1 ? void 0 : r$1.findChordChange(t$1, e$1);
	}, t.prototype.getVocalFrequency = function(t$1) {
		var e$1;
		return null === (e$1 = this.songProvider) || void 0 === e$1 ? void 0 : e$1.getVocalFrequency(t$1);
	}, t.prototype.getVocalAmplitude = function(t$1) {
		var e$1;
		return null === (e$1 = this.songProvider) || void 0 === e$1 ? void 0 : e$1.getVocalAmplitude(t$1);
	}, t.prototype.getMaxVocalAmplitude = function() {
		var t$1;
		return null === (t$1 = this.songProvider) || void 0 === t$1 ? void 0 : t$1.getMaxVocalAmplitude();
	}, t.prototype.getValenceArousal = function(t$1) {
		var e$1;
		return null === (e$1 = this.songProvider) || void 0 === e$1 ? void 0 : e$1.getValenceArousal(t$1);
	}, t.prototype.getMedianValenceArousal = function() {
		var t$1;
		return null === (t$1 = this.songProvider) || void 0 === t$1 ? void 0 : t$1.getMedianValenceArousal();
	}, t;
}(), Gn = function() {
	function t(t$1, e$1) {
		this.player = t$1, this.listener = e$1, this.initialize();
	}
	return Object.defineProperty(t.prototype, "options", {
		get: function() {
			return this._options ? fn({}, this._options) : null;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "name", {
		get: function() {
			return this._name;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "author", {
		get: function() {
			return this._author;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "status", {
		get: function() {
			return this._status;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "server", {
		get: function() {
			return this._server;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "managed", {
		get: function() {
			return !!this._host;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "host", {
		get: function() {
			return this._host;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "songUrl", {
		get: function() {
			return this._songUrl;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "songOptions", {
		get: function() {
			return this._songOptions;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "parameters", {
		get: function() {
			return this._parameters;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "isConnecting", {
		get: function() {
			return !!this.connecting;
		},
		enumerable: !1,
		configurable: !0
	}), t.prototype.initialize = function() {
		var t$1, e$1, r$1, n$1;
		return yn(this, 0, void 0, (function() {
			return gn(this, (function(i$1) {
				switch (i$1.label) {
					case 0: return this._options = null === (e$1 = null === (t$1 = this.player) || void 0 === t$1 ? void 0 : t$1.options) || void 0 === e$1 ? void 0 : e$1.app, this._options && (this._options = fn({}, this._options), this._name = null === (r$1 = this._options) || void 0 === r$1 ? void 0 : r$1.appName, this._author = null === (n$1 = this._options) || void 0 === n$1 ? void 0 : n$1.appAuthor, this._options.token && (m.textalive.appToken = this._options.token)), this._parameters = {}, this.parseQueryString(), this.initializeServerConnection(), "undefined" != typeof window && this._options ? [4, this.connect()] : [3, 2];
					case 1: i$1.sent(), this.initializePlayerListener(), this.initializeMessageListener(), i$1.label = 2;
					case 2: return this._songUrl && this.createFromSongUrl(), [2];
				}
			}));
		}));
	}, t.prototype.initializeServerConnection = function() {
		var t$1, e$1, r$1, n$1, i$1, o$1;
		return yn(this, 0, void 0, (function() {
			var s$1, a$1, u$1, c$1, l$1;
			return gn(this, (function(p$1) {
				switch (p$1.label) {
					case 0: return [4, A.getServerStatus()];
					case 1: return s$1 = p$1.sent(), a$1 = "ja" === (null == s$1 ? void 0 : s$1.lang), m.textalive.appToken && (null == s$1 ? void 0 : s$1.app) && (s$1.app.data && (this._name = null === (t$1 = s$1.app.data) || void 0 === t$1 ? void 0 : t$1.name, this._author = null === (r$1 = null === (e$1 = s$1.app) || void 0 === e$1 ? void 0 : e$1.data) || void 0 === r$1 ? void 0 : r$1.author, u$1 = null === (i$1 = null === (n$1 = s$1.app) || void 0 === n$1 ? void 0 : n$1.data) || void 0 === i$1 ? void 0 : i$1.status, this._status = "number" == typeof u$1 ? u$1 : -1), this._server = {
						version: s$1.version,
						message: s$1.app.message,
						error: s$1.app.error
					}, !this._server.error) ? (c$1 = this._server.message ? "\n".concat(this._server.message) : "", a$1 ? console.info("[TextAlive API]  v".concat(m.client.version, "  v").concat(this._server.version || "0.0.0", " ").concat(c$1)) : console.info("[TextAlive API] App API client v".concat(m.client.version, " connected to server v").concat(this._server.version || "0.0.0").concat(c$1)), this.listener.onAppLoad(this), [2]) : (l$1 = (null === (o$1 = this._server) || void 0 === o$1 ? void 0 : o$1.error) ? "\n".concat(this._server.error) : "", a$1 ? console.warn("[TextAlive API]  https://developer.textalive.jp ".concat(l$1)) : console.warn("[TextAlive API] This app requires a valid app token to run properly. You could get a token from https://developer.textalive.jp. ".concat(l$1)), this.listener.onAppLoad(null, l$1), [2]);
				}
			}));
		}));
	}, t.prototype.initializePlayerListener = function() {
		var t$1 = this;
		this.playerListener = {
			onVideoReady: function(e$1) {
				t$1._host && window.parent.postMessage({
					kind: "ta_video",
					options: {
						lyrics: !!t$1.player.data.lyrics,
						duration: t$1.player.video.duration
					}
				}, "*");
			},
			onThrottledTimeUpdate: function(e$1) {
				t$1._host && window.parent.postMessage({
					kind: "ta_position",
					options: { position: e$1 }
				}, "*");
			},
			onPlay: function() {
				t$1._host && window.parent.postMessage({
					kind: "ta_status",
					options: { status: "play" }
				}, "*");
			},
			onPause: function() {
				t$1._host && window.parent.postMessage({
					kind: "ta_status",
					options: { status: "pause" }
				}, "*");
			},
			onStop: function() {
				t$1._host && window.parent.postMessage({
					kind: "ta_status",
					options: { status: "stop" }
				}, "*");
			},
			onVolumeUpdate: function(e$1) {
				t$1._host && window.parent.postMessage({
					kind: "ta_volume",
					options: { volume: e$1 }
				}, "*");
			},
			onDispose: function() {
				t$1.dispose();
			}
		}, this.player.addListener(this.playerListener);
	}, t.prototype.initializeMessageListener = function() {
		var t$1 = this;
		this.messageListener = function(e$1) {
			if (e$1.data.kind && /^ta_/.test(e$1.data.kind)) {
				var r$1 = t$1.player;
				switch (e$1.data.kind.substring(3)) {
					case "status":
						switch (e$1.data.options.status) {
							case "play":
								r$1.requestPlay();
								break;
							case "pause":
								r$1.requestPause();
								break;
							case "stop": r$1.requestStop();
						}
						break;
					case "seek":
						r$1.requestMediaSeek(e$1.data.options.position);
						break;
					case "volume":
						r$1.volume = e$1.data.options.volume;
						break;
					case "parameter":
						var n$1 = e$1.data.options, i$1 = n$1.name, o$1 = n$1.value;
						t$1.parameters[i$1] = o$1, t$1.listener.onAppParameterUpdate(i$1, o$1);
						break;
					case "media":
						t$1._songUrl = e$1.data.options.url, t$1._songOptions = e$1.data.options.options || {}, r$1.requestStop();
						var s$1 = t$1.createFromSongUrl();
						t$1.listener.onAppMediaChange(t$1._songUrl, s$1);
				}
			}
		}, window.addEventListener("message", this.messageListener);
	}, t.prototype.createFromSongUrl = function() {
		var t$1, e$1 = this._songOptions;
		return e$1 && (t$1 = { video: {} }, e$1.altLyricsUrl && (t$1.altLyricsUrl = e$1.altLyricsUrl), e$1.lyricsDirectAccess && (t$1.lyricsDirectAccess = e$1.lyricsDirectAccess), e$1.lyricId && (t$1.video.lyricId = e$1.lyricId), e$1.lyricDiffId && (t$1.video.lyricDiffId = e$1.lyricDiffId), e$1.chordId && (t$1.video.chordId = e$1.chordId), e$1.beatId && (t$1.video.beatId = e$1.beatId), e$1.repetitiveSegmentId && (t$1.video.repetitiveSegmentId = e$1.repetitiveSegmentId)), this.player.createFromSongUrl(this._songUrl, t$1);
	}, t.prototype.parseQueryString = function() {
		var t$1 = pn("ta_app_token");
		t$1 && (m.textalive.appToken = t$1), this._songUrl = pn("ta_song_url"), this._songOptions = {};
		var e$1 = pn("ta_lyric_id");
		e$1 && (this._songOptions.lyricId = parseInt(e$1), isNaN(this._songOptions.lyricId) && delete this._songOptions.lyricId);
		var r$1 = pn("ta_lyric_diff_id");
		r$1 && (this._songOptions.lyricDiffId = parseInt(r$1), isNaN(this._songOptions.lyricDiffId) && delete this._songOptions.lyricDiffId);
		var n$1 = pn("ta_alt_lyrics_url");
		n$1 && (this._songOptions.altLyricsUrl = n$1);
		var i$1 = pn("ta_lyrics_direct_access");
		i$1 && (this._songOptions.lyricsDirectAccess = "true" === i$1, this._songOptions.lyricsDirectAccess || delete this._songOptions.lyricsDirectAccess);
		var o$1 = pn("ta_chord_id");
		o$1 && (this._songOptions.chordId = parseInt(o$1), isNaN(this._songOptions.chordId) && delete this._songOptions.chordId);
		var s$1 = pn("ta_beat_id");
		s$1 && (this._songOptions.beatId = parseInt(s$1), isNaN(this._songOptions.beatId) && delete this._songOptions.beatId);
		var a$1 = pn("ta_repetitive_segment_id");
		a$1 && (this._songOptions.repetitiveSegmentId = parseInt(a$1), isNaN(this._songOptions.repetitiveSegmentId) && delete this._songOptions.repetitiveSegmentId);
	}, t.prototype.connect = function() {
		return yn(this, 0, void 0, (function() {
			var t$1, e$1 = this;
			return gn(this, (function(r$1) {
				switch (r$1.label) {
					case 0: return this.connecting ? [2, this.connecting] : "undefined" != typeof window && this.options && window.parent && window !== window.parent ? [3, 2] : [4, new Promise((function(t$2) {
						return setTimeout(t$2, 1);
					}))];
					case 1: return r$1.sent(), this.listener.onAppReady(this), [2, !1];
					case 2: return this.connecting = Promise.race([new Promise((function(r$2) {
						t$1 = function(n$1) {
							n$1.data.kind && /^ta_/.test(n$1.data.kind) && "ack" === n$1.data.kind.substring(3) && (window.removeEventListener("message", t$1), e$1._host = n$1.data.options, r$2(!0));
						}, window.addEventListener("message", t$1);
					})), yn(e$1, 0, void 0, (function() {
						var e$2;
						return gn(this, (function(r$2) {
							switch (r$2.label) {
								case 0: e$2 = 0, r$2.label = 1;
								case 1: return e$2 < 5 ? (window.parent.postMessage({
									kind: "ta_connect",
									options: this.options
								}, "*"), [4, new Promise((function(t$2) {
									return setTimeout(t$2, 200);
								}))]) : [3, 4];
								case 2:
									if (r$2.sent(), this._host) return [3, 4];
									r$2.label = 3;
								case 3: return e$2++, [3, 1];
								case 4: return !this._host && t$1 && window.removeEventListener("message", t$1), [2, !!this._host];
							}
						}));
					}))]), this.connecting.finally((function() {
						e$1.connecting = null, e$1.listener.onAppReady(e$1);
					})), [2, this.connecting];
				}
			}));
		}));
	}, t.prototype.dispose = function() {
		"undefined" != typeof window && this.options && (this.player.removeListener(this.playerListener), window.removeEventListener("message", this.messageListener)), this._host = null, this.player = null;
	}, t;
}();
function qn(t) {
	return t;
}
function Wn(t) {
	return t < -1 ? t = -1 : t > 1 && (t = 1), function(e$1) {
		return 0 == t ? e$1 : t < 0 ? e$1 * (e$1 * -t + 1 + t) : e$1 * ((2 - e$1) * t + (1 - t));
	};
}
function Yn(t) {
	return function(e$1) {
		return Math.pow(e$1, t);
	};
}
function zn(t) {
	return function(e$1) {
		return 1 - Math.pow(1 - e$1, t);
	};
}
function Jn(t) {
	return function(e$1) {
		return (e$1 *= 2) < 1 ? .5 * Math.pow(e$1, t) : 1 - .5 * Math.abs(Math.pow(2 - e$1, t));
	};
}
var Hn = Yn(2), Xn = zn(2), Zn = Jn(2), $n = Yn(3), Kn = zn(3), Qn = Jn(3), ti = Yn(4), ei = zn(4), ri = Jn(4), ni = Yn(5), ii = zn(5), oi = Jn(5);
function si(t) {
	return 1 - Math.cos(t * Math.PI / 2);
}
function ai(t) {
	return Math.sin(t * Math.PI / 2);
}
function ui(t) {
	return -.5 * (Math.cos(Math.PI * t) - 1);
}
function ci(t) {
	return function(e$1) {
		return e$1 * e$1 * ((t + 1) * e$1 - t);
	};
}
var li = ci(1.7);
function pi(t) {
	return function(e$1) {
		return --e$1 * e$1 * ((t + 1) * e$1 + t) + 1;
	};
}
var hi = pi(1.7);
function di(t) {
	return t *= 1.525, function(e$1) {
		return (e$1 *= 2) < 1 ? e$1 * e$1 * ((t + 1) * e$1 - t) * .5 : .5 * ((e$1 -= 2) * e$1 * ((t + 1) * e$1 + t) + 2);
	};
}
var fi = di(1.7);
function yi(t) {
	return -(Math.sqrt(1 - t * t) - 1);
}
function gi(t) {
	return Math.sqrt(1 - --t * t);
}
function vi(t) {
	return (t *= 2) < 1 ? -.5 * (Math.sqrt(1 - t * t) - 1) : .5 * (Math.sqrt(1 - (t -= 2) * t) + 1);
}
function mi(t) {
	return 1 - bi(1 - t);
}
function bi(t) {
	return t < 1 / 2.75 ? 7.5625 * t * t : t < 2 / 2.75 ? 7.5625 * (t -= 1.5 / 2.75) * t + .75 : t < 2.5 / 2.75 ? 7.5625 * (t -= 2.25 / 2.75) * t + .9375 : 7.5625 * (t -= 2.625 / 2.75) * t + .984375;
}
function _i(t) {
	return t < .5 ? .5 * mi(2 * t) : .5 * bi(2 * t - 1) + .5;
}
function wi(t, e$1) {
	var r$1 = 2 * Math.PI;
	return function(n$1) {
		if (0 == n$1 || 1 == n$1) return n$1;
		var i$1 = e$1 / r$1 * Math.asin(1 / t);
		return -t * Math.pow(2, 10 * (n$1 -= 1)) * Math.sin((n$1 - i$1) * r$1 / e$1);
	};
}
var Pi = wi(1, .3);
function Ei(t, e$1) {
	var r$1 = 2 * Math.PI;
	return function(n$1) {
		if (0 == n$1 || 1 == n$1) return n$1;
		var i$1 = e$1 / r$1 * Math.asin(1 / t);
		return t * Math.pow(2, -10 * n$1) * Math.sin((n$1 - i$1) * r$1 / e$1) + 1;
	};
}
var Oi = Ei(1, .3);
function Si(t, e$1) {
	var r$1 = 2 * Math.PI;
	return function(n$1) {
		var i$1 = e$1 / r$1 * Math.asin(1 / t);
		return (n$1 *= 2) < 1 ? t * Math.pow(2, 10 * (n$1 -= 1)) * Math.sin((n$1 - i$1) * r$1 / e$1) * -.5 : t * Math.pow(2, -10 * (n$1 -= 1)) * Math.sin((n$1 - i$1) * r$1 / e$1) * .5 + 1;
	};
}
var Ti = Si(1, .3 * 1.5), xi = Object.freeze({
	__proto__: null,
	backIn: li,
	backInOut: fi,
	backOut: hi,
	bounceIn: mi,
	bounceInOut: _i,
	bounceOut: bi,
	circIn: yi,
	circInOut: vi,
	circOut: gi,
	cubicIn: $n,
	cubicInOut: Qn,
	cubicOut: Kn,
	elasticIn: Pi,
	elasticInOut: Ti,
	elasticOut: Oi,
	get: Wn,
	getBackIn: ci,
	getBackInOut: di,
	getBackOut: pi,
	getElasticIn: wi,
	getElasticInOut: Si,
	getElasticOut: Ei,
	getPowIn: Yn,
	getPowInOut: Jn,
	getPowOut: zn,
	linear: qn,
	quadIn: Hn,
	quadInOut: Zn,
	quadOut: Xn,
	quartIn: ti,
	quartInOut: ri,
	quartOut: ei,
	quintIn: ni,
	quintInOut: oi,
	quintOut: ii,
	sineIn: si,
	sineInOut: ui,
	sineOut: ai
}), Ai = function() {
	function t() {}
	return t.linear = qn, t.get = Wn, t.getPowIn = Yn, t.getPowOut = zn, t.getPowInOut = Jn, t.quadIn = Hn, t.quadOut = Xn, t.quadInOut = Zn, t.cubicIn = $n, t.cubicOut = Kn, t.cubicInOut = Qn, t.quartIn = ti, t.quartOut = ei, t.quartInOut = ri, t.quintIn = ni, t.quintOut = ii, t.quintInOut = oi, t.sineIn = si, t.sineOut = ai, t.sineInOut = ui, t.getBackIn = ci, t.backIn = li, t.getBackOut = pi, t.backOut = hi, t.getBackInOut = di, t.backInOut = fi, t.circIn = yi, t.circOut = gi, t.circInOut = vi, t.bounceIn = mi, t.bounceOut = bi, t.bounceInOut = _i, t.getElasticIn = wi, t.elasticIn = Pi, t.getElasticOut = Ei, t.elasticOut = Oi, t.getElasticInOut = Si, t.elasticInOut = Ti, t;
}(), Ri = function() {
	function t() {
		this.cursor = -1, this.widgets = [], this.instances = [], this.model = {
			id: -1,
			type: n.NONE,
			sourceId: -1,
			author: null,
			originalAuthor: null,
			className: null,
			createdDate: null
		};
	}
	return Object.defineProperty(t.prototype, "id", {
		get: function() {
			return this.model ? this.model.id : -1;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "script", {
		get: function() {
			return this.model ? this.model.script : null;
		},
		enumerable: !1,
		configurable: !0
	}), t;
}(), Ci = function() {}, Ni = function() {
	function t(t$1, e$1) {
		this.onTemplateLoad = e$1, this._emitter = null, this._loaded = null, this._loading = null, this.verbose = !1, this._emitter = t$1, this.clear();
	}
	return Object.defineProperty(t.prototype, "loaded", {
		get: function() {
			return this._loaded;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "loading", {
		get: function() {
			return this._loading;
		},
		enumerable: !1,
		configurable: !0
	}), t.prototype.clear = function() {
		this._loaded = {}, this._loading = {};
	}, t.prototype.loadLatest = function(t$1) {
		return void 0 === t$1 && (t$1 = 100), yn(this, 0, void 0, (function() {
			var e$1;
			return gn(this, (function(r$1) {
				switch (r$1.label) {
					case 0: return [4, q.list({
						maxResults: t$1,
						withoutAuthors: !0,
						withoutOriginalAuthors: !0,
						script: !0
					})];
					case 1: return (e$1 = r$1.sent()) && e$1.list ? (this.verbose && console.log("--- loading template classes ---"), [2, this.registerMany(e$1.list)]) : [2];
				}
			}));
		}));
	}, t.prototype.loadForVideo = function(t$1) {
		return yn(this, 0, void 0, (function() {
			var e$1, r$1 = this;
			return gn(this, (function(n$1) {
				switch (n$1.label) {
					case 0: return [4, q.loadForVideo(t$1)];
					case 1: return (e$1 = n$1.sent()) && e$1.list ? (this.verbose && console.log("--- loading template classes for vid:".concat(t$1, " ---")), [4, this.registerMany(e$1.list)]) : [2, null];
					case 2: return [2, n$1.sent().map((function(t$2) {
						return t$2 ? r$1.getByName(t$2) : null;
					}))];
				}
			}));
		}));
	}, t.prototype.loadByNames = function(t$1) {
		return yn(this, 0, void 0, (function() {
			var e$1, r$1 = this;
			return gn(this, (function(n$1) {
				switch (n$1.label) {
					case 0: return !Array.isArray(t$1) || t$1.length <= 0 ? [2, []] : (this.verbose && console.log("--- loading template classes ---"), [4, Promise.all(t$1.map((function(t$2) {
						return r$1.doLoadByName(t$2);
					})))]);
					case 1: return (e$1 = n$1.sent()) && this._emitter.onTemplatesLoad(e$1.filter((function(t$2) {
						return !!t$2;
					})).map((function(t$2) {
						return t$2.className;
					}))), [2, e$1];
				}
			}));
		}));
	}, t.prototype.loadByName = function(t$1) {
		return yn(this, 0, void 0, (function() {
			var e$1, r$1;
			return gn(this, (function(n$1) {
				switch (n$1.label) {
					case 0: return n$1.trys.push([
						0,
						2,
						,
						3
					]), [4, this.doLoadByName(t$1)];
					case 1: return e$1 = n$1.sent(), this._emitter.onTemplatesLoad([e$1.className]), [2, e$1];
					case 2: return r$1 = n$1.sent(), this._emitter.onTemplatesLoad(null, r$1), [2, null];
					case 3: return [2];
				}
			}));
		}));
	}, t.prototype.doLoadByName = function(t$1) {
		return yn(this, 0, void 0, (function() {
			var e$1, r$1, n$1 = this;
			return gn(this, (function(i$1) {
				return null !== (e$1 = this.getByName(t$1)) ? [2, e$1] : this._loading[t$1] ? [2, this._loading[t$1]] : (r$1 = new Promise((function(e$2) {
					return q.loadByName(t$1).then((function(t$2) {
						return n$1.onTemplateLoad(t$2);
					})).then(e$2);
				})), this._loading[t$1] = r$1, r$1.finally((function() {
					return delete n$1._loading[t$1];
				})), [2, r$1]);
			}));
		}));
	}, t.prototype.loadById = function(t$1) {
		return yn(this, 0, void 0, (function() {
			var e$1, r$1, n$1;
			return gn(this, (function(i$1) {
				switch (i$1.label) {
					case 0: return i$1.trys.push([
						0,
						2,
						,
						3
					]), [4, this.doLoadById(t$1)];
					case 1: return e$1 = i$1.sent(), r$1 = null, [3, 3];
					case 2: return n$1 = i$1.sent(), r$1 = n$1, [3, 3];
					case 3: return this._emitter.onTemplatesLoad(e$1 ? [e$1.className] : null, r$1), [2, e$1];
				}
			}));
		}));
	}, t.prototype.doLoadById = function(t$1) {
		return yn(this, 0, void 0, (function() {
			var e$1, r$1, n$1 = this;
			return gn(this, (function(i$1) {
				return (e$1 = this.getById(t$1)) ? [2, e$1] : this._loading[t$1] ? [2, this._loading[t$1]] : (r$1 = new Promise((function(e$2) {
					return q.load(t$1).then((function(t$2) {
						return n$1.onTemplateLoad(t$2);
					})).then(e$2);
				})), this._loading[t$1] = r$1, r$1.finally((function() {
					return delete n$1._loading[t$1];
				})), [2, r$1]);
			}));
		}));
	}, t.prototype.registerMany = function(t$1) {
		return yn(this, 0, void 0, (function() {
			var e$1, r$1, n$1 = this;
			return gn(this, (function(i$1) {
				switch (i$1.label) {
					case 0: return e$1 = t$1.map((function(t$2) {
						var e$2 = n$1.onTemplateLoad(t$2);
						return n$1._loading[t$2.className] = e$2, n$1._loading["".concat(t$2.className, "@").concat(t$2.id)] = e$2, e$2;
					})), [4, Promise.all(e$1.map((function(t$2) {
						return t$2.then((function(t$3) {
							return t$3.className;
						})).catch((function(t$3) {
							return null;
						}));
					})))];
					case 1: return r$1 = i$1.sent().filter((function(t$2) {
						return !!t$2;
					})), this._emitter.onTemplatesLoad(r$1), [2, r$1];
				}
			}));
		}));
	}, t.prototype.commit = function(t$1, e$1) {
		return yn(this, 0, void 0, (function() {
			var r$1;
			return gn(this, (function(n$1) {
				switch (n$1.label) {
					case 0: return [4, q.create({
						sourceId: t$1.model.sourceId,
						script: t$1.model.script,
						log: e$1
					})];
					case 1: return (r$1 = n$1.sent()).success && (t$1.model.id = r$1.id, this._emitter.onTemplateCommit(t$1.className)), [2, r$1];
				}
			}));
		}));
	}, t.prototype.getByName = function(t$1, e$1) {
		var r$1;
		if (void 0 === e$1 && (e$1 = !1), t$1 && (r$1 = t$1.match(/(.+)@([0-9]+)/))) {
			t$1 = r$1[1];
			var n$1 = parseInt(r$1[2]);
			if (!this._loaded[t$1]) return null;
			var i$1 = this._loaded[t$1].model;
			if (i$1.id !== n$1) {
				if (!e$1) return null;
				this.verbose && console.log("[warning] template ".concat(t$1, " version ").concat(n$1, " is requested but ").concat(i$1.id, " is used"));
			}
		}
		return this._loaded[t$1] ? this._loaded[t$1] : null;
	}, t.prototype.getById = function(t$1) {
		var e$1 = null;
		for (var r$1 in this._loaded) if (this._loaded[r$1].model.id === t$1) {
			e$1 = this._loaded[r$1];
			break;
		}
		return e$1;
	}, t;
}(), ki = {
	Matrix2D: pt,
	Point: ht,
	Color: X,
	Font: Z,
	RenderingUnit: K,
	TextUnit: et,
	Graphic: nt,
	Phrase: ot,
	Word: it,
	Char: rt,
	Beat: Nn,
	RepetitiveSegment: jn
}, ji = [
	"headTime",
	"tailTime",
	"insomnia"
], Ii = [
	"animate",
	"getAssignedUnit",
	"name",
	"type"
], Ui = function() {
	function t(t$1, e$1, r$1) {
		this._emitter = null, this._player = null, this.interpreter = null, this.unsafeAcceleration = !1, this._verbose = !1, this.ignoreVersion = !1, this.rawConsole = !1, this._player = t$1, this._emitter = e$1, this.unsafeAcceleration = r$1, this.loader = new Ni(e$1, this.register.bind(this)), t$1.addListener({ onVideoReady: this.onVideoReady.bind(this) });
	}
	return Object.defineProperty(t.prototype, "verbose", {
		get: function() {
			return this._verbose;
		},
		set: function(t$1) {
			this._verbose = this.loader.verbose = t$1;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "ready", {
		get: function() {
			return !!this.interpreter;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "loaded", {
		get: function() {
			return this.loader.loaded;
		},
		enumerable: !1,
		configurable: !0
	}), t.prototype.initialize = function() {
		var t$1 = this;
		if (!this.ready) {
			var e$1 = function(t$2) {
				var e$2 = t$2.player, r$2 = t$2.ignoredPropNames, i$1 = t$2.rawConsole, o$1 = t$2.templateGetter, s$1 = e$2.graphics.wrapperTable, a$1 = new cn(fn(fn({}, ki), s$1), r$2, (function(t$3, r$3) {
					return e$2.graphics.isGraphics(t$3) && r$3 instanceof X ? r$3.toString() : r$3;
				})), u$1 = {
					require: {
						func: function(t$3) {
							if (!(t$3.length < 1 || "string" != typeof t$3[0])) {
								var e$3 = t$3[0], r$3 = o$1(e$3);
								return null === r$3 ? void 0 : r$3.functionDefinition;
							}
						},
						raw: !0,
						isConstructor: !0
					},
					print: {
						func: function(t$3) {
							e$2.isEditing && console.log.apply(console, t$3);
						},
						raw: i$1
					},
					findChorus: { func: function(t$3) {
						return t$3.length < 1 || "number" != typeof t$3[0] ? null : e$2.findChorus(t$3[0]);
					} },
					findBeat: { func: function(t$3) {
						return t$3.length < 1 || "number" != typeof t$3[0] ? null : e$2.findBeat(t$3[0]);
					} },
					getVocalFrequency: { func: function(t$3) {
						return t$3.length < 1 || "number" != typeof t$3[0] ? null : e$2.getVocalFrequency(t$3[0]);
					} },
					getVocalAmplitude: { func: function(t$3) {
						return t$3.length < 1 || "number" != typeof t$3[0] ? -1 : e$2.getVocalAmplitude(t$3[0]);
					} },
					getMaxVocalAmplitude: { func: function(t$3) {
						return e$2.getMaxVocalAmplitude();
					} },
					getValenceArousal: { func: function(t$3) {
						return t$3.length < 1 || "number" != typeof t$3[0] ? null : e$2.getValenceArousal(t$3[0]);
					} },
					getMedianValenceArousal: { func: function(t$3) {
						return e$2.getMedianValenceArousal();
					} }
				};
				Object.keys(n).forEach((function(t$3) {
					a$1.setProperty(a$1.globalScope, t$3, n[t$3]), u$1[t$3] = { value: n[t$3] };
				})), Object.keys(xi).forEach((function(t$3) {
					var e$3 = xi[t$3];
					0 !== t$3.indexOf("get") && (u$1[t$3] = { func: e$3 });
				}));
				var c$1 = Object.keys(a$1.wrapperTable);
				return c$1 && c$1.forEach((function(t$3) {
					return u$1[t$3] = { cls: a$1.wrapperTable[t$3] };
				})), Object.keys(u$1).forEach((function(t$3) {
					var e$3 = u$1[t$3];
					e$3.func ? a$1.createGlobalFunction(t$3, e$3) : e$3.value && a$1.setProperty(a$1.globalScope, t$3, e$3.value);
				})), {
					interpreter: a$1,
					unsafeGlobalScope: u$1
				};
			}({
				player: this._player,
				ignoredPropNames: Ii,
				rawConsole: this.rawConsole,
				templateGetter: function(e$2) {
					return t$1.getByName(e$2, !0);
				}
			}), r$1 = e$1.interpreter;
			this.unsafeGlobalScope = e$1.unsafeGlobalScope, this.interpreter = r$1, this.onVideoReady(this._player.video);
		}
	}, t.prototype.getByName = function(t$1, e$1) {
		return void 0 === e$1 && (e$1 = !1), this.loader.getByName(t$1, e$1);
	}, t.prototype.getById = function(t$1) {
		return this.loader.getById(t$1);
	}, t.prototype.clear = function() {
		this.loader.clear();
	}, t.prototype.loadLatest = function(t$1) {
		return void 0 === t$1 && (t$1 = 100), yn(this, 0, void 0, (function() {
			return gn(this, (function(e$1) {
				return this.ready || this.initialize(), [2, this.loader.loadLatest(t$1)];
			}));
		}));
	}, t.prototype.loadForVideo = function(t$1) {
		return yn(this, 0, void 0, (function() {
			return gn(this, (function(e$1) {
				return this.ready || this.initialize(), [2, this.loader.loadForVideo(t$1)];
			}));
		}));
	}, t.prototype.loadByNames = function(t$1) {
		return yn(this, 0, void 0, (function() {
			return gn(this, (function(e$1) {
				return this.ready || this.initialize(), [2, this.loader.loadByNames(t$1)];
			}));
		}));
	}, t.prototype.loadByName = function(t$1) {
		return yn(this, 0, void 0, (function() {
			return gn(this, (function(e$1) {
				return this.ready || this.initialize(), [2, this.loader.loadByName(t$1)];
			}));
		}));
	}, t.prototype.loadById = function(t$1) {
		return yn(this, 0, void 0, (function() {
			return gn(this, (function(e$1) {
				return this.ready || this.initialize(), [2, this.loader.loadById(t$1)];
			}));
		}));
	}, t.prototype.commit = function(t$1, e$1) {
		return yn(this, 0, void 0, (function() {
			return gn(this, (function(r$1) {
				return [2, this.loader.commit(t$1, e$1)];
			}));
		}));
	}, t.prototype.register = function(t$1) {
		return yn(this, 0, void 0, (function() {
			var e$1, r$1, n$1, i$1, o$1, s$1, a$1 = this;
			return gn(this, (function(u$1) {
				switch (u$1.label) {
					case 0:
						if (!t$1) return [2, null];
						if ("number" == typeof t$1.sourceId) {
							if (e$1 = t$1, !(r$1 = this.createClass(t$1.script))) return [2, null];
						} else r$1 = t$1;
						n$1 = nn(r$1.ast).dependencies, u$1.label = 1;
					case 1: return u$1.trys.push([
						1,
						3,
						,
						4
					]), [4, Promise.all(n$1.map((function(t$2) {
						var e$2 = a$1.getByName(t$2, a$1.ignoreVersion);
						return e$2 ? Promise.resolve(e$2) : a$1.loadByName(t$2);
					})))];
					case 2: return u$1.sent(), this.verbose && console.log("load dependencies for", r$1.className, n$1), [3, 4];
					case 3: return i$1 = u$1.sent(), this.verbose && console.error("failed loading dependencies for", r$1.className, i$1), [3, 4];
					case 4:
						try {
							if (!(e$1 ? this.loadModel(r$1, e$1) : this.createModel(r$1))) throw new Error("failed to create a template instance");
							return [2, this.registerClass(r$1)];
						} catch (t$2) {
							throw o$1 = void 0, e$1 && (delete (s$1 = fn({}, e$1)).script, o$1 = s$1), {
								error: t$2.message,
								stack: t$2.stack,
								cause: o$1
							};
						}
						return [2];
				}
			}));
		}));
	}, t.prototype.updateClassScript = function(t$1, e$1) {
		var r$1 = this.createClass(e$1);
		return this.updateClass(t$1, r$1);
	}, t.prototype.registerClass = function(t$1) {
		if (!t$1) return null;
		if (this.loader.loaded[t$1.className]) {
			this.verbose && console.log("updating", t$1.className, t$1.model.id);
			var e$1 = this.updateClass(this.loader.loaded[t$1.className], t$1);
			return this.verbose && console.log("updated", e$1.className, e$1.id), e$1;
		}
		return this.loader.loaded[t$1.className] = t$1, this.verbose && console.log("loaded", t$1.className, t$1.model.id), t$1;
	}, t.prototype.updateClass = function(t$1, e$1) {
		var r$1 = t$1, n$1 = e$1;
		if (!n$1) return null;
		if (r$1.model.script === n$1.model.script) return this.verbose && console.log("no diff for", r$1.className), r$1;
		if (!this.createModel(n$1)) return null;
		if (r$1.className !== n$1.className) {
			var i$1 = this.getByName(n$1.className);
			if (!i$1) return n$1.cursor = r$1.cursor, this.loader.loaded[n$1.className] = n$1, this.verbose && console.log("create", n$1.className), n$1;
			r$1 = i$1;
		}
		return r$1.newStatement = n$1.newStatement, r$1.widgets = n$1.widgets, r$1.scope = n$1.scope, r$1.functionDefinition = n$1.functionDefinition, r$1.newStatement = n$1.newStatement, r$1.unsafeConstructorGenerator = n$1.unsafeConstructorGenerator, r$1.ast = n$1.ast, r$1.cursor < 0 && (r$1.cursor = n$1.cursor), n$1.id >= 0 ? (this.verbose && console.log("replace", n$1.className, r$1.id, n$1.id), r$1.model = n$1.model) : (this.verbose && console.log("update", n$1.className, r$1.id, n$1.id), r$1.model.type = n$1.model.type, r$1.model.className = n$1.model.className, r$1.model.prettyName = n$1.model.prettyName, r$1.model.script = n$1.model.script, r$1.model.createdDate = null, r$1.id >= 0 && (r$1.model.sourceId = r$1.model.id, r$1.model.id = -1)), n$1 = r$1, this.updateInstances(r$1.instances.slice(), n$1), this._emitter.onTemplateUpdate(n$1.className), n$1;
	}, t.prototype.loadModel = function(t$1, e$1) {
		var r$1 = this.newRawInstance(t$1);
		return t$1.model = e$1, this.updateWidgetInitialValues(t$1, r$1), r$1;
	}, t.prototype.createModel = function(t$1) {
		var e$1 = this.newRawInstance(t$1);
		if (null === e$1) return !1;
		if (t$1.id >= 0) return !0;
		var r$1 = e$1.templateInstance, n$1 = t$1.model.script;
		return t$1.model = {
			id: -1,
			sourceId: -1,
			className: t$1.className,
			prettyName: r$1 ? this.interpreter.getProperty(r$1, "name") : e$1.unsafeTemplateInstance.name,
			type: r$1 ? this.interpreter.getProperty(r$1, "type") : e$1.unsafeTemplateInstance.type,
			script: n$1,
			author: null,
			originalAuthor: null,
			createdDate: null
		}, this.updateWidgetInitialValues(t$1, e$1), e$1;
	}, t.prototype.updateWidgetInitialValues = function(t$1, e$1) {
		var r$1 = this;
		t$1.widgets.forEach((function(t$2) {
			t$2.initialValue = r$1.getProperty(e$1, t$2.name);
		}));
	}, t.prototype.updateInstances = function(t$1, e$1) {
		var r$1 = this;
		t$1.forEach((function(t$2) {
			try {
				r$1.updateInstance(t$2, e$1);
			} catch (r$2) {
				console.log("failed updating template for", t$2.assignedUnit, ":", e$1);
			}
		})), this._player.isPlaying || this._player.requestStageUpdate();
	}, t.prototype.createClass = function(t$1) {
		var e$1 = this;
		this.ready || this.initialize();
		var r$1 = new Ri();
		r$1.model = {
			id: -1,
			sourceId: -1,
			className: null,
			prettyName: null,
			type: 0,
			script: t$1,
			author: null,
			originalAuthor: null,
			createdDate: null
		};
		var n$1 = rn(t$1, Ii), i$1 = n$1.ast, o$1 = n$1.widgets;
		if (r$1.ast = i$1, r$1.widgets = o$1, r$1.className = r$1.ast.body[0].id.name, r$1.scope = this.interpreter.prepareRun(r$1.ast), this.interpreter.run(1e3, "to define " + r$1.className), r$1.functionDefinition = this.interpreter.getRawProperty(r$1.scope, r$1.className), r$1.newStatement = this.interpreter.newStatementFor(r$1.className), this.unsafeAcceleration) {
			var s$1 = Object.keys(this.unsafeGlobalScope), a$1 = Object.keys(this.getGlobalProperties()).map((function(t$2) {
				return "".concat(t$2, "=props.").concat(t$2);
			})).join(","), u$1 = "return function(props){var ".concat(a$1, ";").concat(t$1, "return ").concat(r$1.className, ";}"), c$1 = new (Function.bind.apply(Function, vn(vn([void 0], s$1, !1), [u$1], !1)))(), l$1 = function(t$2) {
				var r$2 = e$1.getByName(t$2);
				return r$2 ? r$2.unsafeConstructorGenerator(e$1.getGlobalProperties()) : null;
			}, p$1 = s$1.map((function(t$2) {
				if ("require" === t$2) return l$1;
				var r$2 = e$1.unsafeGlobalScope[t$2];
				return r$2.func ? function() {
					for (var t$3 = [], e$2 = 0; e$2 < arguments.length; e$2++) t$3[e$2] = arguments[e$2];
					return r$2.func(t$3);
				} : r$2.cls || r$2.value;
			}));
			r$1.unsafeConstructorGenerator = c$1.apply({}, p$1);
		}
		return r$1;
	}, t.prototype.getGlobalProperties = function() {
		var t$1;
		return {
			width: this._player.videoWidth,
			height: this._player.videoHeight,
			margin: this._player.margin,
			duration: (null === (t$1 = this._player.video) || void 0 === t$1 ? void 0 : t$1.duration) || 0
		};
	}, t.prototype.newRawInstance = function(t$1) {
		var e$1 = t$1, r$1 = new Ci();
		if (this.unsafeAcceleration) r$1.unsafeTemplateInstance = new (e$1.unsafeConstructorGenerator(this.getGlobalProperties()))();
		else {
			this.interpreter.prepareNewInstance(e$1.newStatement, e$1.scope);
			r$1.templateInstance = this.interpreter.run(700, "to instantiate " + e$1.className), r$1.templateInstance._nativeInstance = r$1;
		}
		return r$1.templateClass = e$1, r$1.ignore = !1, r$1;
	}, t.prototype.setProperty = function(t$1, e$1, r$1) {
		this.unsafeAcceleration ? t$1.unsafeTemplateInstance[e$1] = r$1 : this.interpreter.setProperty(t$1.templateInstance, e$1, r$1);
	}, t.prototype.getProperty = function(t$1, e$1) {
		return this.unsafeAcceleration ? t$1.unsafeTemplateInstance[e$1] : this.interpreter.getProperty(t$1.templateInstance, e$1);
	}, t.prototype.exportInstance = function(t$1) {
		for (var e$1 = {}, r$1 = 0, n$1 = t$1.templateClass.widgets.map((function(t$2) {
			return t$2.name;
		})).concat(ji); r$1 < n$1.length; r$1++) {
			var i$1 = n$1[r$1], o$1 = this.getProperty(t$1, i$1);
			try {
				var s$1 = gt(o$1);
				void 0 !== s$1 && (e$1[i$1] = s$1);
			} catch (e$2) {
				console.error("cannot export ".concat(t$1.templateClass.className, ".").concat(i$1), o$1, "assigned to", t$1.assignedUnit);
			}
		}
		return {
			type: t$1.templateClass.className,
			value: e$1
		};
	}, t.prototype.importInstances = function(t$1, e$1) {
		try {
			this.importPhraseTemplates(t$1.firstCredit, e$1.credits), this.importPhraseTemplates(t$1.firstPhrase, e$1.phrases);
			for (var r$1 = e$1.graphics, n$1 = t$1.firstGraphic, i$1 = 0; null !== n$1;) {
				var o$1 = r$1[i$1++];
				this.importTemplates(n$1, o$1.templates), n$1 = n$1.next;
			}
		} catch (t$2) {
			return console.error("restoring templates failed", t$2), !1;
		}
		return !0;
	}, t.prototype.importPhraseTemplates = function(t$1, e$1) {
		if (Array.isArray(e$1)) for (var r$1 = 0; t$1;) {
			var n$1 = e$1[r$1++];
			this.importTemplates(t$1, n$1.templates);
			for (var i$1 = t$1.firstWord, o$1 = 0; o$1 < t$1.wordCount; o$1++) {
				var s$1 = n$1.words[o$1];
				this.importTemplates(i$1, s$1.templates);
				for (var a$1 = i$1.firstChar, u$1 = 0; u$1 < i$1.charCount; u$1++) {
					var c$1 = s$1.characters[u$1];
					this.importTemplates(a$1, c$1.templates), a$1 = a$1.next;
				}
				i$1 = i$1.next;
			}
			if (e$1.length < r$1 + 1) break;
			t$1 = t$1.next;
		}
	}, t.prototype.importTemplates = function(t$1, e$1) {
		if (Array.isArray(e$1)) for (var r$1 = 0, n$1 = e$1; r$1 < n$1.length; r$1++) {
			var i$1 = n$1[r$1], o$1 = this.importInstance(i$1);
			o$1 && t$1.addTemplate(o$1);
		}
	}, t.prototype.importInstance = function(t$1) {
		var e$1 = this.getByName(t$1.type), r$1 = this.newInstance(e$1);
		if (!r$1 || !t$1.value) return null;
		for (var n$1 = 0, i$1 = Object.keys(t$1.value); n$1 < i$1.length; n$1++) {
			var o$1 = i$1[n$1], s$1 = vt(t$1.value[o$1], this.interpreter.wrapperTable);
			void 0 !== s$1 && this.setProperty(r$1, o$1, s$1);
		}
		return r$1;
	}, t.prototype.updateInstance = function(t$1, e$1) {
		var r$1 = t$1, n$1 = e$1, i$1 = this.newRawInstance(n$1), o$1 = r$1.templateInstance, s$1 = this.interpreter.cleanupProperties(o$1);
		r$1.templateClass !== n$1 && (this.disposeInstance(r$1), n$1.instances.push(r$1)), r$1.templateClass = n$1, r$1.scope = i$1.scope, r$1.templateInstance = i$1.templateInstance, r$1.ignore = i$1.ignore, this.interpreter.restoreProperties(r$1.templateInstance, s$1), this.attachGetAssignedUnitMethod(r$1);
	}, t.prototype.newInstance = function(t$1) {
		var e$1;
		try {
			if (null === (e$1 = this.newRawInstance(t$1))) return null;
		} catch (t$2) {
			return null;
		}
		return this.attachGetAssignedUnitMethod(e$1), t$1.instances.push(e$1), e$1;
	}, t.prototype.attachGetAssignedUnitMethod = function(t$1) {
		var e$1 = this;
		if (this.unsafeAcceleration) t$1.unsafeTemplateInstance.getAssignedUnit = function() {
			return t$1.assignedUnit;
		};
		else {
			var r$1 = this.interpreter.createFunction((function() {
				return e$1.interpreter.wrap(t$1.assignedUnit);
			}));
			this.interpreter.setRawProperty(t$1.templateInstance, "getAssignedUnit", r$1);
		}
	}, t.prototype.disposeInstance = function(t$1) {
		var e$1 = t$1.templateClass;
		e$1.instances = e$1.instances.filter((function(e$2) {
			return e$2 !== t$1;
		}));
	}, t.prototype.disposeInstances = function(t$1) {
		var e$1 = this;
		if (Array.isArray(t$1)) t$1.forEach((function(t$2) {
			return e$1.disposeInstance(t$2);
		}));
		else {
			var r$1 = t$1;
			[
				r$1.firstCredit,
				r$1.firstPhrase,
				r$1.firstWord,
				r$1.firstChar,
				r$1.firstGraphic
			].forEach((function(t$2) {
				for (; t$2;) e$1.disposeInstances(t$2.removeTemplates()), t$2 = t$2.next;
			}));
		}
	}, t.prototype.setTemplate = function(t$1, e$1) {
		this.removeTemplates(t$1), t$1.addTemplate(e$1);
	}, t.prototype.clearTemplate = function(t$1) {
		this.removeTemplates(t$1);
	}, t.prototype.removeTemplateAt = function(t$1, e$1) {
		var r$1 = t$1.removeTemplateAt(e$1);
		r$1 && this.disposeInstance(r$1);
	}, t.prototype.removeTemplates = function(t$1) {
		var e$1 = t$1.removeTemplates();
		this.disposeInstances(e$1);
	}, t.prototype.getRequiredTemplates = function(t$1) {
		return nn(t$1).dependencies;
	}, t.prototype.getRequiredTemplateAt = function(t$1, e$1) {
		return nn(t$1, e$1).dependencyAtCursor;
	}, t.prototype.exec = function(t$1, e$1, r$1) {
		if (t$1.unsafeTemplateInstance) {
			var n$1 = t$1.unsafeTemplateInstance;
			return n$1[e$1].apply(n$1, r$1);
		}
		var i$1 = this.interpreter.exec(t$1.templateInstance, e$1, r$1, t$1.assignedUnit ? " assigned to " + t$1.assignedUnit.toString() : "");
		return this.interpreter.unwrap(i$1);
	}, t.prototype.declareVariable = function(t$1, e$1, r$1, n$1) {
		return this.updateClassScript(t$1, function(t$2, e$2, r$2, n$2) {
			try {
				var i$1 = rn(t$2), o$1 = i$1.ast, s$1 = i$1.fields, a$1 = s$1[s$1.length - 1], u$1 = t$2.match(/(\r\n|[\n\v\f\r\x85\u2028\u2029])/), c$1 = u$1 ? u$1.pop() : "\n", l$1 = t$2.split(c$1), p$1 = a$1 ? Array(a$1.loc.start.column + 1).join(" ") : "  ", h$1 = a$1 ? a$1.loc.end.line : 0;
				if (h$1 <= 0) {
					var d$1 = o$1.body[0].body, f$1 = l$1[d$1.loc.start.line - 1], y$1 = f$1.substring(0, d$1.loc.start.column + 1), g$1 = f$1.substring(d$1.loc.start.column + 1);
					l$1[d$1.loc.start.line - 1] = y$1, l$1.splice(d$1.loc.start.line, 0, g$1), h$1 = d$1.loc.start.line;
				}
				for (var v$1 = void 0; (v$1 = "var" + Math.random().toString().substring(2)).length > 8 && (v$1 = v$1.substring(0, 8)), !(t$2.indexOf(v$1) < 0););
				l$1.length > h$1 && l$1[h$1].length > 0 && l$1.splice(h$1, 0, ""), l$1.splice(h$1, 0, "", p$1 + "// @proposed", p$1 + "// @title " + e$2, p$1 + "// " + function(t$3, e$3) {
					if ("Slider" === t$3) return "@ui Slider(" + e$3.min + ", " + e$3.max + ")";
					if ("Check" === t$3) return "@ui Check()";
					if ("Color" === t$3) return "@ui Color()";
					var r$3 = e$3.etc;
					return "@comment " + (r$3 = r$3.replace(/(\r\n|[\n\v\f\r\x85\u2028\u2029])/g, "")).replace(/\/[*/]/g, "");
				}(r$2, n$2), p$1 + "this." + v$1 + " = " + function(t$3, e$3) {
					return "Slider" === t$3 ? ((e$3.min + e$3.max) / 2).toString() : "Check" === t$3 ? "false" : "Color" === t$3 ? "new Color(\"#000000\")" : "null";
				}(r$2, n$2) + ";"), t$2 = l$1.join(c$1);
			} catch (t$3) {}
			return t$2;
		}(t$1.model.script, e$1, r$1, n$1));
	}, t.prototype.onVideoReady = function(t$1) {
		this.ready && (this.interpreter.setRawProperty(this.interpreter.globalScope, "width", this._player.resolutionWidth), this.interpreter.setRawProperty(this.interpreter.globalScope, "height", this._player.resolutionHeight), this.interpreter.setRawProperty(this.interpreter.globalScope, "margin", this.interpreter.wrap(this._player.margin)), this.interpreter.setRawProperty(this.interpreter.globalScope, "duration", (null == t$1 ? void 0 : t$1.duration) || 0));
	}, t;
}(), Fi = "<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 200 200\"><defs><style>.bg{fill:#1f4391;}.fg{fill:#fff;}</style></defs><g class=\"logo-sq\"><rect class=\"bg\" x=\"-20\" y=\"-20\" width=\"240\" height=\"240\"/><g class=\"textalive-logo-art\"><path class=\"fg\" d=\"M97.33,130.81V142a3,3,0,0,0,4.78,2.41l56.81-42.09a3,3,0,0,0,0-4.81l-8.33-6.14Z\"/><path class=\"fg\" d=\"M137.14,81.43l-35-25.84A3,3,0,0,0,97.33,58v52.92Z\"/><path class=\"fg\" d=\"M51,55H80.33a2,2,0,0,1,2,2V71.67a0,0,0,0,1,0,0H51a2,2,0,0,1-2-2V57A2,2,0,0,1,51,55Z\"/><path class=\"fg\" d=\"M44.83,107.5h56.33a2,2,0,0,1,2,2v12.67a2,2,0,0,1-2,2H44.83a0,0,0,0,1,0,0V107.5A0,0,0,0,1,44.83,107.5Z\" transform=\"translate(189.83 41.84) rotate(90)\"/></g></g></svg>", Li = "https://textalive.jp", Di = function() {
	function t(t$1) {
		var e$1, r$1 = this;
		if (this.player = t$1, this._position = "embed", this._rounded = !1, this._bordered = !1, this._shadowed = !1, this._background = "#fff", this._color = "#1f4391", void 0 !== (null === (e$1 = t$1.options) || void 0 === e$1 ? void 0 : e$1.mediaBannerPosition) && (this._position = t$1.options.mediaBannerPosition), this.domEnabled) {
			this.logoAnchor = document.createElement("a"), this.logoAnchor.className = "textalive-logo", this.logoAnchor.innerHTML = Fi, this.logoAnchor.style.padding = this.bordered ? "1px 2px" : "1px 3px", this.logoAnchor.href = Li, this.logoAnchor.target = "_blank", this.logoAnchor.title = "Powered by TextAlive App API", this.logoSvg = this.logoAnchor.querySelector("svg"), this.logoSvg.style.width = "24px", this.songNameDiv = document.createElement("div"), this.songNameDiv.className = "name", this.songNameDiv.style.fontWeight = "bold", this.songNameDiv.style.overflow = "hidden", this.songNameDiv.style.textOverflow = "ellipsis", this.songNameDiv.style.marginBottom = "2px", this.songNameDiv.textContent = "-", this.songArtistDiv = document.createElement("div"), this.songArtistDiv.className = "artist", this.songArtistDiv.textContent = "-", this.songArtistDiv.style.overflow = "hidden", this.songArtistDiv.style.textOverflow = "ellipsis";
			var n$1 = document.createElement("span");
			n$1.innerHTML = "<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 150 150\"><g class=\"song\"><path d=\"M120.95,45.77l-59.12,13a2.57,2.57,0,0,0-2,2.51v47.8c0,13.61-12.4,23.74-24.2,23.74-8.92,0-14.82-4.23-14.82-13,0-13,12.86-21.93,23.9-21.93a16.33,16.33,0,0,1,10,3V35a2.57,2.57,0,0,1,2-2.51l69.41-15.29a2.57,2.57,0,0,1,3.13,2.51V92.84c0,13.61-12.1,23.9-24.2,23.9-8.92,0-14.82-4.24-14.82-13,0-13.16,12.86-21.93,23.9-21.93a16.31,16.31,0,0,1,10,2.87V48.29A2.57,2.57,0,0,0,120.95,45.77Z\"/><path d=\"M35.61,134.36c-10.22,0-16.32-5.42-16.32-14.51,0-13.81,13.38-23.43,25.4-23.43a18.4,18.4,0,0,1,8.48,1.88V35a4,4,0,0,1,3.2-4l69.41-15.29a4.07,4.07,0,0,1,5,4V92.83c0,15-13.54,25.4-25.7,25.4-10.22,0-16.32-5.42-16.32-14.51,0-13.81,13.38-23.43,25.4-23.43A19,19,0,0,1,122.57,82V48.29a1.07,1.07,0,0,0-1.3-1h0l-59.12,13a1.08,1.08,0,0,0-.84,1v47.8C61.3,124,47.76,134.36,35.61,134.36Zm9.07-34.94c-10.57,0-22.4,8.74-22.4,20.43,0,10,8.35,11.51,13.32,11.51,13.38,0,22.7-11.72,22.7-22.24V61.31a4.1,4.1,0,0,1,3.2-4l59.12-13h0a4.07,4.07,0,0,1,5,4V87.56l-2.37-1.67a14.88,14.88,0,0,0-9.12-2.6c-10.59,0-22.4,8.39-22.4,20.43,0,10,8.35,11.51,13.32,11.51,10.74,0,22.7-9.2,22.7-22.4V19.72a1.07,1.07,0,0,0-1.3-1L57,34a1.07,1.07,0,0,0-.84,1v68.83l-2.37-1.67A14.87,14.87,0,0,0,44.68,99.42Z\"/></g></svg>", n$1.style.padding = "0 3px 0 0", this.songSvg = n$1.querySelector("svg"), this.songSvg.style.width = "14px", this.songWrapper = document.createElement("div"), this.songWrapper.style.width = "203px", this.songWrapper.style.maxWidth = "203px", this.songWrapper.appendChild(this.songNameDiv), this.songWrapper.appendChild(this.songArtistDiv), this.songAnchor = document.createElement("a"), this.songAnchor.className = "song", this.songAnchor.target = "_blank", this.songAnchor.style.display = "flex", this.songAnchor.style.lineHeight = "1.2em", this.songAnchor.style.padding = "4px 3px 3px 3px", this.songAnchor.style.textDecoration = "none", this.songAnchor.appendChild(n$1), this.songAnchor.appendChild(this.songWrapper), this.lyricsNameDiv = document.createElement("div"), this.lyricsNameDiv.className = "name", this.lyricsNameDiv.style.fontWeight = "bold", this.lyricsNameDiv.textContent = "-", this.lyricsNameDiv.style.overflow = "hidden", this.lyricsNameDiv.style.textOverflow = "ellipsis", this.lyricsNameDiv.style.marginBottom = "2px", this.lyricsArtistDiv = document.createElement("div"), this.lyricsArtistDiv.className = "artist", this.lyricsArtistDiv.textContent = "-", this.lyricsArtistDiv.style.overflow = "hidden", this.lyricsArtistDiv.style.textOverflow = "ellipsis";
			var i$1 = document.createElement("span");
			i$1.innerHTML = "<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 150 150\"><g class=\"lyrics\"><path d=\"M78,126.3H67.52l-6.26-23.82H24.4L18.14,126.3H7.7L35.7,22H50ZM27,92.39H58.65l-15.82-61Z\"/><path d=\"M78,128.3H67.52a2,2,0,0,1-1.93-1.49l-5.87-22.33H25.94l-5.87,22.33a2,2,0,0,1-1.93,1.49H7.7a2,2,0,0,1-1.93-2.52l28-104.34A2,2,0,0,1,35.7,20H50a2,2,0,0,1,1.93,1.48l28,104.34A2,2,0,0,1,78,128.3Zm-8.89-4h6.29L48.43,24H37.23L10.31,124.3h6.28L22.46,102a2,2,0,0,1,1.93-1.49H61.26A2,2,0,0,1,63.2,102ZM58.65,94.39H27a2,2,0,0,1-1.94-2.5l15.82-61a2,2,0,0,1,3.87,0l15.82,61a2,2,0,0,1-1.94,2.5Zm-29.06-4H56.07L42.83,39.32Z\"/><path d=\"M106.82,128c-17.74,0-26.43-13-26.43-36.52S89.09,55,106.82,55a21.78,21.78,0,0,1,15.83,6.43L134,56.22V112c0,5.22,1.56,8,4.7,8a7.31,7.31,0,0,0,3.65-1v6.61A17.77,17.77,0,0,1,133.6,128a9.61,9.61,0,0,1-9.74-7.65A22.4,22.4,0,0,1,106.82,128Zm0-10.09a18.15,18.15,0,0,0,16.69-10.61V75.7a18.15,18.15,0,0,0-16.69-10.61c-11.3,0-16,9.56-16,26.43S95.52,118,106.82,118Z\"/><path d=\"M133.6,130A11.61,11.61,0,0,1,123.08,124,24.48,24.48,0,0,1,106.82,130c-13,0-28.43-6.68-28.43-38.52S93.85,53,106.82,53A23.88,23.88,0,0,1,123,59.05l10.08-4.65A2,2,0,0,1,136,56.22V112c0,4,.91,6,2.7,6a5.3,5.3,0,0,0,2.66-.78,2,2,0,0,1,3,1.74v6.61a2,2,0,0,1-1,1.74A19.64,19.64,0,0,1,133.6,130Zm-9.74-11.65a2,2,0,0,1,1.95,1.55,7.63,7.63,0,0,0,7.79,6.1,15.19,15.19,0,0,0,6.69-1.64v-2.52a8.51,8.51,0,0,1-1.65.16c-2.5,0-6.7-1.3-6.7-10V59.34l-8.46,3.91a2,2,0,0,1-2.25-.4A19.67,19.67,0,0,0,106.82,57C90.61,57,82.39,68.62,82.39,91.52S90.61,126,106.82,126a20.33,20.33,0,0,0,15.55-7A2,2,0,0,1,123.86,118.39Zm-17,1.57c-11.94,0-18-9.57-18-28.43s6.06-28.43,18-28.43a20.07,20.07,0,0,1,18.5,11.75,2,2,0,0,1,.19.86v31.65a2,2,0,0,1-.19.86A20.06,20.06,0,0,1,106.82,120Zm0-52.86c-12.55,0-14,13.94-14,24.43,0,21.9,8,24.43,14,24.43a16.13,16.13,0,0,0,14.69-9.07V76.16A16.13,16.13,0,0,0,106.82,67.09Z\"/></g></svg>", i$1.style.padding = "0 3px 0 0", this.lyricsSvg = i$1.querySelector("svg"), this.lyricsSvg.style.width = "14px", this.lyricsWrapper = document.createElement("div"), this.lyricsWrapper.style.width = "90px", this.lyricsWrapper.style.maxWidth = "90px", this.lyricsWrapper.appendChild(this.lyricsNameDiv), this.lyricsWrapper.appendChild(this.lyricsArtistDiv), this.lyricsAnchor = document.createElement("a"), this.lyricsAnchor.className = "lyrics", this.lyricsAnchor.target = "_blank", this.lyricsAnchor.style.display = "flex", this.lyricsAnchor.style.lineHeight = "1.2em", this.lyricsAnchor.style.padding = "4px 3px 3px 3px", this.lyricsAnchor.style.textDecoration = "none", this.lyricsAnchor.appendChild(i$1), this.lyricsAnchor.appendChild(this.lyricsWrapper), this.bannerDiv = document.createElement("div"), this.bannerDiv.className = "textalive-banner", this.bannerDiv.style.cursor = "pointer", this.bannerDiv.style.zIndex = "10000", this.bannerDiv.style.background = "#1f4391", this.bannerDiv.style.lineHeight = "0", this.bannerDiv.style.display = "flex", this.bannerDiv.style.maxWidth = "256px", this.bannerDiv.style.fontFamily = "'Hiragino Kaku Gothic Pro','','Yu Gothic',YuGothic,Meiryo,HelveticaNeue,'Helvetica Neue',Helvetica,Arial,sans-serif", this.bannerDiv.style.fontSize = "9px", this.bannerDiv.style.alignItems = "center", this.bannerDiv.style.whiteSpace = "nowrap", this.bannerDiv.appendChild(this.logoAnchor), this.bannerDiv.appendChild(this.songAnchor), this.bannerDiv.appendChild(this.lyricsAnchor), this.songAnchor.style.display = "none", this.lyricsAnchor.style.display = "none", this.updatePosition(), this.updateRounded(), this.updateBordered(), this.updateShadowed(), this.updateBackground(), this.updateColor();
		}
		this.listener = {
			onAppReady: function() {
				r$1.updatePosition();
			},
			onMediaElementSet: function(t$2) {
				r$1.domEnabled && (r$1.bannerDiv && r$1.bannerDiv.parentElement && r$1.bannerDiv.parentElement.removeChild(r$1.bannerDiv), r$1.player.mediaBannerElement && r$1.player.mediaBannerElement.appendChild(r$1.bannerDiv));
			},
			onVideoLoad: function() {
				r$1.domEnabled && (r$1.logoAnchor.href = Li, r$1.songAnchor.style.display = "none", r$1.lyricsAnchor.style.display = "none", r$1.songAnchor.style.borderRadius = "0");
			},
			onSongLoad: function(t$2) {
				return yn(r$1, 0, void 0, (function() {
					var e$2, r$2, n$2, i$2, o$1, s$1, a$1, u$1, l$1;
					return gn(this, (function(p$1) {
						switch (p$1.label) {
							case 0: return t$2 ? (e$2 = null === (a$1 = null === (s$1 = null == t$2 ? void 0 : t$2.song) || void 0 === s$1 ? void 0 : s$1.artist) || void 0 === a$1 ? void 0 : a$1.name, r$2 = null === (u$1 = null == t$2 ? void 0 : t$2.song) || void 0 === u$1 ? void 0 : u$1.name, n$2 = null === (l$1 = null == t$2 ? void 0 : t$2.song) || void 0 === l$1 ? void 0 : l$1.permalink, i$2 = "".concat(Li).concat(n$2 ? "/songs/".concat(encodeURIComponent(c.getSongPathFromUrl(n$2))) : ""), this.domEnabled && (this.logoAnchor.href = i$2, this.songArtistDiv.textContent = Mi(e$2), this.songNameDiv.textContent = Mi(r$2), this.songAnchor.title = "".concat(Mi(r$2), " by ").concat(Mi(e$2)), this.songAnchor.href = n$2, this.songAnchor.style.display = "flex", this.songAnchor.style.borderRadius = this.rounded ? "0 4px 4px 0" : "0", this.songWrapper.style.width = "auto"), [4, A.getServerStatus()]) : [2];
							case 1: return "ja" === (null == (o$1 = p$1.sent()) ? void 0 : o$1.lang) ? console.warn("[TextAlive API]  :", Mi(e$2), "/ :", Mi(r$2), "/ :", Mi(n$2)) : console.warn("[TextAlive API] Song artist:", Mi(e$2), "/ song name:", Mi(r$2), "/ distributed at:", Mi(n$2)), [2];
						}
					}));
				}));
			},
			onLyricsLoad: function(t$2) {
				t$2 && r$1.domEnabled && (r$1.songWrapper.style.maxWidth = "90px", r$1.lyricsAnchor.style.display = "flex", r$1.songAnchor.style.borderRadius = "0");
			},
			onTextLoad: function(t$2) {
				return yn(r$1, 0, void 0, (function() {
					var e$2, r$2, n$2, i$2, o$1;
					return gn(this, (function(s$1) {
						switch (s$1.label) {
							case 0: return t$2 ? (e$2 = null === (o$1 = null == t$2 ? void 0 : t$2.artist) || void 0 === o$1 ? void 0 : o$1.name, r$2 = null == t$2 ? void 0 : t$2.name, n$2 = null == t$2 ? void 0 : t$2.url, this.domEnabled && (this.lyricsArtistDiv.textContent = Mi(e$2), this.lyricsNameDiv.textContent = Mi(r$2), this.lyricsAnchor.title = "".concat(Mi(r$2), " by ").concat(Mi(e$2)), this.lyricsAnchor.href = n$2, this.lyricsWrapper.style.width = "auto"), [4, A.getServerStatus()]) : [2];
							case 1: return "ja" === (null == (i$2 = s$1.sent()) ? void 0 : i$2.lang) ? console.warn("[TextAlive API]  :", Mi(e$2), "/ :", Mi(r$2), "/ :", Mi(n$2)) : console.warn("[TextAlive API] Song lyrics artist:", Mi(e$2), "/ lyrics name:", Mi(r$2), "/ distributed at:", Mi(n$2)), [2];
						}
					}));
				}));
			},
			onDispose: function() {
				r$1.dispose();
			}
		}, t$1.addListener(this.listener), t$1.mediaBannerElement && this.player.mediaBannerElement.appendChild(this.bannerDiv);
	}
	return Object.defineProperty(t.prototype, "domEnabled", {
		get: function() {
			return "undefined" != typeof window && "undefined" != typeof document && "function" == typeof document.createElement;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "position", {
		get: function() {
			return this._position;
		},
		set: function(t$1) {
			this._position = t$1, this.updatePosition();
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "rounded", {
		get: function() {
			return this._rounded;
		},
		set: function(t$1) {
			this._rounded = t$1, this.updateRounded();
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "bordered", {
		get: function() {
			return this._bordered;
		},
		set: function(t$1) {
			this._bordered = t$1, this.updateBordered();
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "shadowed", {
		get: function() {
			return this._shadowed;
		},
		set: function(t$1) {
			this._shadowed = t$1, this.updateShadowed();
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "background", {
		get: function() {
			return this._background;
		},
		set: function(t$1) {
			this._background = t$1, this.updateBackground();
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "color", {
		get: function() {
			return this._color;
		},
		set: function(t$1) {
			this._color = t$1, this.updateColor();
		},
		enumerable: !1,
		configurable: !0
	}), t.prototype.dispose = function() {
		this.player.removeListener(this.listener);
	}, t.prototype.updatePosition = function() {
		var t$1, e$1;
		if (this.domEnabled) {
			var r$1 = this.position, n$1 = this.player;
			if (null === r$1 || !(null === (t$1 = n$1.options) || void 0 === t$1 ? void 0 : t$1.app) || (null === (e$1 = n$1.app) || void 0 === e$1 ? void 0 : e$1.managed)) this.bannerDiv.style.display = "none";
			else if (this.bannerDiv.style.display = "flex", "embed" === r$1) this.bannerDiv.style.position = "initial", this.bannerDiv.style.marginTop = "4px", this.songAnchor.style.flexGrow = "1", this.lyricsAnchor.style.flexGrow = "1";
			else {
				this.bannerDiv.style.position = "fixed", this.bannerDiv.style.marginTop = "0";
				var i$1 = r$1.indexOf("top") >= 0, o$1 = r$1.indexOf("right") >= 0, s$1 = r$1.indexOf("bottom") >= 0, a$1 = r$1.indexOf("left") >= 0;
				this.bannerDiv.style.top = i$1 ? "4px" : "initial", this.bannerDiv.style.right = o$1 ? "4px" : "initial", this.bannerDiv.style.bottom = s$1 ? "4px" : "initial", this.bannerDiv.style.left = a$1 ? "4px" : "initial", this.songAnchor.style.flexGrow = "0", this.lyricsAnchor.style.flexGrow = "0";
			}
		}
	}, t.prototype.updateRounded = function() {
		if (this.domEnabled) {
			var t$1 = this.rounded;
			this.logoSvg.style.borderRadius = t$1 ? "4px 0 0 4px" : "0", this.lyricsAnchor.style.borderRadius = t$1 ? "0 4px 4px 0" : "0", this.bannerDiv.style.borderRadius = t$1 ? "4px" : "0";
		}
	}, t.prototype.updateBordered = function() {
		if (this.domEnabled) {
			var t$1 = this.bordered;
			this.logoAnchor.style.padding = t$1 ? "1px 2px" : "1px 3px", this.bannerDiv.style.border = t$1 ? "1px solid rgba(31, 67, 145, 0.3)" : "none";
		}
	}, t.prototype.updateShadowed = function() {
		if (this.domEnabled) {
			var t$1 = this.shadowed;
			this.bannerDiv.style.boxShadow = t$1 ? "1px 1px 3px 0 rgba(9, 19, 42, 0.9)" : "none";
		}
	}, t.prototype.updateBackground = function() {
		this.domEnabled && (this.songAnchor.style.background = this.background, this.lyricsAnchor.style.background = this.background);
	}, t.prototype.updateColor = function() {
		this.domEnabled && (this.songSvg.style.fill = this.color, this.songAnchor.style.color = this.color, this.lyricsSvg.style.fill = this.color, this.lyricsAnchor.style.color = this.color);
	}, t;
}();
function Mi(t) {
	return t && "" !== t ? t : "-";
}
var Bi = function() {
	this.halted = [], this.errors = [];
}, Vi = function() {
	function t(t$1, e$1) {
		var r$1 = this;
		this.listener = e$1, this.player = null, this._scale = 1, this.playerListener = {
			onResize: function(t$2) {
				r$1.elementWidth = Math.floor(t$2.width), r$1.updateSize();
			},
			onVideoReady: function() {
				r$1.elementWidth = r$1.calcWidth(), r$1.updateSize();
			},
			onStageElementSet: function(t$2) {
				r$1.elementWidth = r$1.calcWidth(), r$1.updateSize(), r$1.player.graphics.setCanvas(t$2);
			},
			onDispose: function() {
				r$1.dispose();
			}
		}, this.requestedTime = 0, this.request = null, this.player = t$1, t$1.addListener(this.playerListener);
	}
	return Object.defineProperty(t.prototype, "scale", {
		get: function() {
			return this._scale;
		},
		set: function(t$1) {
			this._scale = t$1, this.updateSize();
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "width", {
		get: function() {
			return this.player.graphics.width;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "height", {
		get: function() {
			return this.player.graphics.height;
		},
		enumerable: !1,
		configurable: !0
	}), t.prototype.requestUpdate = function(t$1) {
		return yn(this, 0, void 0, (function() {
			var e$1 = this;
			return gn(this, (function(r$1) {
				return this.requestedTime = void 0 === t$1 ? this.player.videoPosition : t$1, this.request || (this.request = new Promise((function(t$2) {
					setTimeout((function() {
						try {
							e$1.update(e$1.requestedTime);
						} catch (t$3) {}
						e$1.request = null, t$2(e$1.requestedTime);
					}), 0);
				}))), [2, this.request];
			}));
		}));
	}, t.prototype.update = function(t$1) {
		t$1 || (t$1 = this.player.mediaPosition), "number" == typeof t$1 && (this.player.graphics.reset(), this.animate(t$1), this.player.graphics.update(), this.listener.onStageUpdate(t$1));
	}, t.prototype.animate = function(t$1) {
		for (var e$1 = new Bi(), r$1 = e$1.errors, n$1 = e$1.halted, i$1 = 0, o$1 = [
			this.player.video.firstCredit,
			this.player.video.firstPhrase,
			this.player.video.firstWord,
			this.player.video.firstChar,
			this.player.video.firstGraphic
		]; i$1 < o$1.length; i$1++) for (var s$1 = o$1[i$1]; s$1;) this.animateRenderingUnit(t$1, s$1, e$1), s$1 = s$1.next;
		if (n$1.length > 0) {
			console.error("---");
			for (var a$1 = 0; a$1 < n$1.length; a$1++) console.error("halted", n$1[a$1], r$1[a$1]);
		}
	}, t.prototype.animateRenderingUnit = function(t$1, e$1, r$1) {
		if (e$1.animate) e$1.animate(t$1, e$1);
		else if (e$1.templateCount <= 0) Gi(e$1) && e$1.getType() === n.CHAR && (e$1.rendering.visible = !1);
		else for (var i$1 = 0; i$1 < e$1.templateCount; i$1++) this.animateTemplate(t$1, e$1, e$1.getTemplate(i$1), r$1);
	}, t.prototype.animateTemplate = function(t$1, e$1, r$1, i$1) {
		var o$1 = this;
		if (r$1.ignore) e$1.rendering.visible = !1;
		else {
			if (e$1.getType() !== n.GRAPHIC) for (var s$1 = e$1.parent; s$1;) {
				if (s$1.templateCount > 0 && (!s$1.rendering.visible || 0 === s$1.rendering.alpha)) return void (e$1.rendering.visible = !1);
				s$1 = s$1.parent;
			}
			var a$1 = this.player.templates.getProperty(r$1, "insomnia"), u$1 = Gi(e$1);
			if (!a$1 && u$1) {
				if (function(t$2, e$2, r$2, i$2) {
					var o$2 = i$2 && t$2(i$2, "headTime") || 500, s$2 = i$2 && t$2(i$2, "tailTime") || 500;
					return !(r$2.startTime - o$2 <= e$2 && r$2.endTime + s$2 >= e$2) && (r$2.getType() !== n.GRAPHIC && (r$2.rendering.visible = !1), !0);
				}((function(t$2, e$2) {
					return o$1.player.templates.getProperty(t$2, e$2);
				}), t$1, e$1, r$1)) return;
			}
			this.doAnimateTemplate(t$1, r$1, i$1);
		}
	}, t.prototype.doAnimateTemplate = function(t$1, e$1, r$1) {
		var n$1 = r$1.errors, i$1 = r$1.halted;
		try {
			this.player.templates.exec(e$1, "animate", [t$1]);
		} catch (t$2) {
			n$1.push(t$2), i$1.push(e$1);
		}
	}, t.prototype.calcWidth = function() {
		var t$1 = this.player.stageElement;
		if (!t$1) return 0;
		var e$1 = window.getComputedStyle(t$1);
		return t$1.offsetWidth - ln(e$1.borderLeftWidth) - ln(e$1.borderRightWidth) - ln(e$1.paddingLeft) - ln(e$1.paddingRight);
	}, t.prototype.updateSize = function() {
		var t$1 = this.player.stageElement;
		if (t$1) {
			var e$1 = this.elementWidth * this.player.videoProportion;
			if (t$1.style.height = "".concat(e$1, "px"), t$1.width = this.elementWidth * this._scale, t$1.height = e$1 * this._scale, this.player.video) {
				var r$1 = t$1.width / this.player.videoWidth;
				this.player.graphics.updateStageTx(r$1, this.player.margin), this.player.isPlaying || this.requestUpdate();
			}
		}
	}, t.prototype.dispose = function() {
		this.player.removeListener(this.playerListener), this.player = null;
	}, t;
}();
function Gi(t) {
	if (t.getType() === n.GRAPHIC) return !0;
	for (var e$1 = !0, r$1 = t.parent; r$1;) {
		if (r$1.templateCount > 0) {
			e$1 = !1;
			break;
		}
		r$1 = r$1.parent;
	}
	return e$1;
}
var qi = function(t) {
	function e$1(e$2, r$1) {
		var n$1 = this.constructor, i$1 = t.call(this, e$2) || this;
		return i$1.video = r$1, Object.setPrototypeOf(i$1, n$1.prototype), i$1;
	}
	return dn(e$1, t), e$1;
}(Error);
function Wi(t, e$1) {
	var r$1 = e$1.parser;
	return yn(this, 0, void 0, (function() {
		var e$2, n$1, i$1;
		return gn(this, (function(o$1) {
			switch (o$1.label) {
				case 0: return t && t.length > 0 && t[0].words && t[0].words.length > 0 && t[0].words[0] && !t[0].words[0].pos ? (e$2 = t.map((function(t$1) {
					return t$1.words.map((function(t$2) {
						return t$2.characters.map((function(t$3) {
							return t$3.char;
						})).join("");
					})).join(" ");
				})), n$1 = e$2.join("\n"), [4, r$1(n$1)]) : [2];
				case 1: return (i$1 = o$1.sent()) && "success" === i$1.status ? (t.forEach((function(t$1, r$2) {
					var n$2 = i$1.result[r$2], o$2 = 0;
					t$1.words.forEach((function(t$2) {
						var i$2 = t$2.characters.map((function(t$3) {
							return t$3.char;
						})).join(""), s$1 = e$2[r$2].indexOf(i$2, o$2);
						if (!(s$1 < 0)) {
							o$2 = s$1;
							var a$1 = n$2.find((function(t$3) {
								return t$3.startPosition <= s$1 && t$3.endPosition >= s$1;
							}));
							a$1 && (t$2.pos = a$1.PoS, t$2.rawPoS = a$1.rawPoS, t$2.language = a$1.language);
						}
					}));
				})), [2]) : [2];
			}
		}));
	}));
}
function Yi(t) {
	for (; t.firstElementChild;) t.removeChild(t.firstElementChild);
}
function zi(t, e$1) {
	var r$1 = e$1.id, n$1 = e$1.data, i$1 = e$1.loader, o$1 = e$1.deserializer;
	return yn(this, 0, void 0, (function() {
		return gn(this, (function(e$2) {
			switch (e$2.label) {
				case 0: return r$1 && r$1 >= 0 ? [4, i$1(r$1)] : [3, 2];
				case 1: e$2.sent(), e$2.label = 2;
				case 2: return o$1(t, n$1), [2];
			}
		}));
	}));
}
function Ji(t) {
	return "string" != typeof t ? t : "undefined" == typeof window ? null : document.querySelector(t);
}
var Hi = function() {
	function t(t$1) {
		this._mediaPosition = 0, this._videoPosition = 0, this.isEditing = !1, this._isVideoSeeking = !1, this._volume = 100, this._options = t$1, this.emitter = new On(t$1), this._templates = new Ui(this, this.emitter, t$1 && t$1.unsafeAcceleration);
		var e$1 = Object.assign({}, Y);
		t$1 && t$1.managers && (e$1 = Object.assign(e$1, t$1.managers)), this.managers = e$1, this._timer = t$1 && t$1.timer || this.createDefaultTimer(), this._data = new Vn(e$1, this.emitter, t$1), this._backgroundGraphics = new Sn(this, e$1.asset, this.emitter), this._graphics = t$1 && t$1.graphics || this.createDefaultGraphicsDriver(), this.stage = new Vi(this, { onStageUpdate: this.onStageUpdate.bind(this) }), this._banner = new Di(this), this.stageElement = Ji(null == t$1 ? void 0 : t$1.stageElement) || null, this.mediaElement = Ji(null == t$1 ? void 0 : t$1.mediaElement) || null, this._app = new Gn(this, this.emitter);
	}
	return Object.defineProperty(t.prototype, "options", {
		get: function() {
			return this._options ? fn({}, this._options) : null;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "app", {
		get: function() {
			return this._app;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "data", {
		get: function() {
			return this._data;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "backgroundGraphics", {
		get: function() {
			return this._backgroundGraphics;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "video", {
		get: function() {
			return this._video;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "templates", {
		get: function() {
			return this._templates;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "graphics", {
		get: function() {
			return this._graphics;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "stageElement", {
		get: function() {
			return this._stageElement;
		},
		set: function(t$1) {
			this._stageElement = t$1, this.emitter.onStageElementSet(t$1);
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "stageScale", {
		get: function() {
			return this.stage.scale;
		},
		set: function(t$1) {
			this.stage.scale = t$1;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "mediaElement", {
		get: function() {
			return this._mediaElement;
		},
		set: function(t$1) {
			this.updateMediaElement(t$1);
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "mediaSourceElement", {
		get: function() {
			return this._mediaSourceElement;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "mediaBannerElement", {
		get: function() {
			return this._mediaBannerElement;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "mediaPosition", {
		get: function() {
			return this._mediaPosition;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "videoPosition", {
		get: function() {
			return this._videoPosition;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "wait", {
		get: function() {
			return this._timer ? this._timer.wait : 0;
		},
		set: function(t$1) {
			this._timer && (this._timer.wait = t$1);
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "fps", {
		get: function() {
			return 1e3 / this.wait;
		},
		set: function(t$1) {
			this.wait = 1e3 / t$1;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "resolutionWidth", {
		get: function() {
			var t$1, e$1, r$1, n$1;
			return "object" == typeof (null === (e$1 = null === (t$1 = this._data) || void 0 === t$1 ? void 0 : t$1.video) || void 0 === e$1 ? void 0 : e$1.config) && "number" == typeof this._data.video.config.width ? this._data.video.config.width : "number" == typeof (null === (n$1 = null === (r$1 = this._options) || void 0 === r$1 ? void 0 : r$1.defaultVideoSize) || void 0 === n$1 ? void 0 : n$1.width) ? this._options.defaultVideoSize.width : 1280;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "resolutionHeight", {
		get: function() {
			var t$1, e$1, r$1, n$1;
			return "object" == typeof (null === (e$1 = null === (t$1 = this._data) || void 0 === t$1 ? void 0 : t$1.video) || void 0 === e$1 ? void 0 : e$1.config) && "number" == typeof this._data.video.config.height ? this._data.video.config.height : "number" == typeof (null === (n$1 = null === (r$1 = this._options) || void 0 === r$1 ? void 0 : r$1.defaultVideoSize) || void 0 === n$1 ? void 0 : n$1.height) ? this._options.defaultVideoSize.height : 720;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "resolutionProportion", {
		get: function() {
			return this.resolutionHeight / this.resolutionWidth;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "margin", {
		get: function() {
			var t$1, e$1, r$1, n$1;
			return "object" == typeof (null === (e$1 = null === (t$1 = this._data) || void 0 === t$1 ? void 0 : t$1.video) || void 0 === e$1 ? void 0 : e$1.config) && this._data.video.config.margin ? this._data.video.config.margin : (null === (n$1 = null === (r$1 = this._options) || void 0 === r$1 ? void 0 : r$1.defaultVideoSize) || void 0 === n$1 ? void 0 : n$1.margin) || _n;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "videoWidth", {
		get: function() {
			var t$1 = this.resolutionWidth, e$1 = this.margin;
			return t$1 + e$1[1] + e$1[3];
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "videoHeight", {
		get: function() {
			var t$1 = this.resolutionHeight, e$1 = this.margin;
			return t$1 + e$1[0] + e$1[2];
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "videoProportion", {
		get: function() {
			return this.videoHeight / this.videoWidth;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "stageWidth", {
		get: function() {
			return this.stage.width;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "stageHeight", {
		get: function() {
			return this.stage.height;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "isLoading", {
		get: function() {
			return !!this._videoPromise;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "isPlaying", {
		get: function() {
			return !!this._timer && this._timer.isPlaying;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "isVideoSeeking", {
		get: function() {
			return this._isVideoSeeking;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "banner", {
		get: function() {
			return this._banner;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "timer", {
		get: function() {
			return this._timer;
		},
		enumerable: !1,
		configurable: !0
	}), Object.defineProperty(t.prototype, "volume", {
		get: function() {
			return this._volume;
		},
		set: function(t$1) {
			isNaN(t$1) || (this._volume = Math.min(100, Math.max(0, t$1)), this.emitter.onVolumeUpdate(this._volume));
		},
		enumerable: !1,
		configurable: !0
	}), t.prototype.createDefaultTimer = function() {
		try {
			if ("undefined" != typeof window && "basic" !== pn("ta_timer")) return new En();
		} catch (t$1) {}
		return new wn();
	}, t.prototype.createDefaultGraphicsDriver = function() {
		return new yt();
	}, t.prototype.addListener = function(t$1) {
		return this.emitter.addListener(t$1);
	}, t.prototype.removeListener = function(t$1) {
		return this.emitter.removeListener(t$1);
	}, t.prototype.createFromVideoId = function(t$1, e$1) {
		return yn(this, 0, void 0, (function() {
			var r$1 = this;
			return gn(this, (function(n$1) {
				return [2, this.create((function() {
					return r$1.doCreateFromVideoId(t$1, e$1);
				}), null == e$1 ? void 0 : e$1.dryRun)];
			}));
		}));
	}, t.prototype.doCreateFromVideoId = function(t$1, e$1) {
		return yn(this, 0, void 0, (function() {
			var r$1;
			return gn(this, (function(n$1) {
				switch (n$1.label) {
					case 0: return [4, (r$1 = new Vn(this.managers, this.emitter, this._options)).createFromVideoId(t$1, null == e$1 ? void 0 : e$1.video)];
					case 1: return n$1.sent(), [2, this.finalize(r$1, e$1)];
				}
			}));
		}));
	}, t.prototype.createFromVideo = function(t$1, e$1) {
		return yn(this, 0, void 0, (function() {
			var r$1 = this;
			return gn(this, (function(n$1) {
				return [2, this.create((function() {
					return r$1.doCreateFromVideo(t$1, e$1);
				}), null == e$1 ? void 0 : e$1.dryRun)];
			}));
		}));
	}, t.prototype.doCreateFromVideo = function(t$1, e$1) {
		return yn(this, 0, void 0, (function() {
			var r$1;
			return gn(this, (function(n$1) {
				return (r$1 = new Vn(this.managers, this.emitter, this._options)).createFromVideo(t$1, null == e$1 ? void 0 : e$1.video), [2, this.finalize(r$1, e$1)];
			}));
		}));
	}, t.prototype.createFromSongUrl = function(t$1, e$1) {
		return yn(this, 0, void 0, (function() {
			var r$1 = this;
			return gn(this, (function(n$1) {
				return [2, this.create((function() {
					return r$1.doCreateFromSongUrl(t$1, e$1);
				}), null == e$1 ? void 0 : e$1.dryRun)];
			}));
		}));
	}, t.prototype.doCreateFromSongUrl = function(t$1, e$1) {
		return yn(this, 0, void 0, (function() {
			var r$1;
			return gn(this, (function(n$1) {
				switch (n$1.label) {
					case 0: return [4, (r$1 = new Vn(this.managers, this.emitter, this._options)).createFromSongUrl(t$1, null == e$1 ? void 0 : e$1.video)];
					case 1: return n$1.sent(), [2, this.finalize(r$1, e$1)];
				}
			}));
		}));
	}, t.prototype.createFromSongPath = function(t$1, e$1) {
		return yn(this, 0, void 0, (function() {
			var r$1 = this;
			return gn(this, (function(n$1) {
				return [2, this.create((function() {
					return r$1.doCreateFromSongPath(t$1, e$1);
				}), null == e$1 ? void 0 : e$1.dryRun)];
			}));
		}));
	}, t.prototype.doCreateFromSongPath = function(t$1, e$1) {
		return yn(this, 0, void 0, (function() {
			var r$1;
			return gn(this, (function(n$1) {
				switch (n$1.label) {
					case 0: return [4, (r$1 = new Vn(this.managers, this.emitter, this._options)).createFromSongPath(t$1, null == e$1 ? void 0 : e$1.video)];
					case 1: return n$1.sent(), [2, this.finalize(r$1, e$1)];
				}
			}));
		}));
	}, t.prototype.createFromSongId = function(t$1, e$1) {
		return yn(this, 0, void 0, (function() {
			var r$1 = this;
			return gn(this, (function(n$1) {
				return [2, this.create((function() {
					return r$1.doCreateFromSongId(t$1, e$1);
				}), null == e$1 ? void 0 : e$1.dryRun)];
			}));
		}));
	}, t.prototype.doCreateFromSongId = function(t$1, e$1) {
		return yn(this, 0, void 0, (function() {
			var r$1;
			return gn(this, (function(n$1) {
				switch (n$1.label) {
					case 0: return [4, (r$1 = new Vn(this.managers, this.emitter, this._options)).createFromSongId(t$1, null == e$1 ? void 0 : e$1.video)];
					case 1: return n$1.sent(), [2, this.finalize(r$1, e$1)];
				}
			}));
		}));
	}, t.prototype.createFromSongCode = function(t$1, e$1) {
		return yn(this, 0, void 0, (function() {
			var r$1 = this;
			return gn(this, (function(n$1) {
				return [2, this.create((function() {
					return r$1.doCreateFromSongCode(t$1, e$1);
				}), null == e$1 ? void 0 : e$1.dryRun)];
			}));
		}));
	}, t.prototype.doCreateFromSongCode = function(t$1, e$1) {
		return yn(this, 0, void 0, (function() {
			var r$1;
			return gn(this, (function(n$1) {
				switch (n$1.label) {
					case 0: return [4, (r$1 = new Vn(this.managers, this.emitter, this._options)).createFromSongCode(t$1, null == e$1 ? void 0 : e$1.video)];
					case 1: return n$1.sent(), [2, this.finalize(r$1, e$1)];
				}
			}));
		}));
	}, t.prototype.createFromText = function(t$1, e$1) {
		return yn(this, 0, void 0, (function() {
			var r$1 = this;
			return gn(this, (function(n$1) {
				return [2, this.create((function() {
					return r$1.doCreateFromText(t$1, e$1);
				}), null == e$1 ? void 0 : e$1.dryRun)];
			}));
		}));
	}, t.prototype.doCreateFromText = function(t$1, e$1) {
		return yn(this, 0, void 0, (function() {
			var r$1;
			return gn(this, (function(n$1) {
				switch (n$1.label) {
					case 0: return [4, (r$1 = new Vn(this.managers, this.emitter, this._options)).createFromText(t$1, null == e$1 ? void 0 : e$1.video)];
					case 1: return n$1.sent(), [2, this.finalize(r$1, e$1)];
				}
			}));
		}));
	}, t.prototype.createFromJSON = function(t$1, e$1) {
		return yn(this, 0, void 0, (function() {
			var r$1 = this;
			return gn(this, (function(n$1) {
				return [2, this.create((function() {
					return r$1.doCreateFromJSON(t$1, e$1);
				}), null == e$1 ? void 0 : e$1.dryRun)];
			}));
		}));
	}, t.prototype.doCreateFromJSON = function(t$1, e$1) {
		return yn(this, 0, void 0, (function() {
			var r$1;
			return gn(this, (function(n$1) {
				return (r$1 = new Vn(this.managers, this.emitter, this._options)).createFromJSON(t$1, null == e$1 ? void 0 : e$1.video), [2, this.finalize(r$1, e$1)];
			}));
		}));
	}, t.prototype.create = function(t$1, e$1) {
		return yn(this, 0, void 0, (function() {
			var r$1, n$1 = this;
			return gn(this, (function(i$1) {
				if (this._videoPromise && !e$1) throw new qi("Player.createFrom* method calls cannot run in parallel", this._videoPromise);
				return r$1 = t$1(), e$1 || (this._videoPromise = r$1, r$1.finally((function() {
					return n$1._videoPromise = null;
				}))), [2, r$1];
			}));
		}));
	}, t.prototype.finalize = function(t$1, e$1) {
		return yn(this, 0, void 0, (function() {
			var r$1, n$1, i$1, o$1 = this;
			return gn(this, (function(s$1) {
				switch (s$1.label) {
					case 0: return t$1.video ? [4, Promise.all([t$1.finalize(e$1), this.backgroundGraphics.setBackground(t$1.video.background)])] : [2, null];
					case 1: return s$1.sent(), (null == e$1 ? void 0 : e$1.dryRun) ? [2, null] : (r$1 = t$1.video.json, function(t$2, e$2) {
						var r$2 = e$2.config, n$2 = e$2.song;
						r$2 && "object" == typeof r$2 && "number" == typeof r$2.duration ? t$2.duration = r$2.duration : n$2 ? t$2.duration = 1e3 * n$2.length : t$2.duration || (t$2.duration = t$2.endTime);
					}(n$1 = new ut(r$1), {
						config: t$1.video.config,
						song: t$1.song
					}), [4, Promise.all([
						this.graphics.createRuntime(n$1),
						zi(n$1, {
							id: t$1.video.id,
							data: r$1,
							loader: function(t$2) {
								return yn(o$1, 0, void 0, (function() {
									return gn(this, (function(e$2) {
										switch (e$2.label) {
											case 0: return [4, this.templates.loadForVideo(t$2)];
											case 1: return e$2.sent(), [2];
										}
									}));
								}));
							},
							deserializer: function(t$2, e$2) {
								return o$1.templates.importInstances(t$2, e$2);
							}
						}),
						Wi(null == r$1 ? void 0 : r$1.phrases, { parser: R.parse.bind(R) })
					])]);
					case 2: return s$1.sent(), this._data, this._video && this.templates.disposeInstances(this._video), this._data = t$1, this._video = n$1, this.emitter.onVideoReady(n$1), i$1 = (null == e$1 ? void 0 : e$1.altSourceUrl) || void 0, [4, this._timer.initialize({
						player: this,
						updater: this.updateMediaPosition.bind(this),
						emitter: this.emitter,
						altSourceUrl: i$1
					})];
					case 3: return s$1.sent(), this.emitter.onTimerReady(this._timer), [2, n$1];
				}
			}));
		}));
	}, t.prototype.updateMediaPosition = function(t$1) {
		return yn(this, 0, void 0, (function() {
			var e$1 = this;
			return gn(this, (function(r$1) {
				return this._isVideoSeeking ? (this._mediaPosition = t$1, this.emitter.onMediaSeek(t$1), [2, t$1]) : [2, this.stage.requestUpdate(t$1).then((function(t$2) {
					return e$1._mediaPosition = t$2, e$1._videoPosition = t$2, e$1.emitter.onMediaSeek(t$2), t$2;
				}))];
			}));
		}));
	}, t.prototype.exportVideo = function(t$1) {
		var e$1, r$1, n$1, i$1, o$1, s$1, a$1;
		return void 0 === t$1 && (t$1 = { legacyStringMode: !0 }), yn(this, 0, void 0, (function() {
			var u$1, c$1, l$1, p$1;
			return gn(this, (function(h$1) {
				return u$1 = {
					sourceId: (null === (e$1 = this._data.video) || void 0 === e$1 ? void 0 : e$1.id) || -1,
					sourceOriginId: (null === (r$1 = this._data.video) || void 0 === r$1 ? void 0 : r$1.sourceOriginId) || -1,
					songleId: (null === (n$1 = this._data.song) || void 0 === n$1 ? void 0 : n$1.id) || -1,
					lyricId: this._data.lyricsId || -1,
					lyricDiffId: (null === (i$1 = this._data.lyrics) || void 0 === i$1 ? void 0 : i$1.id) || -1,
					config: ((null == t$1 ? void 0 : t$1.legacyStringMode) ? (null === (o$1 = this._data.video) || void 0 === o$1 ? void 0 : o$1.config) && JSON.stringify(this._data.video.config) : null === (s$1 = this._data.video) || void 0 === s$1 ? void 0 : s$1.config) || null
				}, c$1 = this.backgroundGraphics.exportPartialVideoEntry(t$1), l$1 = (null === (a$1 = this._video) || void 0 === a$1 ? void 0 : a$1.exportData(this._templates)) || null, p$1 = (null == t$1 ? void 0 : t$1.legacyStringMode) ? JSON.stringify(l$1) : l$1, [2, fn(fn(fn({}, u$1), c$1), { json: p$1 })];
			}));
		}));
	}, t.prototype.getChoruses = function() {
		return this._data.getChoruses();
	}, t.prototype.findChorus = function(t$1, e$1) {
		return this._data.findChorus(t$1, e$1);
	}, t.prototype.findChorusBetween = function(t$1, e$1) {
		return this._data.findChorusBetween(t$1, e$1);
	}, t.prototype.findChorusChange = function(t$1, e$1) {
		return this._data.findChorusChange(t$1, e$1);
	}, t.prototype.getBeats = function() {
		return this._data.getBeats();
	}, t.prototype.findBeat = function(t$1, e$1) {
		return this._data.findBeat(t$1, e$1);
	}, t.prototype.findBeatChange = function(t$1, e$1) {
		return this._data.findBeatChange(t$1, e$1);
	}, t.prototype.getChords = function() {
		return this._data.getChords();
	}, t.prototype.findChord = function(t$1, e$1) {
		return this._data.findChord(t$1, e$1);
	}, t.prototype.findChordChange = function(t$1, e$1) {
		return this._data.findChordChange(t$1, e$1);
	}, t.prototype.getVocalFrequency = function(t$1) {
		return this._data.getVocalFrequency(t$1);
	}, t.prototype.getVocalAmplitude = function(t$1) {
		return this._data.getVocalAmplitude(t$1);
	}, t.prototype.getMaxVocalAmplitude = function() {
		return this._data.getMaxVocalAmplitude();
	}, t.prototype.getValenceArousal = function(t$1) {
		return this._data.getValenceArousal(t$1);
	}, t.prototype.getMedianValenceArousal = function() {
		return this._data.getMedianValenceArousal();
	}, t.prototype.resize = function(t$1) {
		return this.emitter.onResize(t$1);
	}, t.prototype.onResize = function(t$1) {
		return this.resize(t$1);
	}, t.prototype.setStageElement = function(t$1) {
		return this._stageElement = t$1, this.emitter.onStageElementSet(t$1);
	}, t.prototype.setMediaElement = function(t$1) {
		this.mediaElement = t$1;
	}, t.prototype.updateMediaElement = function(t$1) {
		"undefined" != typeof document && (this._mediaElement && Yi(this._mediaElement), t$1 ? (Yi(t$1), this._mediaSourceElement || (this._mediaSourceElement = document.createElement("div"), this._mediaSourceElement.classList.add("textalive-media-wrapper")), t$1.appendChild(this._mediaSourceElement), this._mediaBannerElement || (this._mediaBannerElement = document.createElement("div"), this._mediaSourceElement.classList.add("textalive-banner-wrapper")), t$1.appendChild(this._mediaBannerElement)) : (this._mediaSourceElement = null, this._mediaBannerElement = null)), this._mediaElement = t$1, this.emitter.onMediaElementSet(t$1);
	}, t.prototype.setVideoPosition = function(t$1) {
		return yn(this, 0, void 0, (function() {
			var e$1 = this;
			return gn(this, (function(r$1) {
				return [2, this.stage.requestUpdate(t$1).then((function(t$2) {
					return e$1._videoPosition = t$2, e$1.emitter.onVideoSeek(t$2), t$2;
				}))];
			}));
		}));
	}, t.prototype.setMediaPosition = function(t$1) {
		return yn(this, 0, void 0, (function() {
			return gn(this, (function(e$1) {
				return this.requestMediaSeek(t$1), [2];
			}));
		}));
	}, t.prototype.requestPlay = function() {
		return this._timer.play(), !0;
	}, t.prototype.requestStop = function() {
		return this._timer.stop(), !0;
	}, t.prototype.requestPause = function() {
		return this._timer.pause(), !0;
	}, t.prototype.requestMediaSeek = function(t$1) {
		return this._timer.seek(t$1), !0;
	}, t.prototype.startVideoSeek = function() {
		return this._isVideoSeeking = !0, this.emitter.onVideoSeekStart();
	}, t.prototype.endVideoSeek = function() {
		return this._isVideoSeeking = !1, this.emitter.onVideoSeekEnd();
	}, t.prototype.requestSettingBackground = function(t$1) {
		return yn(this, 0, void 0, (function() {
			return gn(this, (function(e$1) {
				return [2, this.backgroundGraphics.settingBackground(t$1)];
			}));
		}));
	}, t.prototype.requestSetBackground = function(t$1) {
		return yn(this, 0, void 0, (function() {
			return gn(this, (function(e$1) {
				return [2, this.backgroundGraphics.setBackground(t$1)];
			}));
		}));
	}, t.prototype.requestStageUpdate = function() {
		return yn(this, 0, void 0, (function() {
			return gn(this, (function(t$1) {
				return [2, this.stage.requestUpdate()];
			}));
		}));
	}, t.prototype.onStageUpdate = function(t$1) {
		this._isVideoSeeking || this.emitter.onTimeUpdate(t$1);
	}, t.prototype.dispose = function() {
		this._timer && (this._timer.dispose(), this._timer = null), this.mediaElement && (Yi(this._mediaElement), this._mediaElement = null), this.stageElement && (this._stageElement = null), this.emitter.onDispose();
	}, t;
}();
console.log("# \n\n\n\n\n\nTextAlive App API\nTextAlive App API TextAlive https://textalive.jp/  https://developer.textalive.jp/ \n\n# \n\ntextalive-ml@aist.go.jp");
var Xi = r.sortedIndex;

//#endregion
export { wn as BasicTimer, X as Color, Ai as Ease, pt as Matrix2D, Hi as Player, Fi as PlayerLogoImage, ht as Point, En as SongleTimer, $ as TimedUnit, n as UnitTypes, S as dataUrlToString, st as findTimedObject, at as findTimedObjectsInRange, O as isStringEncodedDataUrl, Xi as sortedIndex, T as stringToDataUrl };
//# sourceMappingURL=textalive-app-api.js.map